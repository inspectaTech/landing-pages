/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"main": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// script path function
/******/ 	function jsonpScriptSrc(chunkId) {
/******/ 		return __webpack_require__.p + "" + ({"templates/draft/formTemplates":"templates/draft/formTemplates"}[chunkId]||chunkId) + ".chunk.js"
/******/ 	}
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		var promises = [];
/******/
/******/
/******/ 		// JSONP chunk loading for javascript
/******/
/******/ 		var installedChunkData = installedChunks[chunkId];
/******/ 		if(installedChunkData !== 0) { // 0 means "already installed".
/******/
/******/ 			// a Promise means "currently loading".
/******/ 			if(installedChunkData) {
/******/ 				promises.push(installedChunkData[2]);
/******/ 			} else {
/******/ 				// setup Promise in chunk cache
/******/ 				var promise = new Promise(function(resolve, reject) {
/******/ 					installedChunkData = installedChunks[chunkId] = [resolve, reject];
/******/ 				});
/******/ 				promises.push(installedChunkData[2] = promise);
/******/
/******/ 				// start chunk loading
/******/ 				var script = document.createElement('script');
/******/ 				var onScriptComplete;
/******/
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.src = jsonpScriptSrc(chunkId);
/******/
/******/ 				// create error before stack unwound to get useful stacktrace later
/******/ 				var error = new Error();
/******/ 				onScriptComplete = function (event) {
/******/ 					// avoid mem leaks in IE.
/******/ 					script.onerror = script.onload = null;
/******/ 					clearTimeout(timeout);
/******/ 					var chunk = installedChunks[chunkId];
/******/ 					if(chunk !== 0) {
/******/ 						if(chunk) {
/******/ 							var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 							var realSrc = event && event.target && event.target.src;
/******/ 							error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 							error.name = 'ChunkLoadError';
/******/ 							error.type = errorType;
/******/ 							error.request = realSrc;
/******/ 							chunk[1](error);
/******/ 						}
/******/ 						installedChunks[chunkId] = undefined;
/******/ 					}
/******/ 				};
/******/ 				var timeout = setTimeout(function(){
/******/ 					onScriptComplete({ type: 'timeout', target: script });
/******/ 				}, 120000);
/******/ 				script.onerror = script.onload = onScriptComplete;
/******/ 				document.head.appendChild(script);
/******/ 			}
/******/ 		}
/******/ 		return Promise.all(promises);
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "rocket/js/dist/";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./js/index.js","vendor"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./js/components/Narrator/Message.js":
/*!*******************************************!*\
  !*** ./js/components/Narrator/Message.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"./node_modules/@babel/runtime/helpers/extends.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_ProfileIcon_ProfileIcon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/ProfileIcon/ProfileIcon */ \"./js/components/Narrator/components/ProfileIcon/ProfileIcon.js\");\n/* harmony import */ var _components_Draft_Note__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/Draft/Note */ \"./js/components/Narrator/components/Draft/Note.js\");\n/* harmony import */ var _tools_exists__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tools/exists */ \"./js/components/Narrator/tools/exists.js\");\n/* harmony import */ var _tools_exists__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_tools_exists__WEBPACK_IMPORTED_MODULE_5__);\n\n\n// const {htmlDecode} = require('../../tools/html_decode');\n\n // import Clips from '../Clips/Clips';\n\n\n\n\nvar Message = function Message(_ref) {\n  var data = _ref.data;\n  var iUN_ref = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(data.iUN || Math.round(Math.random() * 10000));\n  var iUN = iUN_ref.current;\n  var payload = data.payload;\n  var user = data.project_id ? data.project_id : data.user_id; //user_id vs project_id is too confusing\n  //what if user has multiple projects - like i have multiple channels on youtube?\n  //what if multiple users are chatting from the same project?\n\n  var no_color = \"#f3f3f3\";\n  var color = data.color || no_color;\n  var custom = data.custom || \"\";\n  var preset_data = data.preset_data || {};\n  var getEditorCallback = data.getEditorCallback;\n  var name = \"narr_message_profile\";\n  var item_id = data.item_id;\n  var msg_id = data._id;\n  var reply = data.reply;\n  var un_reply = data.un_reply;\n  var un_ref = data.un_ref;\n  var reply_data = data.reply_data;\n  var ref_data = data.ref_data;\n  var reply_attr = {};\n  var msg_attr = {};\n  var ref_attr = {};\n  var prep_reply_data;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(0),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState, 2),\n      upVal = _useState2[0],\n      setUpVal = _useState2[1]; // integer state\n\n\n  var forceUpdate = function forceUpdate() {\n    setUpVal(function (upVal) {\n      return ++upVal;\n    }); // update the state to force render\n  }; // forceUpdate\n  // ultimately for this to work id have to use dangerouslySetInnerHTML\n\n\n  var who_dis = user == VIEWER_DATA.project_id ? \"viewer\" : \"contact\"; // .user_id\n  // useEffect(() => {\n  //   let reply_message = document.querySelector(`.message_${iUN}`);\n  //\n  //   if(!reply_message) return;\n  //\n  //   let reply_box_height = reply_message.getBoundingClientRect().height;\n  //\n  //   // let reply_height = `${Math.floor(reply_box_height * .70)}px`;\n  //   let reply_height = `${Math.floor(reply_box_height)}px`;// im measuring its scaled size - no need to scale it further\n  //\n  //   let reply_section = document.querySelector(`.narr_reply_section_${iUN}`);\n  //   reply_section.style.height = reply_height;\n  //\n  //   // reply data Note is updated after the setReplyData render - so this height detection will only\n  //   // target the last Note text not the current text\n  // },[upVal]);\n\n  var Profile = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useMemo\"])(function () {\n    return /*#__PURE__*/React.createElement(_components_ProfileIcon_ProfileIcon__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n      data: {\n        /*item:data,*/\n        preset_data: preset_data,\n        name: name\n        /*deep_dive:callbackName,*/\n\n        /*init_stage: 3, fallback: \"icon\"*/\n\n      }\n    });\n  }, [preset_data]); // works but not helping to reduce jank\n\n  var note_data = {\n    item_data: payload,\n    name: \"text\",\n    custom: custom\n  };\n  var has_note = has_content(payload);\n\n  if (getEditorCallback) {\n    note_data.getEditorCallback = getEditorCallback;\n  }\n\n  if (reply_data) {\n    prep_reply_data = {\n      item_data: reply_data.payload,\n      name: \"text\",\n      custom: \"reply\"\n    };\n\n    if (data.getReplyState) {\n      prep_reply_data.getEditorCallback = data.getReplyState; // prep_reply_data.update_trigger = forceUpdate;\n    } // if\n    // still an old/ obsolete payload height\n    // reply_attr = {\n    //   style:{\n    //     height:`${Math.floor(reply_data.payload.height * .70)}px`\n    //   }\n    // }\n\n  } // if\n\n\n  if (ref_data && un_ref) {\n    // set Clips cancel/close btn\n    ref_data.remove = {\n      icon: \"cross\",\n      callback: un_ref,\n      force: true\n    };\n  } // if\n\n\n  if (msg_id) {\n    // console.log(`[Message] data`, data._id);\n    msg_attr[\"data-msg_id\"] = msg_id;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message \".concat(who_dis, \" \").concat(custom)\n  }, /*#__PURE__*/React.createElement(_components_ProfileIcon_ProfileIcon__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    data: {\n      /*item:data,*/\n      preset_data: preset_data,\n      name: name\n      /*deep_dive:callbackName,*/\n\n      /*init_stage: 3, fallback: \"icon\"*/\n\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n    className: \"narr_message_content w3-card\",\n    style: {\n      backgroundColor: color\n    }\n  }, msg_attr), reply_data ? /*#__PURE__*/React.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n    className: \"narr_reply_section narr_reply_section_\".concat(iUN)\n  }, reply_attr), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_reply\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message message_\".concat(iUN, \" \").concat(who_dis, \" reply_ref\")\n  }, /*#__PURE__*/React.createElement(_components_ProfileIcon_ProfileIcon__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    data: {\n      /*item:data,*/\n      preset_data: reply_data.preset_data,\n      name: \"narr_reply_profile\"\n      /*deep_dive:callbackName,*/\n\n      /*init_stage: 3, fallback: \"icon\"*/\n\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_message_content w3-card \",\n    style: {\n      backgroundColor: reply_data.color\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner\"\n  }, /*#__PURE__*/React.createElement(_components_Draft_Note__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    data: prep_reply_data\n  }))))), un_reply ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_un_reply d3-ico icon-cross\",\n    onClick: function onClick() {\n      un_reply();\n    }\n  }) : null)) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner\"\n  }, !has_note && (reply_data || ref_data) ? null : /*#__PURE__*/React.createElement(_components_Draft_Note__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    data: note_data\n  })), item_id && has_note ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_reply_icon d3-ico icon-reply\",\n    onClick: function onClick() {\n      reply(data);\n    }\n  }) : null, ref_data ? /*#__PURE__*/React.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n    className: \"narr_ref_section narr_ref_section_\".concat(iUN)\n  }, ref_attr)) : null));\n}; // ISSUE: come up with a reply scheme for ref_data with no note && no reply. Can i use the ref_data title instead?\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Message); // return <div className={`message`}>{htmlDecode(escape(payload.text))}</div>\n\nvar has_content = function has_content(payload) {\n  if (!Object(_tools_exists__WEBPACK_IMPORTED_MODULE_5__[\"exists\"])(payload) || !Object(_tools_exists__WEBPACK_IMPORTED_MODULE_5__[\"obj_exists\"])(payload, \"text\")) return false;\n  var raw_data = typeof payload.text == \"string\" ? JSON.parse(payload.text) : payload.text;\n  return Object(_tools_exists__WEBPACK_IMPORTED_MODULE_5__[\"obj_exists\"])(raw_data, \"blocks\") ? raw_data.blocks.some(function (block) {\n    return block.text != \"\";\n  }) : false;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL01lc3NhZ2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL01lc3NhZ2UuanM/NDZiYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb25zdCB7aHRtbERlY29kZX0gPSByZXF1aXJlKCcuLi8uLi90b29scy9odG1sX2RlY29kZScpO1xyXG5pbXBvcnQge3VzZU1lbW8sIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvZmlsZUljb24gZnJvbSAnLi9jb21wb25lbnRzL1Byb2ZpbGVJY29uL1Byb2ZpbGVJY29uJztcclxuLy8gaW1wb3J0IENsaXBzIGZyb20gJy4uL0NsaXBzL0NsaXBzJztcclxuXHJcbmltcG9ydCBOb3RlIGZyb20gJy4vY29tcG9uZW50cy9EcmFmdC9Ob3RlJ1xyXG5pbXBvcnQgeyBvYmpfZXhpc3RzLCBleGlzdHMgfSBmcm9tICcuL3Rvb2xzL2V4aXN0cyc7XHJcblxyXG5jb25zdCBNZXNzYWdlID0gKHtkYXRhfSkgPT4ge1xyXG4gIGNvbnN0IGlVTl9yZWYgPSB1c2VSZWYoZGF0YS5pVU4gfHwgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMDApKTtcclxuICBjb25zdCBpVU4gPSBpVU5fcmVmLmN1cnJlbnQ7XHJcbiAgbGV0IHBheWxvYWQgPSBkYXRhLnBheWxvYWQ7XHJcbiAgbGV0IHVzZXIgPSBkYXRhLnByb2plY3RfaWQgPyBkYXRhLnByb2plY3RfaWQgOiBkYXRhLnVzZXJfaWQ7Ly91c2VyX2lkIHZzIHByb2plY3RfaWQgaXMgdG9vIGNvbmZ1c2luZ1xyXG4gIC8vd2hhdCBpZiB1c2VyIGhhcyBtdWx0aXBsZSBwcm9qZWN0cyAtIGxpa2UgaSBoYXZlIG11bHRpcGxlIGNoYW5uZWxzIG9uIHlvdXR1YmU/XHJcbiAgLy93aGF0IGlmIG11bHRpcGxlIHVzZXJzIGFyZSBjaGF0dGluZyBmcm9tIHRoZSBzYW1lIHByb2plY3Q/XHJcbiAgbGV0IG5vX2NvbG9yID0gYCNmM2YzZjNgO1xyXG4gIGxldCBjb2xvciA9IGRhdGEuY29sb3IgfHwgbm9fY29sb3I7XHJcbiAgbGV0IGN1c3RvbSA9IGRhdGEuY3VzdG9tIHx8IFwiXCI7XHJcbiAgbGV0IHByZXNldF9kYXRhID0gZGF0YS5wcmVzZXRfZGF0YSB8fCB7fTtcclxuICBsZXQgZ2V0RWRpdG9yQ2FsbGJhY2sgPSBkYXRhLmdldEVkaXRvckNhbGxiYWNrO1xyXG4gIGxldCBuYW1lID0gXCJuYXJyX21lc3NhZ2VfcHJvZmlsZVwiO1xyXG4gIGxldCBpdGVtX2lkID0gZGF0YS5pdGVtX2lkO1xyXG4gIGxldCBtc2dfaWQgPSBkYXRhLl9pZDtcclxuICBsZXQgcmVwbHkgPSBkYXRhLnJlcGx5O1xyXG4gIGxldCB1bl9yZXBseSA9IGRhdGEudW5fcmVwbHk7XHJcbiAgbGV0IHVuX3JlZiA9IGRhdGEudW5fcmVmO1xyXG4gIGxldCByZXBseV9kYXRhID0gZGF0YS5yZXBseV9kYXRhO1xyXG4gIGxldCByZWZfZGF0YSA9IGRhdGEucmVmX2RhdGE7XHJcbiAgbGV0IHJlcGx5X2F0dHIgPSB7fTtcclxuICBsZXQgbXNnX2F0dHIgPSB7fTtcclxuICBsZXQgcmVmX2F0dHIgPSB7fTtcclxuICBsZXQgcHJlcF9yZXBseV9kYXRhO1xyXG5cclxuXHJcbiAgY29uc3QgW3VwVmFsLCBzZXRVcFZhbF0gPSB1c2VTdGF0ZSgwKTsgLy8gaW50ZWdlciBzdGF0ZVxyXG4gIGNvbnN0IGZvcmNlVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgc2V0VXBWYWwodXBWYWwgPT4gKyt1cFZhbCk7IC8vIHVwZGF0ZSB0aGUgc3RhdGUgdG8gZm9yY2UgcmVuZGVyXHJcbiAgfS8vIGZvcmNlVXBkYXRlXHJcbiAgLy8gdWx0aW1hdGVseSBmb3IgdGhpcyB0byB3b3JrIGlkIGhhdmUgdG8gdXNlIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MXHJcbiAgY29uc3Qgd2hvX2RpcyA9ICh1c2VyID09IFZJRVdFUl9EQVRBLnByb2plY3RfaWQpID8gXCJ2aWV3ZXJcIiA6IFwiY29udGFjdFwiOy8vIC51c2VyX2lkXHJcblxyXG4gIC8vIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgLy8gICBsZXQgcmVwbHlfbWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5tZXNzYWdlXyR7aVVOfWApO1xyXG4gIC8vXHJcbiAgLy8gICBpZighcmVwbHlfbWVzc2FnZSkgcmV0dXJuO1xyXG4gIC8vXHJcbiAgLy8gICBsZXQgcmVwbHlfYm94X2hlaWdodCA9IHJlcGx5X21lc3NhZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gIC8vXHJcbiAgLy8gICAvLyBsZXQgcmVwbHlfaGVpZ2h0ID0gYCR7TWF0aC5mbG9vcihyZXBseV9ib3hfaGVpZ2h0ICogLjcwKX1weGA7XHJcbiAgLy8gICBsZXQgcmVwbHlfaGVpZ2h0ID0gYCR7TWF0aC5mbG9vcihyZXBseV9ib3hfaGVpZ2h0KX1weGA7Ly8gaW0gbWVhc3VyaW5nIGl0cyBzY2FsZWQgc2l6ZSAtIG5vIG5lZWQgdG8gc2NhbGUgaXQgZnVydGhlclxyXG4gIC8vXHJcbiAgLy8gICBsZXQgcmVwbHlfc2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5uYXJyX3JlcGx5X3NlY3Rpb25fJHtpVU59YCk7XHJcbiAgLy8gICByZXBseV9zZWN0aW9uLnN0eWxlLmhlaWdodCA9IHJlcGx5X2hlaWdodDtcclxuICAvL1xyXG4gIC8vICAgLy8gcmVwbHkgZGF0YSBOb3RlIGlzIHVwZGF0ZWQgYWZ0ZXIgdGhlIHNldFJlcGx5RGF0YSByZW5kZXIgLSBzbyB0aGlzIGhlaWdodCBkZXRlY3Rpb24gd2lsbCBvbmx5XHJcbiAgLy8gICAvLyB0YXJnZXQgdGhlIGxhc3QgTm90ZSB0ZXh0IG5vdCB0aGUgY3VycmVudCB0ZXh0XHJcbiAgLy8gfSxbdXBWYWxdKTtcclxuXHJcbiAgY29uc3QgUHJvZmlsZSA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgcmV0dXJuIDxQcm9maWxlSWNvbiAgZGF0YT17eyAvKml0ZW06ZGF0YSwqL3ByZXNldF9kYXRhLCBuYW1lLCAvKmRlZXBfZGl2ZTpjYWxsYmFja05hbWUsKi8gLyppbml0X3N0YWdlOiAzLCBmYWxsYmFjazogXCJpY29uXCIqL319Lz5cclxuICB9LFtwcmVzZXRfZGF0YV0pOy8vIHdvcmtzIGJ1dCBub3QgaGVscGluZyB0byByZWR1Y2UgamFua1xyXG5cclxuICBjb25zdCBub3RlX2RhdGEgPSB7aXRlbV9kYXRhOnBheWxvYWQsIG5hbWU6XCJ0ZXh0XCIsIGN1c3RvbX07XHJcbiAgbGV0IGhhc19ub3RlID0gaGFzX2NvbnRlbnQocGF5bG9hZCk7XHJcblxyXG4gIGlmKGdldEVkaXRvckNhbGxiYWNrKXtcclxuICAgIG5vdGVfZGF0YS5nZXRFZGl0b3JDYWxsYmFjayA9IGdldEVkaXRvckNhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgaWYocmVwbHlfZGF0YSl7XHJcbiAgICBwcmVwX3JlcGx5X2RhdGEgPSB7aXRlbV9kYXRhOiByZXBseV9kYXRhLnBheWxvYWQsIG5hbWU6XCJ0ZXh0XCIsIGN1c3RvbTpcInJlcGx5XCJ9O1xyXG4gICAgaWYoZGF0YS5nZXRSZXBseVN0YXRlKXtcclxuICAgICAgcHJlcF9yZXBseV9kYXRhLmdldEVkaXRvckNhbGxiYWNrID0gZGF0YS5nZXRSZXBseVN0YXRlO1xyXG4gICAgICAvLyBwcmVwX3JlcGx5X2RhdGEudXBkYXRlX3RyaWdnZXIgPSBmb3JjZVVwZGF0ZTtcclxuICAgIH0vLyBpZlxyXG5cclxuICAgIC8vIHN0aWxsIGFuIG9sZC8gb2Jzb2xldGUgcGF5bG9hZCBoZWlnaHRcclxuICAgIC8vIHJlcGx5X2F0dHIgPSB7XHJcbiAgICAvLyAgIHN0eWxlOntcclxuICAgIC8vICAgICBoZWlnaHQ6YCR7TWF0aC5mbG9vcihyZXBseV9kYXRhLnBheWxvYWQuaGVpZ2h0ICogLjcwKX1weGBcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfVxyXG4gIH0vLyBpZlxyXG5cclxuICBpZihyZWZfZGF0YSAmJiB1bl9yZWYpe1xyXG4gICAgLy8gc2V0IENsaXBzIGNhbmNlbC9jbG9zZSBidG5cclxuICAgIHJlZl9kYXRhLnJlbW92ZSA9IHsgaWNvbjogXCJjcm9zc1wiLCBjYWxsYmFjazogdW5fcmVmLCBmb3JjZTogdHJ1ZX07XHJcbiAgfS8vIGlmXHJcblxyXG4gIGlmIChtc2dfaWQpe1xyXG4gICAgLy8gY29uc29sZS5sb2coYFtNZXNzYWdlXSBkYXRhYCwgZGF0YS5faWQpO1xyXG4gICAgbXNnX2F0dHJbXCJkYXRhLW1zZ19pZFwiXSA9IG1zZ19pZDtcclxuICB9XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT17YG1lc3NhZ2UgJHt3aG9fZGlzfSAke2N1c3RvbX1gfT5cclxuICAgICAgey8qIHtQcm9maWxlfSAqL31cclxuICAgICAgPFByb2ZpbGVJY29uICBkYXRhPXt7IC8qaXRlbTpkYXRhLCovcHJlc2V0X2RhdGEsIG5hbWUsIC8qZGVlcF9kaXZlOmNhbGxiYWNrTmFtZSwqLyAvKmluaXRfc3RhZ2U6IDMsIGZhbGxiYWNrOiBcImljb25cIiovfX0vPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5hcnJfbWVzc2FnZV9jb250ZW50IHczLWNhcmRcIiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogY29sb3J9fSB7Li4ubXNnX2F0dHJ9ID5cclxuICAgICAgICAgIHsgcmVwbHlfZGF0YSA/IChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BuYXJyX3JlcGx5X3NlY3Rpb24gbmFycl9yZXBseV9zZWN0aW9uXyR7aVVOfWB9IHsuLi5yZXBseV9hdHRyfSA+XHJcbiAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmFycl9yZXBseVwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YG1lc3NhZ2UgbWVzc2FnZV8ke2lVTn0gJHt3aG9fZGlzfSByZXBseV9yZWZgfT5cclxuICAgICAgICAgICAgICAgICAgICA8UHJvZmlsZUljb24gIGRhdGE9e3sgLyppdGVtOmRhdGEsKi9wcmVzZXRfZGF0YTpyZXBseV9kYXRhLnByZXNldF9kYXRhLCBuYW1lOiBcIm5hcnJfcmVwbHlfcHJvZmlsZVwiLCAvKmRlZXBfZGl2ZTpjYWxsYmFja05hbWUsKi8gLyppbml0X3N0YWdlOiAzLCBmYWxsYmFjazogXCJpY29uXCIqL319Lz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5hcnJfbWVzc2FnZV9jb250ZW50IHczLWNhcmQgXCIgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6IHJlcGx5X2RhdGEuY29sb3J9fT5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5uZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPE5vdGUgZGF0YT17cHJlcF9yZXBseV9kYXRhfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICB7IHVuX3JlcGx5ID8gKDxkaXYgY2xhc3NOYW1lPVwibmFycl91bl9yZXBseSBkMy1pY28gaWNvbi1jcm9zc1wiIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdW5fcmVwbHkoKTtcclxuICAgICAgICAgICAgICAgIH19PjwvZGl2PikgOiBudWxsIH1cclxuICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubmVyXCI+XHJcbiAgICAgICAgICB7IWhhc19ub3RlICYmIChyZXBseV9kYXRhIHx8IHJlZl9kYXRhKSA/IG51bGwgOiA8Tm90ZSBkYXRhPXtub3RlX2RhdGF9IC8+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIHtpdGVtX2lkICYmIGhhc19ub3RlID8gKDxkaXYgY2xhc3NOYW1lPVwibmFycl9yZXBseV9pY29uIGQzLWljbyBpY29uLXJlcGx5XCIgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgcmVwbHkoZGF0YSk7XHJcbiAgICAgICAgfX0+PC9kaXY+KSA6IG51bGwgfVxyXG4gICAgICAgICAge3JlZl9kYXRhID8gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YG5hcnJfcmVmX3NlY3Rpb24gbmFycl9yZWZfc2VjdGlvbl8ke2lVTn1gfSB7Li4ucmVmX2F0dHJ9ID5cclxuICAgICAgICAgICAgICB7LyogPENsaXBzIGRhdGE9e3sgLi4ucmVmX2RhdGEgfX0gbW9kZT1cImNvcmVcIiAvPiAqL31cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApOiBudWxsfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuLy8gSVNTVUU6IGNvbWUgdXAgd2l0aCBhIHJlcGx5IHNjaGVtZSBmb3IgcmVmX2RhdGEgd2l0aCBubyBub3RlICYmIG5vIHJlcGx5LiBDYW4gaSB1c2UgdGhlIHJlZl9kYXRhIHRpdGxlIGluc3RlYWQ/XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlO1xyXG5cclxuLy8gcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtgbWVzc2FnZWB9PntodG1sRGVjb2RlKGVzY2FwZShwYXlsb2FkLnRleHQpKX08L2Rpdj5cclxuXHJcbmNvbnN0IGhhc19jb250ZW50ID0gKHBheWxvYWQpID0+IHtcclxuICBpZiAoIWV4aXN0cyhwYXlsb2FkKSB8fCAhb2JqX2V4aXN0cyhwYXlsb2FkLFwidGV4dFwiKSkgcmV0dXJuIGZhbHNlO1xyXG4gIGxldCByYXdfZGF0YSA9IHR5cGVvZiBwYXlsb2FkLnRleHQgPT0gXCJzdHJpbmdcIiA/IEpTT04ucGFyc2UocGF5bG9hZC50ZXh0KSA6IHBheWxvYWQudGV4dDtcclxuICByZXR1cm4gb2JqX2V4aXN0cyhyYXdfZGF0YSxcImJsb2Nrc1wiKSA/IHJhd19kYXRhLmJsb2Nrcy5zb21lKChibG9jaykgPT4ge1xyXG4gICAgcmV0dXJuIGJsb2NrLnRleHQgIT0gXCJcIjtcclxuICB9KSA6IGZhbHNlO1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/Message.js\n");

/***/ }),

/***/ "./js/components/Narrator/Narrator.js":
/*!********************************************!*\
  !*** ./js/components/Narrator/Narrator.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _components_VirtualScroll_Views__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/VirtualScroll/Views */ \"./js/components/Narrator/components/VirtualScroll/Views.js\");\n/* harmony import */ var _components_ProfileIcon_ProfileIcon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/ProfileIcon/ProfileIcon */ \"./js/components/Narrator/components/ProfileIcon/ProfileIcon.js\");\n/* harmony import */ var _Message__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Message */ \"./js/components/Narrator/Message.js\");\n/* harmony import */ var _components_Draft_Entry__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/Draft/Entry */ \"./js/components/Narrator/components/Draft/Entry.js\");\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\nvar Color = __webpack_require__(/*! tinycolor */ \"tinycolor\"); // const socket = io();\n// import VirtualScroll from '../VirtualScroll/VirtualScroll';\n\n\n\n\n\n // how can i use this in details view which is stateless?\n\nvar _require = __webpack_require__(/*! ./tools/exists */ \"./js/components/Narrator/tools/exists.js\"),\n    exists = _require.exists,\n    obj_exists = _require.obj_exists; // const {removeSomething} = require('./tools/remove_something');\n\n\nvar _require2 = __webpack_require__(/*! ./components/Toast/toaster */ \"./js/components/Narrator/components/Toast/toaster.js\"),\n    toaster = _require2.toaster;\n\nvar display_console = false;\nvar local_port = 3001;\n\n__webpack_require__(/*! ./Narrator.scss */ \"./js/components/Narrator/Narrator.scss\");\n\nvar Narrator = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_5__[\"forwardRef\"])(function (props, ref) {\n  // i need to figure out the max i can add b4 i need to open a separate modal\n  var data = props.data;\n  var item_data = {\n    _id: \"12345\"\n  }; // data.item_data;\n\n  var iUN_ref = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(props.iUN || Math.round(Math.random() * 10000));\n  var iUN = iUN_ref.current;\n  var comment_ref = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])();\n  var editor_ref = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])();\n  var default_height = 30;\n  var default_state = {\n    text: \"\",\n    count: 0,\n    \"class\": \"\",\n    height: default_height\n  };\n  var delay = (data === null || data === void 0 ? void 0 : data.delay) || false;\n  var init = delay ? false : true; // const test_presets = [{preset_data:VIEWER_DATA.preset_data}, {preset_data:VIEWER_DATA.preset_data},  {preset_data:VIEWER_DATA.preset_data}, {preset_data:VIEWER_DATA.preset_data}];\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])({\n    init: init\n  }),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(default_state),\n      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState3, 2),\n      comment = _useState4[0],\n      setComment = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])({\n    list: [],\n    data: {}\n  }),\n      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState5, 2),\n      users = _useState6[0],\n      setUsers = _useState6[1];\n\n  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])({\n    list: [],\n    data: {},\n    height: [0]\n  }),\n      _useState8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState7, 2),\n      messages = _useState8[0],\n      setMessages = _useState8[1];\n\n  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(),\n      _useState10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState9, 2),\n      reply_data = _useState10[0],\n      setReplyData = _useState10[1];\n\n  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(),\n      _useState12 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState11, 2),\n      ref_data = _useState12[0],\n      setRefData = _useState12[1];\n\n  var ready_send = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(false);\n\n  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(getLightColor()),\n      _useState14 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState13, 2),\n      randomColor = _useState14[0],\n      setRandomColor = _useState14[1];\n\n  var narr_messages = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(); // used to scroll back to bottom\n  // const roomName = useRef();\n\n  var project_token = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(sessionStorage.getItem(\"project_token\"));\n  var room = item_data._id;\n  var socket_ref = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])();\n  var editorStateArray = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])();\n  var messageStateArray = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])();\n  var replyStateArray = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])();\n  var ref_item_store = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(\"ref_store_\".concat(iUN));\n\n  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(false),\n      _useState16 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState15, 2),\n      view_options = _useState16[0],\n      setViewOptions = _useState16[1];\n\n  var _useState17 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(false),\n      _useState18 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState17, 2),\n      view_preview = _useState18[0],\n      setViewPreview = _useState18[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function (params) {\n    return function () {// unmounting\n    };\n  }, []); // can this user join the chat?\n\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    // 'http://127.0.0.1:3001'\n    if (!state.init) return; // state.init works as designed\n    // toaster({name:\"snap_toast\",message:`[Narrator] socket is starting`, auto:false});\n\n    socket_ref.current = location.hostname.includes(\"sunzao.us\") ? io.connect(\"\".concat(location.origin), {\n      path: \"/narrator\"\n    }) : io.connect(\"http://127.0.0.1:\".concat(local_port)); // `${location.origin}:3002/webrtcPeer`\n    // \"https://sunzao.us/narrator\"\n\n    var socket = socket_ref.current;\n    if (display_console || true) console.warn(\"[Narrator] project_token\", project_token.current); // join uses the project_id if available right now. idk if i want to limit it to user_id yet\n\n    socket.emit(\"joinRoom\", {\n      room: room,\n      token: project_token.current,\n      color: randomColor\n    }); // get room users\n\n    socket.on(\"roomUsers\", function (_ref) {\n      var room = _ref.room,\n          users = _ref.users;\n      if (display_console || true) console.log(\"[narrator] users\", users);\n      var list = [];\n      var data = {};\n      users.forEach(function (user) {\n        // let user_id = user.user_id;\n        var project_id = user.project_id;\n        list.push(project_id); // user_id\n\n        data[\"\".concat(project_id)] = user; // user_id\n      });\n      setUsers({\n        list: list,\n        data: data\n      }); // outputRoomName(room);\n      // outputUsers(users)\n    });\n    socket.on(\"info\", function (message) {\n      if (display_console || true) console.log(\"[narrator] info \", message);\n    }); // info\n    // message from server\n\n    socket.on(\"message\", function (message) {\n      if (display_console || true) console.log(\"[narrator] message \", message);\n      var msg_cont = narr_messages.current; // output the message to the DOM\n\n      outputMessage(message); // add the message to the front of the array\n      // scroll down\n\n      msg_cont.scrollTop = msg_cont.scrollHeight;\n    });\n    socket.on(\"blocked\", function (message) {\n      // print blocked message?\n      socket.close();\n    }); // return () => {\n    //   leaveRoom();\n    // }\n\n    return function () {\n      socket.close();\n    };\n  }, [state.init]);\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    // update the reply editor after the reply_data state is updated and re-rendered\n    if (replyStateArray.current != undefined) {\n      if (reply_data) {\n        update_editor({\n          editor: replyStateArray,\n          blocks: reply_data.payload.text\n        });\n      }\n      /*else{\r\n       // of its undefined it won't need to reset the editor. the editor won't exist\r\n       reset_editor(replyStateArray);\r\n      }// else*/\n\n    } // if rereplyStateArray\n\n  }, [reply_data]);\n\n  var initialize = function initialize() {\n    if (display_console || true) console.warn(\"[Narrator] initializing\");\n    if (state.init) return;\n    setState({\n      init: true\n    });\n  }; // initialize\n\n\n  if (ref) {\n    ref.state = state; // works\n\n    ref.initialize = initialize; // works\n  }\n\n  var getEditorState = function getEditorState(stateArrays) {\n    editorStateArray.current = stateArrays;\n  }; // getEditorState\n\n\n  var getMessageState = function getMessageState(stateArrays) {\n    messageStateArray.current = stateArrays;\n  }; // getMessageState\n\n\n  var getReplyState = function getReplyState(stateArrays) {\n    replyStateArray.current = stateArrays;\n  }; // getReplyState\n  // output message to DOM\n\n\n  var outputMessage = function outputMessage(message) {\n    // users// this version of users isn't an update verison - its the nearly empty version set at the init\n    setMessages(function (prev) {\n      // return [message, ...prev];\n      var msg_id = message._id; // msg_id - this may not even matter\n      // add preset_data to the message\n      // let found_user = users[message.project_id]\n      // let preset_data = found_user.preset_data || {};\n      // message.preset_data = preset_data;\n\n      var message_state = {};\n      message_state.list = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(prev.list), [msg_id]);\n      message_state.data = _objectSpread({}, prev.data);\n      message_state.data[\"\".concat(msg_id)] = message;\n      var last_height_value = prev.height[prev.height.length - 1];\n      message_state.height = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(prev.height), [last_height_value + message.payload.height]);\n      return message_state;\n    });\n  }; // outputMessage\n  // // add room name to DOM\n  // function outputRoomName(room){\n  //   roomName.innerText = room;\n  // }// outputRoomName\n  //\n  // // output users to DOM\n  // function outputUsers(users){\n  //   userList.innerHTML = `\n  //     ${users.map(user => `<li>${user.username}</li>`).join(\"\")}\n  //     `;\n  // }// outputUsers\n\n\n  var update_comment = function update_comment(eTxt) {\n    var target_el = comment_ref.current;\n    var height = default_height; // default height\n\n    if (display_console || false) console.warn(\"[Narrator] target_el\", target_el);\n    if (display_console || false) console.warn(\"[Narrator] scrollHeight\", target_el.scrollHeight); // [Creating a textarea with auto-resize](https://stackoverflow.com/questions/454202/creating-a-textarea-with-auto-resize)\n    // trim before saving (trim just removes leading and trailing spaces)\n    // let prepared_value = removeSomething(target_el.value, \"   \",\"  \");// restricts multiple spaces (allows 2)\n\n    if (display_console || false) console.warn(\"[Narrator] entry text\", eTxt);\n    var prepared_value = eTxt; // remove empty space\n    // reset height if empty - do i need to/can i remove enters?\n\n    if (display_console || false) console.warn(\"[Narrator] target height\", target_el.getBoundingClientRect().height); // target_el.style.height = (target_el.scrollHeight > height) ? target_el.scrollHeight+'px' : `${height}px`;\n    // target_el.style.height = (target_el.getBoundingClientRect().height > height) ? target_el.getBoundingClientRect().height+'px' : `${height}px`;\n    // // controlling text limit\n    // let counter_class = (prepared_value.length >= caption_limit) ? \"full\": (prepared_value.length > (caption_limit - remaining_warning) && prepared_value.length < caption_limit) ? \"warn\" : \"\";\n\n    var counter_class = \"\"; // // just keep it sliced anyway\n    // prepared_value = prepared_value.slice(0,caption_limit);\n\n    var _editorStateArray$cur = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(editorStateArray.current, 3),\n        editorState = _editorStateArray$cur[0],\n        draftEditor = _editorStateArray$cur[1],\n        setDraftEditor = _editorStateArray$cur[2];\n\n    var constentState = draftEditor.getCurrentContent();\n    var has_text = constentState.hasText();\n    var raw_data = JSON.parse(prepared_value);\n    var has_content = raw_data.blocks.some(function (block) {\n      return block.text != \"\";\n    });\n    ready_send.current = has_content || ref_data ? true : false;\n    update_editor({\n      editor: messageStateArray,\n      blocks: prepared_value\n    });\n    setComment(function (prev) {\n      // i should floor the height\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        text: prepared_value,\n        count: prepared_value.length,\n        \"class\": counter_class,\n        height: Math.floor(target_el.getBoundingClientRect().height)\n      });\n    });\n  }; // update_comment\n\n\n  var send_comment = function send_comment() {\n    var socket = socket_ref.current;\n    var prep_text = comment.text; // prep_text = `<span>${prep_text.replace(/\\r\\n|\\r|\\n/g,\"<br />\")}</span>`;// replaces textarea newline with br tags - deprecated\n\n    var height_el = document.querySelector(\".narr_hidden_message_cont\"); // i should floor the height from the start\n\n    var final_height = Math.floor(height_el.getBoundingClientRect().height);\n    var msg = {\n      room: room,\n      payload: {\n        text: prep_text,\n        height: final_height\n      },\n      token: project_token.current,\n      item_id: item_data._id\n    };\n\n    if (reply_data) {\n      msg.reply_id = reply_data._id;\n    } // if\n\n\n    if (ref_data) {\n      msg.ref_id = ref_data._id;\n    } // if\n\n\n    socket.emit(\"chatMessage\", msg);\n    reset_text();\n  }; // send_comment\n\n\n  var update_editor = function update_editor(_ref2) {\n    var editor = _ref2.editor,\n        blocks = _ref2.blocks;\n    if (editor.current == undefined) return; // do nothing\n\n    var _editor$current = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(editor.current, 4),\n        editorState = _editor$current[0],\n        draftEditor = _editor$current[1],\n        setDraftEditor = _editor$current[2],\n        convertFromRaw = _editor$current[3];\n\n    var newContentState = convertFromRaw(JSON.parse(blocks)); // GOTCHA: needed to be parsed\n\n    setDraftEditor(editorState.createWithContent(newContentState)); // const ContentState = convertFromRaw(JSON.parse(txt_obj))\n    // setDraftEditor(editorState.push(editorState, ContentState));\n  }; // update_editor\n\n\n  var reset_editor = function reset_editor(editor) {\n    if (editor.current == undefined) return; // do nothing\n\n    var _editor$current2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(editor.current, 4),\n        editorState = _editor$current2[0],\n        draftEditor = _editor$current2[1],\n        setDraftEditor = _editor$current2[2],\n        convertFromRaw = _editor$current2[3];\n\n    setDraftEditor(editorState.createEmpty());\n  }; // clear editors\n\n\n  var reset_text = function reset_text() {\n    // let target_el = comment_ref.current;\n    // target_el.value = \"\";\n    // target_el.style.height = `${default_height}px`;\n    // const [editorState, draftEditor, setDraftEditor] = editorStateArray.current;\n    // setDraftEditor(editorState.createEmpty());\n    reset_editor(editorStateArray);\n    reset_editor(messageStateArray); // reset_editor(replyStateArray);// nope this doesn't help erase the sample\n\n    setComment(default_state);\n    setReplyData();\n    setRefData();\n    setViewOptions(false);\n    setViewPreview(false); // draftEditor.focus();// failed - but extraneous\n  }; // reset_text\n\n\n  var fetch_info = /*#__PURE__*/function () {\n    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark(function _callee() {\n      var _ref4,\n          _ref4$obj,\n          obj,\n          _args = arguments;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _ref4 = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, _ref4$obj = _ref4.obj, obj = _ref4$obj === void 0 ? {} : _ref4$obj;\n              if (display_console || false) console.warn(\"[Narrator] fetch_info callback triggered...\");\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetch_info() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // fetch_info\n\n\n  var reply = function reply(data) {\n    // state or ref?\n    setReplyData(data); // display the preview\n\n    setViewOptions(true);\n    setViewPreview(true);\n  }; // reply\n\n\n  var un_reply = function un_reply() {\n    setReplyData();\n  }; // un_reply\n\n\n  var un_ref = function un_ref() {\n    setRefData();\n  }; // un_ref\n\n\n  var height_calc = function height_calc(_ref5) {\n    var list = _ref5.list,\n        data = _ref5.data;\n    var height_array = [0];\n    list.forEach(function (id) {\n      var item = data[id]; // get the item height value\n      // let item_height = Math.floor(item.payload.height);// i just need to floor it once.\n\n      var item_height = item.payload.height; // i think using this raw decimal number is creating an issue\n\n      var last_height = height_array[height_array.length - 1];\n      var h_calc = last_height + item_height; // height calculation\n\n      if (display_console || false) console.warn(\"[narrator] item_height = \".concat(item_height, \" \\n last_height = \").concat(last_height, \" \\n h_calc = \").concat(h_calc));\n      height_array.push(h_calc);\n    });\n    if (display_console || false) console.warn(\"[narrator] height_array = \".concat(height_array));\n    return height_array;\n  }; // height_calc\n\n\n  var get_flip_height = function get_flip_height(dHt) {\n    // i can have a condition on a ref and return that ref if its set to limit this calculations occurance\n    return Array.isArray(dHt) && dHt.length > 0 ? dHt[dHt.length - 1] : 0;\n  }; // get_flip_height\n\n\n  var copy_to_item = function copy_to_item(e, obj) {\n    if (display_console || true) console.warn(\"[SelectOptions] copy_to_clipboard\");\n    var item = obj.item; // if not this project toaster\n\n    if (typeof item != \"undefined\" && item._id && item._id != \"\") {\n      setRefData(item);\n      setViewOptions(true);\n      setViewPreview(true);\n    } // if\n    // comment_ref.current;\n\n\n    var modal = obj.modal_ref.current;\n    modal.close(); // reset_feed_ids();\n  }; // copy_to_item\n  // user dummy data\n\n\n  var user_icons = Array.isArray(users.list) && users.list.length > 0 ? users.list.map(function (user, ndx) {\n    var name = \"narr_profile\";\n    var item_id = item_data._id; // i may not need this but just in case a person can somehow have 2 details of the same item open\n\n    var user_data = users.data[\"\".concat(user)];\n    var preset_data = user_data.preset_data;\n    var user_user_id = user_data.user_id;\n    var user_project_id = obj_exists(user_data, \"project_id\") ? user_data.project_id : user_user_id;\n    var key = \"\".concat(name, \"_\").concat(iUN, \"_\").concat(item_id, \"_\").concat(user_project_id, \"_\").concat(user_user_id); // i don't need the ndx - only one per unique user\n\n    return /*#__PURE__*/React.createElement(_components_ProfileIcon_ProfileIcon__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n      key: key,\n      user_id: user_data.user_id,\n      data: {\n        /*item:data,*/\n        preset_data: preset_data,\n        name: name\n        /*deep_dive:callbackName,*/\n\n        /*init_stage: 3, fallback: \"icon\"*/\n\n      }\n    });\n  }) : null; // let message_display = messages.map((message, ndx) => {\n  //       // const div = document.createElement(\"div\");\n  //       // div.classList.add(\"message\");\n  //       //\n  //       // div.innerHTML = `<p class=\"meta\">${username} <span>${time}</span></p>\n  //       // <p class=\"text\">\n  //       //   ${text}\n  //       // </p>`;\n  //       //\n  //       // document.querySelector(\".chat-messages\").appendChild(div);\n  //   return <Message data={{...message,user_data: users.data[`${message.user_id}`]}} key={`message_${iUN}_${ndx}`}/>;\n  // });\n\n  var message_display;\n\n  if (messages.list.length != 0) {\n    // let Item = props.Item;\n    message_display = React.memo(function (_ref6) {\n      var ndx = _ref6.index;\n      var msg_id = messages.list[ndx]; // messages (needs a list)\n\n      var message = messages.data[msg_id]; // messages (needs objects)\n\n      var list_length = messages.list.length;\n      var project_id = message.project_id || message.user_id; // legacy project/user id finder\n\n      var user_data = users.data[\"\".concat(project_id)]; // user_id\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"views_item_wrapper\",\n        key: \"message_\".concat(iUN, \"_\").concat(ndx),\n        \"data-ndx\": ndx\n      }, /*#__PURE__*/React.createElement(_Message__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n        data: _objectSpread(_objectSpread(_objectSpread({}, message), user_data), {}, {\n          reply: reply\n        })\n      }));\n    }); // memo\n  } else {\n    message_display = null;\n  }\n\n  var vIScroll_data = {\n    visible: true,\n    data: {\n      render: \"none\",\n      internal_tracking: false,\n      home: \"narr_messages_\".concat(iUN),\n      iUN: iUN,\n      scroll_loader: false,\n      // main_loader: true,\n      // callback:fetch_info,\n      list: messages.list,\n      items: messages.data,\n      setList: setMessages,\n      request_src: \"external\",\n      list_display: message_display,\n      flip: true,\n      // stats: true,\n      height_calc: height_calc,\n      position: get_flip_height(messages.height),\n      // this should be safe to run\n      dynamic_height: messages.height,\n      shortfall: 100\n    }\n  }; // vIScroll_data\n\n  var entry_data = {\n    entry_ref: comment_ref,\n    editor_ref: editor_ref,\n    callback: update_comment,\n    getEditorCallback: getEditorState,\n    maxHeight: \"20rem\",\n    hide_scroll: true,\n    placeholder: \"Add a comment...\"\n  };\n  var v_data = users.data[\"\".concat(VIEWER_DATA.project_id)];\n\n  var hidden_data = _objectSpread(_objectSpread({\n    custom: \"msg_preview\",\n    payload: {\n      text: comment.text,\n      height: comment.height\n    }\n  }, v_data), {}, {\n    un_reply: un_reply,\n    un_ref: un_ref,\n    getEditorCallback: getMessageState,\n    reply_data: reply_data,\n    ref_data: ref_data,\n    getReplyState: getReplyState\n  });\n\n  var loader = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader_wrapper hide-scroll\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"segue_item_loader loader reset-low\",\n    onClick: function onClick() {\n      if (display_console || true) console.warn(\"[Arc] loader was clicked\"); // iconWall_callback();\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader_refresh icon-spinner11 d3-ico d3-bloc\"\n  })));\n  var display_els = state.init ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Narrator narr_wrapper\",\n    \"data-comp\": \"Narrator\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Narrator narr_cont\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_header\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_users\"\n  }, user_icons), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_invite narr_btn d3-ico icon-plus\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_video narr_btn d3-ico icon-video\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_options narr_btn d3-ico icon-options\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_content_cont hide-scroll\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_messages narr_messages_\".concat(iUN),\n    ref: narr_messages\n  }, /*#__PURE__*/React.createElement(_components_VirtualScroll_Views__WEBPACK_IMPORTED_MODULE_6__[\"default\"], vIScroll_data))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_footer\"\n  }, view_options ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_comment_ctrls \".concat(view_options ? \"visible\" : \"\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_preview narr_btn footer d3-ico icon-\".concat(view_preview ? \"eye-blocked\" : \"eye\"),\n    onClick: function onClick() {\n      setViewPreview(!view_preview);\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_clear narr_btn footer d3-ico icon-bin\",\n    onClick: function onClick() {\n      reset_text();\n    }\n  })) : null, /*#__PURE__*/React.createElement(_components_Draft_Entry__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    data: entry_data\n  }), comment.count > 0 && ready_send.current || ref_data ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_send narr_btn footer d3-ico icon-send\",\n    onClick: send_comment\n  }) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_options narr_btn footer d3-ico icon-options\",\n    onClick: function onClick() {\n      setViewOptions(!view_options);\n      setViewPreview(false); // make it false every time\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_hidden_area \".concat(view_options && view_preview ? \"preview\" : \"\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"narr_hidden_message_cont\"\n  },\n  /*#__PURE__*/\n\n  /*users.list.length > 0 ?*/\n  React.createElement(_Message__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    data: hidden_data\n  })\n  /*: null*/\n  )))) : loader; // ISSUE: users.list.length won't work for all settings, may need a different trigger\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, display_els);\n}); // Narrator\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Narrator);\n\nvar getLightColor = function getLightColor() {\n  // break into 2 values because i don't want to lighten a dark color\n  // if i lighten a dark color it will be light but not as light because i started dark\n  var test_color = Color.random(); // let try_color = test_color.lighten(25);// failed\n  // let try_color = Color(test_color).lighten(25);// failed\n\n  var try_color = Color(test_color.toHex8()).lighten(22); // worked\n\n  var white = Color(\"white\");\n\n  while (!test_color.isLight() || Color.equals(try_color, white)) {\n    test_color = Color.random();\n    try_color = Color(test_color.toHex8()).lighten(22);\n  } // return `#${try_color.lighten().saturate(20).toHex8()}`;\n\n\n  return \"#\".concat(try_color.toHex8());\n}; // getLightColor\n//data={{callback:update_comment/*toolbar:\"none\"*/}}\n// [How to clear input field in Draft-js](https://stackoverflow.com/questions/37463757/how-to-clear-input-field-in-draft-js)//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL05hcnJhdG9yLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci9OYXJyYXRvci5qcz9iMDdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgZm9yd2FyZFJlZiB9IGZyb20gJ3JlYWN0JztcclxuY29uc3QgQ29sb3IgPSByZXF1aXJlKCd0aW55Y29sb3InKTtcclxuLy8gY29uc3Qgc29ja2V0ID0gaW8oKTtcclxuLy8gaW1wb3J0IFZpcnR1YWxTY3JvbGwgZnJvbSAnLi4vVmlydHVhbFNjcm9sbC9WaXJ0dWFsU2Nyb2xsJztcclxuaW1wb3J0IFZJU2Nyb2xsIGZyb20gJy4vY29tcG9uZW50cy9WaXJ0dWFsU2Nyb2xsL1ZpZXdzJztcclxuaW1wb3J0IFByb2ZpbGVJY29uIGZyb20gJy4vY29tcG9uZW50cy9Qcm9maWxlSWNvbi9Qcm9maWxlSWNvbic7XHJcbmltcG9ydCBNZXNzYWdlIGZyb20gJy4vTWVzc2FnZSc7XHJcbmltcG9ydCBFbnRyeSBmcm9tICcuL2NvbXBvbmVudHMvRHJhZnQvRW50cnknO1xyXG5cclxuLy8gaG93IGNhbiBpIHVzZSB0aGlzIGluIGRldGFpbHMgdmlldyB3aGljaCBpcyBzdGF0ZWxlc3M/XHJcbmNvbnN0IHtleGlzdHMsIG9ial9leGlzdHN9ID0gcmVxdWlyZSgnLi90b29scy9leGlzdHMnKTtcclxuLy8gY29uc3Qge3JlbW92ZVNvbWV0aGluZ30gPSByZXF1aXJlKCcuL3Rvb2xzL3JlbW92ZV9zb21ldGhpbmcnKTtcclxuXHJcbmNvbnN0IHt0b2FzdGVyfSA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9Ub2FzdC90b2FzdGVyJyk7XHJcblxyXG5cclxuXHJcbmNvbnN0IGRpc3BsYXlfY29uc29sZSA9IGZhbHNlO1xyXG5jb25zdCBsb2NhbF9wb3J0ID0gMzAwMTtcclxuXHJcbnJlcXVpcmUoJy4vTmFycmF0b3Iuc2NzcycpO1xyXG5cclxuXHJcbmNvbnN0IE5hcnJhdG9yID0gZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xyXG5cclxuICAvLyBpIG5lZWQgdG8gZmlndXJlIG91dCB0aGUgbWF4IGkgY2FuIGFkZCBiNCBpIG5lZWQgdG8gb3BlbiBhIHNlcGFyYXRlIG1vZGFsXHJcbiAgY29uc3QgZGF0YSA9IHByb3BzLmRhdGE7XHJcbiAgY29uc3QgaXRlbV9kYXRhID0ge19pZDpcIjEyMzQ1XCJ9Oy8vIGRhdGEuaXRlbV9kYXRhO1xyXG4gIGNvbnN0IGlVTl9yZWYgPSB1c2VSZWYocHJvcHMuaVVOIHx8IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwKSk7XHJcbiAgY29uc3QgaVVOID0gaVVOX3JlZi5jdXJyZW50O1xyXG4gIGNvbnN0IGNvbW1lbnRfcmVmID0gdXNlUmVmKCk7XHJcbiAgY29uc3QgZWRpdG9yX3JlZiA9IHVzZVJlZigpO1xyXG4gIGNvbnN0IGRlZmF1bHRfaGVpZ2h0ID0gMzA7XHJcbiAgY29uc3QgZGVmYXVsdF9zdGF0ZSA9IHt0ZXh0OiBcIlwiLCBjb3VudDogMCwgY2xhc3M6IFwiXCIsIGhlaWdodDogZGVmYXVsdF9oZWlnaHR9O1xyXG4gIGNvbnN0IGRlbGF5ID0gZGF0YT8uZGVsYXkgfHwgZmFsc2U7XHJcbiAgbGV0IGluaXQgPSBkZWxheSA/IGZhbHNlIDogdHJ1ZTtcclxuXHJcbiAgLy8gY29uc3QgdGVzdF9wcmVzZXRzID0gW3twcmVzZXRfZGF0YTpWSUVXRVJfREFUQS5wcmVzZXRfZGF0YX0sIHtwcmVzZXRfZGF0YTpWSUVXRVJfREFUQS5wcmVzZXRfZGF0YX0sICB7cHJlc2V0X2RhdGE6VklFV0VSX0RBVEEucHJlc2V0X2RhdGF9LCB7cHJlc2V0X2RhdGE6VklFV0VSX0RBVEEucHJlc2V0X2RhdGF9XTtcclxuXHJcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7aW5pdH0pO1xyXG4gIGNvbnN0IFtjb21tZW50LCBzZXRDb21tZW50XSA9IHVzZVN0YXRlKGRlZmF1bHRfc3RhdGUpO1xyXG4gIGNvbnN0IFt1c2Vycywgc2V0VXNlcnNdID0gdXNlU3RhdGUoe2xpc3Q6W10sZGF0YTp7fX0pO1xyXG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGUoe2xpc3Q6W10sZGF0YTp7fSxoZWlnaHQ6WzBdfSk7XHJcbiAgY29uc3QgW3JlcGx5X2RhdGEsIHNldFJlcGx5RGF0YV0gPSB1c2VTdGF0ZSgpO1xyXG4gIGNvbnN0IFtyZWZfZGF0YSwgc2V0UmVmRGF0YV0gPSB1c2VTdGF0ZSgpO1xyXG4gIGNvbnN0IHJlYWR5X3NlbmQgPSB1c2VSZWYoZmFsc2UpO1xyXG4gIGNvbnN0IFsgcmFuZG9tQ29sb3IsIHNldFJhbmRvbUNvbG9yIF0gPSB1c2VTdGF0ZShnZXRMaWdodENvbG9yKCkpO1xyXG5cclxuICBjb25zdCBuYXJyX21lc3NhZ2VzID0gdXNlUmVmKCk7Ly8gdXNlZCB0byBzY3JvbGwgYmFjayB0byBib3R0b21cclxuICAvLyBjb25zdCByb29tTmFtZSA9IHVzZVJlZigpO1xyXG4gIGNvbnN0IHByb2plY3RfdG9rZW4gPSB1c2VSZWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RfdG9rZW5cIikpO1xyXG4gIGNvbnN0IHJvb20gPSBpdGVtX2RhdGEuX2lkO1xyXG4gIGNvbnN0IHNvY2tldF9yZWYgPSB1c2VSZWYoKTtcclxuICBjb25zdCBlZGl0b3JTdGF0ZUFycmF5ID0gdXNlUmVmKCk7XHJcbiAgY29uc3QgbWVzc2FnZVN0YXRlQXJyYXkgPSB1c2VSZWYoKTtcclxuICBjb25zdCByZXBseVN0YXRlQXJyYXkgPSB1c2VSZWYoKTtcclxuICBjb25zdCByZWZfaXRlbV9zdG9yZSA9IHVzZVJlZihgcmVmX3N0b3JlXyR7aVVOfWApO1xyXG5cclxuICBjb25zdCBbdmlld19vcHRpb25zLCBzZXRWaWV3T3B0aW9uc10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3ZpZXdfcHJldmlldywgc2V0Vmlld1ByZXZpZXddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICB1c2VFZmZlY3QoKHBhcmFtcykgPT4ge1xyXG4gICAgXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAvLyB1bm1vdW50aW5nXHJcbiAgICB9XHJcbiAgfSxbXSk7XHJcblxyXG4gIC8vIGNhbiB0aGlzIHVzZXIgam9pbiB0aGUgY2hhdD9cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMSdcclxuXHJcbiAgICBpZighc3RhdGUuaW5pdCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIHN0YXRlLmluaXQgd29ya3MgYXMgZGVzaWduZWRcclxuICAgIC8vIHRvYXN0ZXIoe25hbWU6XCJzbmFwX3RvYXN0XCIsbWVzc2FnZTpgW05hcnJhdG9yXSBzb2NrZXQgaXMgc3RhcnRpbmdgLCBhdXRvOmZhbHNlfSk7XHJcblxyXG4gICAgc29ja2V0X3JlZi5jdXJyZW50ID0gKGxvY2F0aW9uLmhvc3RuYW1lLmluY2x1ZGVzKFwic3VuemFvLnVzXCIpKSA/IGlvLmNvbm5lY3QoYCR7bG9jYXRpb24ub3JpZ2lufWAse1xyXG4gICAgICBwYXRoOlwiL25hcnJhdG9yXCJcclxuICAgIH0pIDogaW8uY29ubmVjdChgaHR0cDovLzEyNy4wLjAuMToke2xvY2FsX3BvcnR9YCk7XHJcbiAgICAvLyBgJHtsb2NhdGlvbi5vcmlnaW59OjMwMDIvd2VicnRjUGVlcmBcclxuICAgIC8vIFwiaHR0cHM6Ly9zdW56YW8udXMvbmFycmF0b3JcIlxyXG4gICAgY29uc3Qgc29ja2V0ID0gc29ja2V0X3JlZi5jdXJyZW50O1xyXG5cclxuICAgIGlmIChkaXNwbGF5X2NvbnNvbGUgfHwgdHJ1ZSkgY29uc29sZS53YXJuKGBbTmFycmF0b3JdIHByb2plY3RfdG9rZW5gLCBwcm9qZWN0X3Rva2VuLmN1cnJlbnQpO1xyXG5cclxuICAgIC8vIGpvaW4gdXNlcyB0aGUgcHJvamVjdF9pZCBpZiBhdmFpbGFibGUgcmlnaHQgbm93LiBpZGsgaWYgaSB3YW50IHRvIGxpbWl0IGl0IHRvIHVzZXJfaWQgeWV0XHJcbiAgICBzb2NrZXQuZW1pdChcImpvaW5Sb29tXCIsIHtyb29tLCB0b2tlbjogcHJvamVjdF90b2tlbi5jdXJyZW50LCBjb2xvcjogcmFuZG9tQ29sb3J9KTtcclxuXHJcbiAgICAvLyBnZXQgcm9vbSB1c2Vyc1xyXG4gICAgc29ja2V0Lm9uKFwicm9vbVVzZXJzXCIsICh7cm9vbSwgdXNlcnN9KSA9PiB7XHJcbiAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCB0cnVlKSBjb25zb2xlLmxvZyhgW25hcnJhdG9yXSB1c2Vyc2AsIHVzZXJzKTtcclxuICAgICAgbGV0IGxpc3QgPSBbXTtcclxuICAgICAgbGV0IGRhdGEgPSB7fTtcclxuICAgICAgdXNlcnMuZm9yRWFjaCgodXNlcikgPT4ge1xyXG4gICAgICAgIC8vIGxldCB1c2VyX2lkID0gdXNlci51c2VyX2lkO1xyXG4gICAgICAgIGxldCBwcm9qZWN0X2lkID0gdXNlci5wcm9qZWN0X2lkO1xyXG4gICAgICAgIGxpc3QucHVzaChwcm9qZWN0X2lkKTsvLyB1c2VyX2lkXHJcbiAgICAgICAgZGF0YVtgJHtwcm9qZWN0X2lkfWBdID0gdXNlcjsvLyB1c2VyX2lkXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgc2V0VXNlcnMoe2xpc3QsIGRhdGF9KTtcclxuICAgICAgLy8gb3V0cHV0Um9vbU5hbWUocm9vbSk7XHJcbiAgICAgIC8vIG91dHB1dFVzZXJzKHVzZXJzKVxyXG4gICAgfSk7XHJcblxyXG4gICAgc29ja2V0Lm9uKFwiaW5mb1wiLCBtZXNzYWdlID0+IHtcclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IHRydWUpIGNvbnNvbGUubG9nKFwiW25hcnJhdG9yXSBpbmZvIFwiLCBtZXNzYWdlKTtcclxuICAgIH0pOy8vIGluZm9cclxuXHJcbiAgICAvLyBtZXNzYWdlIGZyb20gc2VydmVyXHJcbiAgICBzb2NrZXQub24oXCJtZXNzYWdlXCIsIG1lc3NhZ2UgPT4ge1xyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgdHJ1ZSkgY29uc29sZS5sb2coXCJbbmFycmF0b3JdIG1lc3NhZ2UgXCIsIG1lc3NhZ2UpO1xyXG4gICAgICBjb25zdCBtc2dfY29udCA9IG5hcnJfbWVzc2FnZXMuY3VycmVudFxyXG4gICAgICAvLyBvdXRwdXQgdGhlIG1lc3NhZ2UgdG8gdGhlIERPTVxyXG4gICAgICBvdXRwdXRNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAvLyBhZGQgdGhlIG1lc3NhZ2UgdG8gdGhlIGZyb250IG9mIHRoZSBhcnJheVxyXG5cclxuICAgICAgLy8gc2Nyb2xsIGRvd25cclxuICAgICAgbXNnX2NvbnQuc2Nyb2xsVG9wID0gbXNnX2NvbnQuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc29ja2V0Lm9uKFwiYmxvY2tlZFwiLCBtZXNzYWdlID0+IHtcclxuICAgICAgLy8gcHJpbnQgYmxvY2tlZCBtZXNzYWdlP1xyXG4gICAgICBzb2NrZXQuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgLy8gcmV0dXJuICgpID0+IHtcclxuICAgIC8vICAgbGVhdmVSb29tKCk7XHJcbiAgICAvLyB9XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBzb2NrZXQuY2xvc2UoKTtcclxuICAgIH1cclxuICB9LFtzdGF0ZS5pbml0XSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyB1cGRhdGUgdGhlIHJlcGx5IGVkaXRvciBhZnRlciB0aGUgcmVwbHlfZGF0YSBzdGF0ZSBpcyB1cGRhdGVkIGFuZCByZS1yZW5kZXJlZFxyXG4gICAgaWYocmVwbHlTdGF0ZUFycmF5LmN1cnJlbnQgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgIGlmKHJlcGx5X2RhdGEpe1xyXG4gICAgICAgIHVwZGF0ZV9lZGl0b3Ioe2VkaXRvcjpyZXBseVN0YXRlQXJyYXksIGJsb2NrczpyZXBseV9kYXRhLnBheWxvYWQudGV4dH0pO1xyXG4gICAgICB9LyplbHNle1xyXG4gICAgICAgIC8vIG9mIGl0cyB1bmRlZmluZWQgaXQgd29uJ3QgbmVlZCB0byByZXNldCB0aGUgZWRpdG9yLiB0aGUgZWRpdG9yIHdvbid0IGV4aXN0XHJcbiAgICAgICAgcmVzZXRfZWRpdG9yKHJlcGx5U3RhdGVBcnJheSk7XHJcbiAgICAgIH0vLyBlbHNlKi9cclxuICAgIH0vLyBpZiByZXJlcGx5U3RhdGVBcnJheVxyXG4gIH0sW3JlcGx5X2RhdGFdKTtcclxuXHJcbiAgY29uc3QgaW5pdGlhbGl6ZSA9ICgpID0+IHtcclxuICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCB0cnVlKSBjb25zb2xlLndhcm4oXCJbTmFycmF0b3JdIGluaXRpYWxpemluZ1wiKTtcclxuICAgIGlmKHN0YXRlLmluaXQpIHJldHVybjtcclxuICAgIHNldFN0YXRlKHtpbml0OnRydWV9KTtcclxuICB9Ly8gaW5pdGlhbGl6ZVxyXG5cclxuICBpZihyZWYpe1xyXG4gICAgcmVmLnN0YXRlID0gc3RhdGU7Ly8gd29ya3NcclxuICAgIHJlZi5pbml0aWFsaXplID0gaW5pdGlhbGl6ZTsvLyB3b3Jrc1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZ2V0RWRpdG9yU3RhdGUgPSAoc3RhdGVBcnJheXMpID0+IHtcclxuICAgIGVkaXRvclN0YXRlQXJyYXkuY3VycmVudCA9IHN0YXRlQXJyYXlzO1xyXG4gIH0vLyBnZXRFZGl0b3JTdGF0ZVxyXG5cclxuICBjb25zdCBnZXRNZXNzYWdlU3RhdGUgPSAoc3RhdGVBcnJheXMpID0+IHtcclxuICAgIG1lc3NhZ2VTdGF0ZUFycmF5LmN1cnJlbnQgPSBzdGF0ZUFycmF5cztcclxuICB9Ly8gZ2V0TWVzc2FnZVN0YXRlXHJcblxyXG4gIGNvbnN0IGdldFJlcGx5U3RhdGUgPSAoc3RhdGVBcnJheXMpID0+IHtcclxuICAgIHJlcGx5U3RhdGVBcnJheS5jdXJyZW50ID0gc3RhdGVBcnJheXM7XHJcbiAgfS8vIGdldFJlcGx5U3RhdGVcclxuXHJcbiAgLy8gb3V0cHV0IG1lc3NhZ2UgdG8gRE9NXHJcbiAgY29uc3Qgb3V0cHV0TWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XHJcbiAgICAvLyB1c2Vycy8vIHRoaXMgdmVyc2lvbiBvZiB1c2VycyBpc24ndCBhbiB1cGRhdGUgdmVyaXNvbiAtIGl0cyB0aGUgbmVhcmx5IGVtcHR5IHZlcnNpb24gc2V0IGF0IHRoZSBpbml0XHJcbiAgICBzZXRNZXNzYWdlcygocHJldikgPT4ge1xyXG4gICAgICAvLyByZXR1cm4gW21lc3NhZ2UsIC4uLnByZXZdO1xyXG4gICAgICBsZXQgbXNnX2lkID0gIG1lc3NhZ2UuX2lkOy8vIG1zZ19pZCAtIHRoaXMgbWF5IG5vdCBldmVuIG1hdHRlclxyXG4gICAgICAvLyBhZGQgcHJlc2V0X2RhdGEgdG8gdGhlIG1lc3NhZ2VcclxuICAgICAgLy8gbGV0IGZvdW5kX3VzZXIgPSB1c2Vyc1ttZXNzYWdlLnByb2plY3RfaWRdXHJcbiAgICAgIC8vIGxldCBwcmVzZXRfZGF0YSA9IGZvdW5kX3VzZXIucHJlc2V0X2RhdGEgfHwge307XHJcbiAgICAgIC8vIG1lc3NhZ2UucHJlc2V0X2RhdGEgPSBwcmVzZXRfZGF0YTtcclxuXHJcbiAgICAgIGxldCBtZXNzYWdlX3N0YXRlID0ge307XHJcbiAgICAgIG1lc3NhZ2Vfc3RhdGUubGlzdCA9IFsuLi5wcmV2Lmxpc3QsIG1zZ19pZF07XHJcbiAgICAgIG1lc3NhZ2Vfc3RhdGUuZGF0YSA9IHsuLi5wcmV2LmRhdGF9O1xyXG4gICAgICBtZXNzYWdlX3N0YXRlLmRhdGFbYCR7bXNnX2lkfWBdID0gbWVzc2FnZTtcclxuICAgICAgbGV0IGxhc3RfaGVpZ2h0X3ZhbHVlID0gcHJldi5oZWlnaHRbcHJldi5oZWlnaHQubGVuZ3RoIC0gMV07XHJcbiAgICAgIG1lc3NhZ2Vfc3RhdGUuaGVpZ2h0ID0gWy4uLnByZXYuaGVpZ2h0LCBsYXN0X2hlaWdodF92YWx1ZSArIG1lc3NhZ2UucGF5bG9hZC5oZWlnaHRdO1xyXG5cclxuICAgICAgcmV0dXJuIG1lc3NhZ2Vfc3RhdGU7XHJcbiAgICB9KTtcclxuICB9Ly8gb3V0cHV0TWVzc2FnZVxyXG5cclxuXHJcbiAgLy8gLy8gYWRkIHJvb20gbmFtZSB0byBET01cclxuICAvLyBmdW5jdGlvbiBvdXRwdXRSb29tTmFtZShyb29tKXtcclxuICAvLyAgIHJvb21OYW1lLmlubmVyVGV4dCA9IHJvb207XHJcbiAgLy8gfS8vIG91dHB1dFJvb21OYW1lXHJcbiAgLy9cclxuICAvLyAvLyBvdXRwdXQgdXNlcnMgdG8gRE9NXHJcbiAgLy8gZnVuY3Rpb24gb3V0cHV0VXNlcnModXNlcnMpe1xyXG4gIC8vICAgdXNlckxpc3QuaW5uZXJIVE1MID0gYFxyXG4gIC8vICAgICAke3VzZXJzLm1hcCh1c2VyID0+IGA8bGk+JHt1c2VyLnVzZXJuYW1lfTwvbGk+YCkuam9pbihcIlwiKX1cclxuICAvLyAgICAgYDtcclxuICAvLyB9Ly8gb3V0cHV0VXNlcnNcclxuXHJcbiAgY29uc3QgdXBkYXRlX2NvbW1lbnQgPSAoZVR4dCkgPT4ge1xyXG4gICAgbGV0IHRhcmdldF9lbCA9IGNvbW1lbnRfcmVmLmN1cnJlbnQ7XHJcbiAgICBsZXQgaGVpZ2h0ID0gZGVmYXVsdF9oZWlnaHQ7Ly8gZGVmYXVsdCBoZWlnaHRcclxuICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKGBbTmFycmF0b3JdIHRhcmdldF9lbGAsdGFyZ2V0X2VsKTtcclxuICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKGBbTmFycmF0b3JdIHNjcm9sbEhlaWdodGAsdGFyZ2V0X2VsLnNjcm9sbEhlaWdodCk7XHJcbiAgICAvLyBbQ3JlYXRpbmcgYSB0ZXh0YXJlYSB3aXRoIGF1dG8tcmVzaXplXShodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NTQyMDIvY3JlYXRpbmctYS10ZXh0YXJlYS13aXRoLWF1dG8tcmVzaXplKVxyXG5cclxuICAgIC8vIHRyaW0gYmVmb3JlIHNhdmluZyAodHJpbSBqdXN0IHJlbW92ZXMgbGVhZGluZyBhbmQgdHJhaWxpbmcgc3BhY2VzKVxyXG4gICAgLy8gbGV0IHByZXBhcmVkX3ZhbHVlID0gcmVtb3ZlU29tZXRoaW5nKHRhcmdldF9lbC52YWx1ZSwgXCIgICBcIixcIiAgXCIpOy8vIHJlc3RyaWN0cyBtdWx0aXBsZSBzcGFjZXMgKGFsbG93cyAyKVxyXG4gICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtOYXJyYXRvcl0gZW50cnkgdGV4dGAsZVR4dCk7XHJcbiAgICBsZXQgcHJlcGFyZWRfdmFsdWUgPSBlVHh0O1xyXG4gICAgLy8gcmVtb3ZlIGVtcHR5IHNwYWNlXHJcblxyXG4gICAgLy8gcmVzZXQgaGVpZ2h0IGlmIGVtcHR5IC0gZG8gaSBuZWVkIHRvL2NhbiBpIHJlbW92ZSBlbnRlcnM/XHJcbiAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW05hcnJhdG9yXSB0YXJnZXQgaGVpZ2h0YCx0YXJnZXRfZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KTtcclxuICAgIC8vIHRhcmdldF9lbC5zdHlsZS5oZWlnaHQgPSAodGFyZ2V0X2VsLnNjcm9sbEhlaWdodCA+IGhlaWdodCkgPyB0YXJnZXRfZWwuc2Nyb2xsSGVpZ2h0KydweCcgOiBgJHtoZWlnaHR9cHhgO1xyXG4gICAgLy8gdGFyZ2V0X2VsLnN0eWxlLmhlaWdodCA9ICh0YXJnZXRfZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ID4gaGVpZ2h0KSA/IHRhcmdldF9lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQrJ3B4JyA6IGAke2hlaWdodH1weGA7XHJcblxyXG4gICAgLy8gLy8gY29udHJvbGxpbmcgdGV4dCBsaW1pdFxyXG4gICAgLy8gbGV0IGNvdW50ZXJfY2xhc3MgPSAocHJlcGFyZWRfdmFsdWUubGVuZ3RoID49IGNhcHRpb25fbGltaXQpID8gXCJmdWxsXCI6IChwcmVwYXJlZF92YWx1ZS5sZW5ndGggPiAoY2FwdGlvbl9saW1pdCAtIHJlbWFpbmluZ193YXJuaW5nKSAmJiBwcmVwYXJlZF92YWx1ZS5sZW5ndGggPCBjYXB0aW9uX2xpbWl0KSA/IFwid2FyblwiIDogXCJcIjtcclxuICAgIGxldCBjb3VudGVyX2NsYXNzID0gXCJcIjtcclxuICAgIC8vIC8vIGp1c3Qga2VlcCBpdCBzbGljZWQgYW55d2F5XHJcbiAgICAvLyBwcmVwYXJlZF92YWx1ZSA9IHByZXBhcmVkX3ZhbHVlLnNsaWNlKDAsY2FwdGlvbl9saW1pdCk7XHJcbiAgICBjb25zdCBbZWRpdG9yU3RhdGUsIGRyYWZ0RWRpdG9yLCBzZXREcmFmdEVkaXRvcl0gPSBlZGl0b3JTdGF0ZUFycmF5LmN1cnJlbnQ7XHJcbiAgICBjb25zdCBjb25zdGVudFN0YXRlID0gZHJhZnRFZGl0b3IuZ2V0Q3VycmVudENvbnRlbnQoKVxyXG4gICAgbGV0IGhhc190ZXh0ID0gY29uc3RlbnRTdGF0ZS5oYXNUZXh0KCk7XHJcblxyXG4gICAgbGV0IHJhd19kYXRhID0gSlNPTi5wYXJzZShwcmVwYXJlZF92YWx1ZSk7XHJcblxyXG4gICAgbGV0IGhhc19jb250ZW50ID0gcmF3X2RhdGEuYmxvY2tzLnNvbWUoKGJsb2NrKSA9PiB7XHJcbiAgICAgIHJldHVybiBibG9jay50ZXh0ICE9IFwiXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZWFkeV9zZW5kLmN1cnJlbnQgPSBoYXNfY29udGVudCB8fCByZWZfZGF0YSA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICB1cGRhdGVfZWRpdG9yKHtlZGl0b3I6IG1lc3NhZ2VTdGF0ZUFycmF5LGJsb2NrczpwcmVwYXJlZF92YWx1ZX0pO1xyXG5cclxuICAgIHNldENvbW1lbnQoKHByZXYpID0+IHtcclxuICAgICAgLy8gaSBzaG91bGQgZmxvb3IgdGhlIGhlaWdodFxyXG4gICAgICByZXR1cm4gey4uLnByZXYsdGV4dDogcHJlcGFyZWRfdmFsdWUsIGNvdW50OiBwcmVwYXJlZF92YWx1ZS5sZW5ndGgsIGNsYXNzOiBjb3VudGVyX2NsYXNzLCBoZWlnaHQ6IE1hdGguZmxvb3IodGFyZ2V0X2VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCl9XHJcbiAgICB9KTtcclxuICB9Ly8gdXBkYXRlX2NvbW1lbnRcclxuXHJcbiAgY29uc3Qgc2VuZF9jb21tZW50ID0gKCkgPT4ge1xyXG4gICAgbGV0IHNvY2tldCA9IHNvY2tldF9yZWYuY3VycmVudDtcclxuICAgIGxldCBwcmVwX3RleHQgPSBjb21tZW50LnRleHRcclxuICAgIC8vIHByZXBfdGV4dCA9IGA8c3Bhbj4ke3ByZXBfdGV4dC5yZXBsYWNlKC9cXHJcXG58XFxyfFxcbi9nLFwiPGJyIC8+XCIpfTwvc3Bhbj5gOy8vIHJlcGxhY2VzIHRleHRhcmVhIG5ld2xpbmUgd2l0aCBiciB0YWdzIC0gZGVwcmVjYXRlZFxyXG4gICAgbGV0IGhlaWdodF9lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5uYXJyX2hpZGRlbl9tZXNzYWdlX2NvbnRgKTtcclxuICAgIC8vIGkgc2hvdWxkIGZsb29yIHRoZSBoZWlnaHQgZnJvbSB0aGUgc3RhcnRcclxuICAgIGxldCBmaW5hbF9oZWlnaHQgPSBNYXRoLmZsb29yKGhlaWdodF9lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQpO1xyXG5cclxuICAgIGxldCBtc2cgPSB7XHJcbiAgICAgIHJvb20sXHJcbiAgICAgIHBheWxvYWQ6e1xyXG4gICAgICAgIHRleHQ6IHByZXBfdGV4dCxcclxuICAgICAgICBoZWlnaHQ6IGZpbmFsX2hlaWdodFxyXG4gICAgICB9LFxyXG4gICAgICB0b2tlbjogcHJvamVjdF90b2tlbi5jdXJyZW50LFxyXG4gICAgICBpdGVtX2lkOiBpdGVtX2RhdGEuX2lkXHJcbiAgICB9O1xyXG5cclxuICAgIGlmKHJlcGx5X2RhdGEpe1xyXG4gICAgICBtc2cucmVwbHlfaWQgPSByZXBseV9kYXRhLl9pZDtcclxuICAgIH0vLyBpZlxyXG5cclxuICAgIGlmIChyZWZfZGF0YSkge1xyXG4gICAgICBtc2cucmVmX2lkID0gcmVmX2RhdGEuX2lkO1xyXG4gICAgfS8vIGlmXHJcblxyXG4gICAgc29ja2V0LmVtaXQoXCJjaGF0TWVzc2FnZVwiLCBtc2cpO1xyXG4gICAgcmVzZXRfdGV4dCgpO1xyXG4gIH0vLyBzZW5kX2NvbW1lbnRcclxuXHJcbiAgY29uc3QgdXBkYXRlX2VkaXRvciA9ICh7ZWRpdG9yLCBibG9ja3N9KSA9PiB7XHJcblxyXG4gICAgICBpZihlZGl0b3IuY3VycmVudCA9PSB1bmRlZmluZWQpIHJldHVybjsvLyBkbyBub3RoaW5nXHJcblxyXG4gICAgICBjb25zdCBbZWRpdG9yU3RhdGUsIGRyYWZ0RWRpdG9yLCBzZXREcmFmdEVkaXRvciwgY29udmVydEZyb21SYXddID0gZWRpdG9yLmN1cnJlbnQ7XHJcblxyXG4gICAgICBjb25zdCBuZXdDb250ZW50U3RhdGUgPSBjb252ZXJ0RnJvbVJhdyhKU09OLnBhcnNlKGJsb2NrcykpOy8vIEdPVENIQTogbmVlZGVkIHRvIGJlIHBhcnNlZFxyXG4gICAgICBzZXREcmFmdEVkaXRvcihlZGl0b3JTdGF0ZS5jcmVhdGVXaXRoQ29udGVudChuZXdDb250ZW50U3RhdGUpKTtcclxuXHJcbiAgICAgIC8vIGNvbnN0IENvbnRlbnRTdGF0ZSA9IGNvbnZlcnRGcm9tUmF3KEpTT04ucGFyc2UodHh0X29iaikpXHJcblxyXG4gICAgICAvLyBzZXREcmFmdEVkaXRvcihlZGl0b3JTdGF0ZS5wdXNoKGVkaXRvclN0YXRlLCBDb250ZW50U3RhdGUpKTtcclxuICB9Ly8gdXBkYXRlX2VkaXRvclxyXG5cclxuICBjb25zdCByZXNldF9lZGl0b3IgPSAoZWRpdG9yKSA9PiB7XHJcblxyXG4gICAgaWYoZWRpdG9yLmN1cnJlbnQgPT0gdW5kZWZpbmVkKSByZXR1cm47Ly8gZG8gbm90aGluZ1xyXG5cclxuICAgIGNvbnN0IFtlZGl0b3JTdGF0ZSwgZHJhZnRFZGl0b3IsIHNldERyYWZ0RWRpdG9yLCBjb252ZXJ0RnJvbVJhd10gPSBlZGl0b3IuY3VycmVudDtcclxuXHJcbiAgICBzZXREcmFmdEVkaXRvcihlZGl0b3JTdGF0ZS5jcmVhdGVFbXB0eSgpKTtcclxuICB9XHJcblxyXG4gIC8vIGNsZWFyIGVkaXRvcnNcclxuICBjb25zdCByZXNldF90ZXh0ID0gKCkgPT4ge1xyXG4gICAgLy8gbGV0IHRhcmdldF9lbCA9IGNvbW1lbnRfcmVmLmN1cnJlbnQ7XHJcbiAgICAvLyB0YXJnZXRfZWwudmFsdWUgPSBcIlwiO1xyXG4gICAgLy8gdGFyZ2V0X2VsLnN0eWxlLmhlaWdodCA9IGAke2RlZmF1bHRfaGVpZ2h0fXB4YDtcclxuICAgIC8vIGNvbnN0IFtlZGl0b3JTdGF0ZSwgZHJhZnRFZGl0b3IsIHNldERyYWZ0RWRpdG9yXSA9IGVkaXRvclN0YXRlQXJyYXkuY3VycmVudDtcclxuXHJcbiAgICAvLyBzZXREcmFmdEVkaXRvcihlZGl0b3JTdGF0ZS5jcmVhdGVFbXB0eSgpKTtcclxuICAgIHJlc2V0X2VkaXRvcihlZGl0b3JTdGF0ZUFycmF5KTtcclxuICAgIHJlc2V0X2VkaXRvcihtZXNzYWdlU3RhdGVBcnJheSk7XHJcbiAgICAvLyByZXNldF9lZGl0b3IocmVwbHlTdGF0ZUFycmF5KTsvLyBub3BlIHRoaXMgZG9lc24ndCBoZWxwIGVyYXNlIHRoZSBzYW1wbGVcclxuXHJcbiAgICBzZXRDb21tZW50KGRlZmF1bHRfc3RhdGUpO1xyXG4gICAgc2V0UmVwbHlEYXRhKCk7XHJcbiAgICBzZXRSZWZEYXRhKCk7XHJcblxyXG4gICAgc2V0Vmlld09wdGlvbnMoZmFsc2UpO1xyXG4gICAgc2V0Vmlld1ByZXZpZXcoZmFsc2UpO1xyXG4gICAgLy8gZHJhZnRFZGl0b3IuZm9jdXMoKTsvLyBmYWlsZWQgLSBidXQgZXh0cmFuZW91c1xyXG4gIH0vLyByZXNldF90ZXh0XHJcblxyXG4gIGNvbnN0IGZldGNoX2luZm8gPSBhc3luYyAoe29iaiA9IHt9fSA9IHt9KSA9PiB7XHJcbiAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW05hcnJhdG9yXSBmZXRjaF9pbmZvIGNhbGxiYWNrIHRyaWdnZXJlZC4uLmApO1xyXG4gIH0vLyBmZXRjaF9pbmZvXHJcblxyXG4gIGNvbnN0IHJlcGx5ID0gKGRhdGEpID0+IHtcclxuICAgIC8vIHN0YXRlIG9yIHJlZj9cclxuICAgIHNldFJlcGx5RGF0YShkYXRhKTtcclxuICAgIC8vIGRpc3BsYXkgdGhlIHByZXZpZXdcclxuICAgIHNldFZpZXdPcHRpb25zKHRydWUpO1xyXG4gICAgc2V0Vmlld1ByZXZpZXcodHJ1ZSk7XHJcbiAgfS8vIHJlcGx5XHJcblxyXG4gIGNvbnN0IHVuX3JlcGx5ID0gKCkgPT4ge1xyXG4gICAgc2V0UmVwbHlEYXRhKCk7XHJcbiAgfS8vIHVuX3JlcGx5XHJcblxyXG4gIGNvbnN0IHVuX3JlZiA9ICgpID0+IHtcclxuICAgIHNldFJlZkRhdGEoKTtcclxuICB9Ly8gdW5fcmVmXHJcblxyXG4gIGNvbnN0IGhlaWdodF9jYWxjID0gKHtsaXN0LGRhdGF9KSA9PiB7XHJcbiAgICBsZXQgaGVpZ2h0X2FycmF5ID0gWzBdO1xyXG4gICAgbGlzdC5mb3JFYWNoKChpZCkgPT4ge1xyXG4gICAgICBsZXQgaXRlbSA9IGRhdGFbaWRdO1xyXG4gICAgICAvLyBnZXQgdGhlIGl0ZW0gaGVpZ2h0IHZhbHVlXHJcbiAgICAgIC8vIGxldCBpdGVtX2hlaWdodCA9IE1hdGguZmxvb3IoaXRlbS5wYXlsb2FkLmhlaWdodCk7Ly8gaSBqdXN0IG5lZWQgdG8gZmxvb3IgaXQgb25jZS5cclxuICAgICAgbGV0IGl0ZW1faGVpZ2h0ID0gaXRlbS5wYXlsb2FkLmhlaWdodDsvLyBpIHRoaW5rIHVzaW5nIHRoaXMgcmF3IGRlY2ltYWwgbnVtYmVyIGlzIGNyZWF0aW5nIGFuIGlzc3VlXHJcbiAgICAgIGxldCBsYXN0X2hlaWdodCA9IGhlaWdodF9hcnJheVtoZWlnaHRfYXJyYXkubGVuZ3RoIC0gMV07XHJcbiAgICAgIGxldCBoX2NhbGMgPSBsYXN0X2hlaWdodCArIGl0ZW1faGVpZ2h0Oy8vIGhlaWdodCBjYWxjdWxhdGlvblxyXG5cclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtuYXJyYXRvcl0gaXRlbV9oZWlnaHQgPSAke2l0ZW1faGVpZ2h0fSBcXG4gbGFzdF9oZWlnaHQgPSAke2xhc3RfaGVpZ2h0fSBcXG4gaF9jYWxjID0gJHtoX2NhbGN9YCk7XHJcblxyXG4gICAgICBoZWlnaHRfYXJyYXkucHVzaChoX2NhbGMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtuYXJyYXRvcl0gaGVpZ2h0X2FycmF5ID0gJHtoZWlnaHRfYXJyYXl9YCk7XHJcbiAgICByZXR1cm4gaGVpZ2h0X2FycmF5O1xyXG4gIH0vLyBoZWlnaHRfY2FsY1xyXG5cclxuICBjb25zdCBnZXRfZmxpcF9oZWlnaHQgPSAoZEh0KSA9PiB7XHJcbiAgICAvLyBpIGNhbiBoYXZlIGEgY29uZGl0aW9uIG9uIGEgcmVmIGFuZCByZXR1cm4gdGhhdCByZWYgaWYgaXRzIHNldCB0byBsaW1pdCB0aGlzIGNhbGN1bGF0aW9ucyBvY2N1cmFuY2VcclxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGRIdCkgJiYgZEh0Lmxlbmd0aCA+IDAgPyBkSHRbZEh0Lmxlbmd0aCAtIDFdIDogMDtcclxuICB9Ly8gZ2V0X2ZsaXBfaGVpZ2h0XHJcblxyXG4gIGNvbnN0IGNvcHlfdG9faXRlbSA9IChlLCBvYmopID0+IHtcclxuICAgIGlmIChkaXNwbGF5X2NvbnNvbGUgfHwgdHJ1ZSkgY29uc29sZS53YXJuKGBbU2VsZWN0T3B0aW9uc10gY29weV90b19jbGlwYm9hcmRgKTtcclxuXHJcbiAgICBsZXQgaXRlbSA9IG9iai5pdGVtO1xyXG5cclxuICAgIC8vIGlmIG5vdCB0aGlzIHByb2plY3QgdG9hc3RlclxyXG5cclxuICAgIGlmICh0eXBlb2YgaXRlbSAhPSBcInVuZGVmaW5lZFwiICYmIGl0ZW0uX2lkICYmIGl0ZW0uX2lkICE9IFwiXCIpIHtcclxuICAgICAgc2V0UmVmRGF0YShpdGVtKTtcclxuICAgICAgc2V0Vmlld09wdGlvbnModHJ1ZSk7XHJcbiAgICAgIHNldFZpZXdQcmV2aWV3KHRydWUpO1xyXG4gICAgfS8vIGlmXHJcblxyXG4gICAgLy8gY29tbWVudF9yZWYuY3VycmVudDtcclxuXHJcbiAgICBsZXQgbW9kYWwgPSBvYmoubW9kYWxfcmVmLmN1cnJlbnQ7XHJcblxyXG4gICAgbW9kYWwuY2xvc2UoKTtcclxuICAgIC8vIHJlc2V0X2ZlZWRfaWRzKCk7XHJcbiAgfS8vIGNvcHlfdG9faXRlbVxyXG5cclxuICAvLyB1c2VyIGR1bW15IGRhdGFcclxuXHJcbiAgbGV0IHVzZXJfaWNvbnMgPSBBcnJheS5pc0FycmF5KHVzZXJzLmxpc3QpICYmIHVzZXJzLmxpc3QubGVuZ3RoID4gMCA/IHVzZXJzLmxpc3QubWFwKCh1c2VyLCBuZHgpID0+IHtcclxuICAgIGxldCBuYW1lID0gXCJuYXJyX3Byb2ZpbGVcIjtcclxuICAgIGxldCBpdGVtX2lkID0gaXRlbV9kYXRhLl9pZDsvLyBpIG1heSBub3QgbmVlZCB0aGlzIGJ1dCBqdXN0IGluIGNhc2UgYSBwZXJzb24gY2FuIHNvbWVob3cgaGF2ZSAyIGRldGFpbHMgb2YgdGhlIHNhbWUgaXRlbSBvcGVuXHJcbiAgICBsZXQgdXNlcl9kYXRhID0gdXNlcnMuZGF0YVtgJHt1c2VyfWBdO1xyXG4gICAgbGV0IHByZXNldF9kYXRhID0gdXNlcl9kYXRhLnByZXNldF9kYXRhO1xyXG4gICAgbGV0IHVzZXJfdXNlcl9pZCA9IHVzZXJfZGF0YS51c2VyX2lkXHJcbiAgICBsZXQgdXNlcl9wcm9qZWN0X2lkID0gb2JqX2V4aXN0cyh1c2VyX2RhdGEsXCJwcm9qZWN0X2lkXCIpID8gdXNlcl9kYXRhLnByb2plY3RfaWQgOiB1c2VyX3VzZXJfaWQ7XHJcblxyXG4gICAgbGV0IGtleSA9IGAke25hbWV9XyR7aVVOfV8ke2l0ZW1faWR9XyR7dXNlcl9wcm9qZWN0X2lkfV8ke3VzZXJfdXNlcl9pZH1gOy8vIGkgZG9uJ3QgbmVlZCB0aGUgbmR4IC0gb25seSBvbmUgcGVyIHVuaXF1ZSB1c2VyXHJcblxyXG4gICAgcmV0dXJuIDxQcm9maWxlSWNvbiBrZXk9e2tleX0gdXNlcl9pZD17dXNlcl9kYXRhLnVzZXJfaWR9IGRhdGE9e3sgLyppdGVtOmRhdGEsKi9wcmVzZXRfZGF0YSwgbmFtZSwgLypkZWVwX2RpdmU6Y2FsbGJhY2tOYW1lLCovIC8qaW5pdF9zdGFnZTogMywgZmFsbGJhY2s6IFwiaWNvblwiKi99fS8+XHJcbiAgfSlcclxuICA6IG51bGw7XHJcblxyXG4gIC8vIGxldCBtZXNzYWdlX2Rpc3BsYXkgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UsIG5keCkgPT4ge1xyXG4gIC8vICAgICAgIC8vIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgLy8gICAgICAgLy8gZGl2LmNsYXNzTGlzdC5hZGQoXCJtZXNzYWdlXCIpO1xyXG4gIC8vICAgICAgIC8vXHJcbiAgLy8gICAgICAgLy8gZGl2LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cIm1ldGFcIj4ke3VzZXJuYW1lfSA8c3Bhbj4ke3RpbWV9PC9zcGFuPjwvcD5cclxuICAvLyAgICAgICAvLyA8cCBjbGFzcz1cInRleHRcIj5cclxuICAvLyAgICAgICAvLyAgICR7dGV4dH1cclxuICAvLyAgICAgICAvLyA8L3A+YDtcclxuICAvLyAgICAgICAvL1xyXG4gIC8vICAgICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhdC1tZXNzYWdlc1wiKS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gIC8vICAgcmV0dXJuIDxNZXNzYWdlIGRhdGE9e3suLi5tZXNzYWdlLHVzZXJfZGF0YTogdXNlcnMuZGF0YVtgJHttZXNzYWdlLnVzZXJfaWR9YF19fSBrZXk9e2BtZXNzYWdlXyR7aVVOfV8ke25keH1gfS8+O1xyXG4gIC8vIH0pO1xyXG5cclxuICBsZXQgbWVzc2FnZV9kaXNwbGF5O1xyXG5cclxuICBpZihtZXNzYWdlcy5saXN0Lmxlbmd0aCAhPSAwKXtcclxuXHJcbiAgICAvLyBsZXQgSXRlbSA9IHByb3BzLkl0ZW07XHJcblxyXG4gICAgbWVzc2FnZV9kaXNwbGF5ID0gUmVhY3QubWVtbyggKHtpbmRleCA6IG5keH0pID0+IHtcclxuXHJcbiAgICAgIGxldCBtc2dfaWQgPSBtZXNzYWdlcy5saXN0W25keF07Ly8gbWVzc2FnZXMgKG5lZWRzIGEgbGlzdClcclxuICAgICAgbGV0IG1lc3NhZ2UgPSBtZXNzYWdlcy5kYXRhW21zZ19pZF07Ly8gbWVzc2FnZXMgKG5lZWRzIG9iamVjdHMpXHJcbiAgICAgIGxldCBsaXN0X2xlbmd0aCA9IG1lc3NhZ2VzLmxpc3QubGVuZ3RoO1xyXG4gICAgICBsZXQgcHJvamVjdF9pZCA9IG1lc3NhZ2UucHJvamVjdF9pZCB8fCBtZXNzYWdlLnVzZXJfaWQ7Ly8gbGVnYWN5IHByb2plY3QvdXNlciBpZCBmaW5kZXJcclxuICAgICAgbGV0IHVzZXJfZGF0YSA9IHVzZXJzLmRhdGFbYCR7cHJvamVjdF9pZH1gXTsvLyB1c2VyX2lkXHJcblxyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmlld3NfaXRlbV93cmFwcGVyXCIga2V5PXtgbWVzc2FnZV8ke2lVTn1fJHtuZHh9YH0gZGF0YS1uZHg9e25keH0+XHJcbiAgICAgICAgICAgIDxNZXNzYWdlIGRhdGE9e3suLi5tZXNzYWdlLCAuLi51c2VyX2RhdGEsIHJlcGx5fX0gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKTtcclxuICAgIH0pOy8vIG1lbW9cclxuICB9ZWxzZXtcclxuICAgIG1lc3NhZ2VfZGlzcGxheSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBsZXQgdklTY3JvbGxfZGF0YSA9IHtcclxuICAgIHZpc2libGU6dHJ1ZSxcclxuICAgIGRhdGE6e1xyXG4gICAgICByZW5kZXI6IFwibm9uZVwiLFxyXG4gICAgICBpbnRlcm5hbF90cmFja2luZzogZmFsc2UsXHJcbiAgICAgIGhvbWU6YG5hcnJfbWVzc2FnZXNfJHtpVU59YCxcclxuICAgICAgaVVOOiBpVU4sXHJcbiAgICAgIHNjcm9sbF9sb2FkZXI6IGZhbHNlLFxyXG4gICAgICAvLyBtYWluX2xvYWRlcjogdHJ1ZSxcclxuICAgICAgLy8gY2FsbGJhY2s6ZmV0Y2hfaW5mbyxcclxuICAgICAgbGlzdDogbWVzc2FnZXMubGlzdCxcclxuICAgICAgaXRlbXM6IG1lc3NhZ2VzLmRhdGEsXHJcbiAgICAgIHNldExpc3Q6IHNldE1lc3NhZ2VzLFxyXG4gICAgICByZXF1ZXN0X3NyYzogXCJleHRlcm5hbFwiLFxyXG4gICAgICBsaXN0X2Rpc3BsYXk6IG1lc3NhZ2VfZGlzcGxheSxcclxuICAgICAgZmxpcDogdHJ1ZSxcclxuICAgICAgLy8gc3RhdHM6IHRydWUsXHJcbiAgICAgIGhlaWdodF9jYWxjLFxyXG4gICAgICBwb3NpdGlvbjogZ2V0X2ZsaXBfaGVpZ2h0KG1lc3NhZ2VzLmhlaWdodCksLy8gdGhpcyBzaG91bGQgYmUgc2FmZSB0byBydW5cclxuICAgICAgZHluYW1pY19oZWlnaHQ6IG1lc3NhZ2VzLmhlaWdodCxcclxuICAgICAgc2hvcnRmYWxsOiAxMDBcclxuICAgIH1cclxuICB9Ly8gdklTY3JvbGxfZGF0YVxyXG5cclxuXHJcblxyXG4gIGxldCBlbnRyeV9kYXRhID0ge1xyXG4gICAgZW50cnlfcmVmOmNvbW1lbnRfcmVmLFxyXG4gICAgZWRpdG9yX3JlZjogZWRpdG9yX3JlZixcclxuICAgIGNhbGxiYWNrOnVwZGF0ZV9jb21tZW50LFxyXG4gICAgZ2V0RWRpdG9yQ2FsbGJhY2s6Z2V0RWRpdG9yU3RhdGUsXHJcbiAgICBtYXhIZWlnaHQ6XCIyMHJlbVwiLFxyXG4gICAgaGlkZV9zY3JvbGw6IHRydWUsXHJcbiAgICBwbGFjZWhvbGRlcjpcIkFkZCBhIGNvbW1lbnQuLi5cIlxyXG4gIH07XHJcblxyXG4gIGxldCB2X2RhdGEgPSB1c2Vycy5kYXRhW2Ake1ZJRVdFUl9EQVRBLnByb2plY3RfaWR9YF07XHJcblxyXG4gIGxldCBoaWRkZW5fZGF0YSA9IHtcclxuICAgIGN1c3RvbTogXCJtc2dfcHJldmlld1wiLFxyXG4gICAgcGF5bG9hZDp7dGV4dDogY29tbWVudC50ZXh0LCBoZWlnaHQ6IGNvbW1lbnQuaGVpZ2h0fSxcclxuICAgIC4uLnZfZGF0YSxcclxuICAgIHVuX3JlcGx5LFxyXG4gICAgdW5fcmVmLFxyXG4gICAgZ2V0RWRpdG9yQ2FsbGJhY2s6IGdldE1lc3NhZ2VTdGF0ZSxcclxuICAgIHJlcGx5X2RhdGEsXHJcbiAgICByZWZfZGF0YSxcclxuICAgIGdldFJlcGx5U3RhdGU6IGdldFJlcGx5U3RhdGVcclxuICB9XHJcblxyXG4gIGxldCBsb2FkZXIgPSAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRlcl93cmFwcGVyIGhpZGUtc2Nyb2xsXCIgPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlZ3VlX2l0ZW1fbG9hZGVyIGxvYWRlciByZXNldC1sb3dcIlxyXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCB0cnVlKSBjb25zb2xlLndhcm4oYFtBcmNdIGxvYWRlciB3YXMgY2xpY2tlZGApO1xyXG4gICAgICAgICAgLy8gaWNvbldhbGxfY2FsbGJhY2soKTtcclxuICAgICAgICB9fSA+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkZXJfcmVmcmVzaCBpY29uLXNwaW5uZXIxMSBkMy1pY28gZDMtYmxvY1wiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcblxyXG4gIGxldCBkaXNwbGF5X2VscyA9IHN0YXRlLmluaXQgPyAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIk5hcnJhdG9yIG5hcnJfd3JhcHBlclwiIGRhdGEtY29tcD17YE5hcnJhdG9yYH0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiTmFycmF0b3IgbmFycl9jb250XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuYXJyX2hlYWRlclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuYXJyX3VzZXJzXCI+XHJcbiAgICAgICAgICAgIHt1c2VyX2ljb25zfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5hcnJfaW52aXRlIG5hcnJfYnRuIGQzLWljbyBpY29uLXBsdXNcIj48L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmFycl92aWRlbyBuYXJyX2J0biBkMy1pY28gaWNvbi12aWRlb1wiPjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuYXJyX29wdGlvbnMgbmFycl9idG4gZDMtaWNvIGljb24tb3B0aW9uc1wiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmFycl9jb250ZW50X2NvbnQgaGlkZS1zY3JvbGxcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgbmFycl9tZXNzYWdlcyBuYXJyX21lc3NhZ2VzXyR7aVVOfWB9IHJlZj17bmFycl9tZXNzYWdlc30+XHJcbiAgICAgICAgICAgIHsvKiB7bWVzc2FnZV9kaXNwbGF5fSAqL31cclxuICAgICAgICAgICAgPFZJU2Nyb2xsIHsuLi52SVNjcm9sbF9kYXRhfS8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5hcnJfZm9vdGVyXCI+XHJcbiAgICAgICAgICB7LyogPHRleHRhcmVhXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17XCJuYXJyX3RleHQgaGlkZS1zY3JvbGxcIn1cclxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj17XCJBZGQgYSBjb21tZW50Li4uXCJ9XHJcbiAgICAgICAgICAgIHJlZj17Y29tbWVudF9yZWZ9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXt1cGRhdGVfY29tbWVudH1cclxuICAgICAgICAgICAgb25Gb2N1cz17KGUpID0+IHtcclxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgZS50YXJnZXQuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID48L3RleHRhcmVhPiAqL31cclxuICAgICAgICAgICAge3ZpZXdfb3B0aW9ucyA/IChcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YG5hcnJfY29tbWVudF9jdHJscyAke3ZpZXdfb3B0aW9ucyA/IFwidmlzaWJsZVwiIDogXCJcIn1gfT5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgbmFycl9wcmV2aWV3IG5hcnJfYnRuIGZvb3RlciBkMy1pY28gaWNvbi0ke3ZpZXdfcHJldmlldyA/IFwiZXllLWJsb2NrZWRcIiA6IFwiZXllXCJ9YH1cclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFZpZXdQcmV2aWV3KCF2aWV3X3ByZXZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICB9fSA+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5hcnJfY2xlYXIgbmFycl9idG4gZm9vdGVyIGQzLWljbyBpY29uLWJpblwiXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNldF90ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgIH19PjwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgPEVudHJ5IGRhdGE9e2VudHJ5X2RhdGF9IC8+XHJcbiAgICAgICAgICAgIHtjb21tZW50LmNvdW50ID4gMCAmJiByZWFkeV9zZW5kLmN1cnJlbnQgfHwgcmVmX2RhdGEgPyAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuYXJyX3NlbmQgbmFycl9idG4gZm9vdGVyIGQzLWljbyBpY29uLXNlbmRcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3NlbmRfY29tbWVudH0+PC9kaXY+XHJcbiAgICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5hcnJfb3B0aW9ucyBuYXJyX2J0biBmb290ZXIgZDMtaWNvIGljb24tb3B0aW9uc1wiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0Vmlld09wdGlvbnMoIXZpZXdfb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBzZXRWaWV3UHJldmlldyhmYWxzZSk7Ly8gbWFrZSBpdCBmYWxzZSBldmVyeSB0aW1lXHJcbiAgICAgICAgICAgICAgfX0+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BuYXJyX2hpZGRlbl9hcmVhICR7dmlld19vcHRpb25zICYmIHZpZXdfcHJldmlldyA/IFwicHJldmlld1wiIDogXCJcIn1gfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmFycl9oaWRkZW5fbWVzc2FnZV9jb250XCI+XHJcbiAgICAgICAgICAgIHsvKiBtYWtlIHN1cmUgdGhlIHVzZXIgaGFzIGJlZW4gc2V0IC0gc28gaWNvbnMgY2FuIGJlIHVwZGF0ZWQgKi99XHJcbiAgICAgICAgICAgIHsgLyp1c2Vycy5saXN0Lmxlbmd0aCA+IDAgPyovIDxNZXNzYWdlIGRhdGE9e2hpZGRlbl9kYXRhfSAvPiAvKjogbnVsbCovfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKSA6IGxvYWRlcjtcclxuICAvLyBJU1NVRTogdXNlcnMubGlzdC5sZW5ndGggd29uJ3Qgd29yayBmb3IgYWxsIHNldHRpbmdzLCBtYXkgbmVlZCBhIGRpZmZlcmVudCB0cmlnZ2VyXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8PlxyXG4gICAgICB7ZGlzcGxheV9lbHN9XHJcbiAgICA8Lz5cclxuICApO1xyXG59KTsvLyBOYXJyYXRvclxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTmFycmF0b3I7XHJcblxyXG5jb25zdCBnZXRMaWdodENvbG9yID0gKCkgPT4ge1xyXG4gIC8vIGJyZWFrIGludG8gMiB2YWx1ZXMgYmVjYXVzZSBpIGRvbid0IHdhbnQgdG8gbGlnaHRlbiBhIGRhcmsgY29sb3JcclxuICAvLyBpZiBpIGxpZ2h0ZW4gYSBkYXJrIGNvbG9yIGl0IHdpbGwgYmUgbGlnaHQgYnV0IG5vdCBhcyBsaWdodCBiZWNhdXNlIGkgc3RhcnRlZCBkYXJrXHJcbiAgbGV0IHRlc3RfY29sb3IgPSBDb2xvci5yYW5kb20oKTtcclxuICAvLyBsZXQgdHJ5X2NvbG9yID0gdGVzdF9jb2xvci5saWdodGVuKDI1KTsvLyBmYWlsZWRcclxuICAvLyBsZXQgdHJ5X2NvbG9yID0gQ29sb3IodGVzdF9jb2xvcikubGlnaHRlbigyNSk7Ly8gZmFpbGVkXHJcbiAgbGV0IHRyeV9jb2xvciA9IENvbG9yKHRlc3RfY29sb3IudG9IZXg4KCkpLmxpZ2h0ZW4oMjIpOy8vIHdvcmtlZFxyXG5cclxuICBsZXQgd2hpdGUgPSBDb2xvcihcIndoaXRlXCIpO1xyXG4gIHdoaWxlKCF0ZXN0X2NvbG9yLmlzTGlnaHQoKSB8fCBDb2xvci5lcXVhbHModHJ5X2NvbG9yLCB3aGl0ZSkpe1xyXG4gICAgdGVzdF9jb2xvciA9IENvbG9yLnJhbmRvbSgpO1xyXG4gICAgdHJ5X2NvbG9yID0gQ29sb3IodGVzdF9jb2xvci50b0hleDgoKSkubGlnaHRlbigyMik7XHJcbiAgfVxyXG4gIC8vIHJldHVybiBgIyR7dHJ5X2NvbG9yLmxpZ2h0ZW4oKS5zYXR1cmF0ZSgyMCkudG9IZXg4KCl9YDtcclxuICByZXR1cm4gYCMke3RyeV9jb2xvci50b0hleDgoKX1gO1xyXG59Ly8gZ2V0TGlnaHRDb2xvclxyXG5cclxuLy9kYXRhPXt7Y2FsbGJhY2s6dXBkYXRlX2NvbW1lbnQvKnRvb2xiYXI6XCJub25lXCIqL319XHJcblxyXG4vLyBbSG93IHRvIGNsZWFyIGlucHV0IGZpZWxkIGluIERyYWZ0LWpzXShodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNzQ2Mzc1Ny9ob3ctdG8tY2xlYXItaW5wdXQtZmllbGQtaW4tZHJhZnQtanMpXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFQQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWxCQTtBQUZBO0FBQ0E7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSkE7QUFLQTtBQUFBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQWFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQUE7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFDQTtBQVNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/Narrator.js\n");

/***/ }),

/***/ "./js/components/Narrator/Narrator.scss":
/*!**********************************************!*\
  !*** ./js/components/Narrator/Narrator.scss ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL05hcnJhdG9yLnNjc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL05hcnJhdG9yLnNjc3M/MTNhZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/Narrator.scss\n");

/***/ }),

/***/ "./js/components/Narrator/components/Draft/Draft.scss":
/*!************************************************************!*\
  !*** ./js/components/Narrator/components/Draft/Draft.scss ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvRHJhZnQvRHJhZnQuc2Nzcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9EcmFmdC9EcmFmdC5zY3NzPzMyY2YiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Draft/Draft.scss\n");

/***/ }),

/***/ "./js/components/Narrator/components/Draft/Entry.js":
/*!**********************************************************!*\
  !*** ./js/components/Narrator/components/Draft/Entry.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"./node_modules/@babel/runtime/helpers/extends.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var draft_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! draft-js */ \"./node_modules/draft-js/lib/Draft.js\");\n/* harmony import */ var draft_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(draft_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _toolbars_Toolbar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./toolbars/Toolbar */ \"./js/components/Narrator/components/Draft/toolbars/Toolbar.js\");\n\n\n\n\n\n__webpack_require__(/*! ./Entry.scss */ \"./js/components/Narrator/components/Draft/Entry.scss\"); // const {dataCheck} = require('./dataCheck');\n\n\n\n\nvar display_console = false;\n\nvar Entry = function Entry(props) {\n  // data={{toolbar, item_data, name, callback}}\n  // props.children;\n  var init = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(false);\n  var input_el = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(); // let desc_init = useRef(true);\n\n  var data = props.data || {};\n  var domEditor = data.editor_ref || Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])();\n  var entry_ref = data.entry_ref || Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])();\n  var toolbar = data.toolbar || \"none\";\n  var item_data = data.item_data || {};\n  var callback = data.callback; // if not - undefined\n\n  var getEditorCallback = data.getEditorCallback;\n  var name = props.name || \"note_data\";\n  var custom = data.custom || \"\";\n  var note_data = typeof item_data[\"\".concat(name)] != \"undefined\" ? item_data[\"\".concat(name)] : \"\";\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(0),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),\n      trigger_update = _useState2[0],\n      setTriggerUpdate = _useState2[1];\n\n  var raw_ref = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])();\n  var note_obj;\n\n  if (data.item_data) {\n    // why am i using this structure instead of a ternary operator?\n    // oh just in case it breaks when trying to use JSON.parse\n    try {\n      if (note_data != \"\") {\n        note_obj = JSON.parse(unescape(note_data));\n      } else {\n        throw \"no editor data available\";\n      }\n    } catch (e) {\n      console.debug(\"note_data conversion issue\", e);\n      note_obj = \"\";\n    }\n  }\n\n  var _ref = note_data != \"\" && _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(note_obj) == \"object\" ? Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(draft_js__WEBPACK_IMPORTED_MODULE_4__[\"EditorState\"].createWithContent(Object(draft_js__WEBPACK_IMPORTED_MODULE_4__[\"convertFromRaw\"])(note_obj))) : Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(draft_js__WEBPACK_IMPORTED_MODULE_4__[\"EditorState\"].createEmpty()),\n      _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_ref, 2),\n      draftEditor = _ref2[0],\n      setDraftEditor = _ref2[1];\n\n  if (init.current == false) {\n    init.current = true;\n  } // init.current\n\n\n  var iUN = Math.round(Math.random() * 10000);\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (getEditorCallback) {\n      getEditorCallback([draft_js__WEBPACK_IMPORTED_MODULE_4__[\"EditorState\"], draftEditor, setDraftEditor, draft_js__WEBPACK_IMPORTED_MODULE_4__[\"convertFromRaw\"]]);\n    }\n\n    var editor_root = entry_ref.current.querySelector(\".DraftEditor-root\");\n\n    if (data.maxHeight) {\n      editor_root.style.maxHeight = data.maxHeight;\n    }\n\n    if (data.hide_scroll) {\n      editor_root.classList.add(\"hide-scroll\");\n    }\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    var editor_root = entry_ref.current.querySelector(\".DraftEditor-root\");\n    var placeholder = editor_root.querySelector(\".public-DraftEditorPlaceholder-inner\");\n\n    if (placeholder && !placeholder.classList.contains(\"ready\")) {\n      placeholder.classList.add(\"ready\");\n      placeholder.addEventListener(\"click\", function () {\n        if (display_console || true) console.warn(\"[Entry] focus has been called\"); // entry_ref.current.focus();// this isn't the ref to the actual editor\n\n        domEditor.current.focus(); // draftEditor.focus();// failed\n      });\n    } // if\n\n  });\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (raw_ref.current == undefined) return;\n    var raw = raw_ref.current;\n\n    if (callback) {\n      callback(JSON.stringify(raw), draftEditor);\n    } // if\n\n  }, [draftEditor]);\n\n  var update_editor = function update_editor(dE) {\n    setDraftEditor(dE);\n    var raw = Object(draft_js__WEBPACK_IMPORTED_MODULE_4__[\"convertToRaw\"])(dE.getCurrentContent());\n    raw_ref.current = raw; // if there is a callback run the callback\n    // FormStore.setData(name,JSON.stringify(raw));\n    // having this section do too many things will slow down the re-render process\n    // if(callback){\n    //   callback(JSON.stringify(raw),draftEditor);\n    // }// if\n    // setTriggerUpdate(prev => prev + 1);\n  }; // update_editor\n  // const toggleBlockType(blockType) {\n  //   this.onChange(\n  //     RichUtils.toggleBlockType(\n  //       draftEditor,\n  //       // this.state.editorState,\n  //       blockType\n  //     )\n  //   );\n  // }\n\n\n  var toggleBlockType = function toggleBlockType(blockType) {\n    var newState = draft_js__WEBPACK_IMPORTED_MODULE_4__[\"RichUtils\"].toggleBlockType(draftEditor, blockType);\n\n    if (newState) {\n      update_editor(newState);\n      return 'handled';\n    } //\n\n\n    return 'not-handled';\n  };\n\n  var handleKeyCommand = function handleKeyCommand(command) {\n    var newState = draft_js__WEBPACK_IMPORTED_MODULE_4__[\"RichUtils\"].handleKeyCommand(draftEditor, command);\n\n    if (newState) {\n      update_editor(newState);\n      return 'handled';\n    } //\n\n\n    return 'not-handled';\n  }; //handleKeyCommand\n  // let tb_obj = {\n  //   type: \"basic\",\n  //   draft:{\n  //     draftEditor: draftEditor,\n  //     update_editor: update_editor,\n  //     RichUtils: RichUtils\n  //   }\n  // };\n  // let block_tool_obj = {\n  //   type: \"block\",\n  //   draft:{\n  //     draftEditor: draftEditor,\n  //     update_editor: update_editor,\n  //     RichUtils: RichUtils,\n  //     onToggle: toggleBlockType\n  //   }\n  // };\n\n\n  var code_tool_obj = {\n    type: toolbar,\n    nowrap: false,\n    draft: {\n      draftEditor: draftEditor,\n      update_editor: update_editor,\n      RichUtils: draft_js__WEBPACK_IMPORTED_MODULE_4__[\"RichUtils\"],\n      onToggle: toggleBlockType\n    }\n  };\n  var placeholder = {};\n\n  if (data.placeholder != undefined) {\n    placeholder = {\n      placeholder: data.placeholder\n    };\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n    className: \"entry_editor_\".concat(iUN, \" entry_editor \").concat(name.replace(\"_data\", \"\"), \" \").concat(custom),\n    \"data-comp\": \"Draft-Entry\",\n    ref: entry_ref\n  }, toolbar != \"none\" ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_toolbars_Toolbar__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    data: code_tool_obj\n  }) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(draft_js__WEBPACK_IMPORTED_MODULE_4__[\"Editor\"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n    editorState: draftEditor,\n    handleKeyCommand: handleKeyCommand,\n    onChange: update_editor\n  }, placeholder, {\n    ref: domEditor\n  })));\n}; // i don't think i need that hidden input, its doing nothing\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Entry); // LATER: pass in different toolbars for different editor styles\n// Note: i couldn't add multiple field instances of the same note component to the form because although it will allow fresh entry,\n// it doesn't update in its current iteration.//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvRHJhZnQvRW50cnkuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvRHJhZnQvRW50cnkuanM/YWQ5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIgIGltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDb250ZXh0LCBGcmFnbWVudCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG4gIHJlcXVpcmUoXCIuL0VudHJ5LnNjc3NcIik7XHJcbiAgLy8gY29uc3Qge2RhdGFDaGVja30gPSByZXF1aXJlKCcuL2RhdGFDaGVjaycpO1xyXG4gIGltcG9ydCB7IEVkaXRvciwgRWRpdG9yU3RhdGUsIFJpY2hVdGlscywgY29udmVydEZyb21SYXcsIGNvbnZlcnRUb1JhdyB9IGZyb20gJ2RyYWZ0LWpzJztcclxuICBpbXBvcnQgVG9vbGJhciBmcm9tICcuL3Rvb2xiYXJzL1Rvb2xiYXInO1xyXG4gIGNvbnN0IGRpc3BsYXlfY29uc29sZSA9IGZhbHNlO1xyXG5cclxuICBjb25zdCBFbnRyeSA9IHByb3BzID0+IHtcclxuICAgIC8vIGRhdGE9e3t0b29sYmFyLCBpdGVtX2RhdGEsIG5hbWUsIGNhbGxiYWNrfX1cclxuXHJcbiAgICAvLyBwcm9wcy5jaGlsZHJlbjtcclxuICAgIGNvbnN0IGluaXQgPSB1c2VSZWYoZmFsc2UpO1xyXG4gICAgY29uc3QgaW5wdXRfZWwgPSB1c2VSZWYoKTtcclxuICAgIC8vIGxldCBkZXNjX2luaXQgPSB1c2VSZWYodHJ1ZSk7XHJcblxyXG4gICAgbGV0IGRhdGEgPSBwcm9wcy5kYXRhIHx8IHt9O1xyXG4gICAgY29uc3QgZG9tRWRpdG9yID0gZGF0YS5lZGl0b3JfcmVmIHx8IHVzZVJlZigpO1xyXG4gICAgY29uc3QgZW50cnlfcmVmID0gZGF0YS5lbnRyeV9yZWYgfHwgdXNlUmVmKCk7XHJcbiAgICBsZXQgdG9vbGJhciA9IGRhdGEudG9vbGJhciB8fCBcIm5vbmVcIlxyXG4gICAgbGV0IGl0ZW1fZGF0YSA9IGRhdGEuaXRlbV9kYXRhIHx8IHt9O1xyXG4gICAgbGV0IGNhbGxiYWNrID0gZGF0YS5jYWxsYmFjazsvLyBpZiBub3QgLSB1bmRlZmluZWRcclxuICAgIGxldCBnZXRFZGl0b3JDYWxsYmFjayA9IGRhdGEuZ2V0RWRpdG9yQ2FsbGJhY2s7XHJcbiAgICBsZXQgbmFtZSA9IHByb3BzLm5hbWUgfHwgXCJub3RlX2RhdGFcIjtcclxuICAgIGxldCBjdXN0b20gPSBkYXRhLmN1c3RvbSB8fCBcIlwiO1xyXG4gICAgbGV0IG5vdGVfZGF0YSA9ICh0eXBlb2YgaXRlbV9kYXRhW2Ake25hbWV9YF0gIT0gXCJ1bmRlZmluZWRcIikgPyBpdGVtX2RhdGFbYCR7bmFtZX1gXSA6IFwiXCI7XHJcbiAgICBjb25zdCBbdHJpZ2dlcl91cGRhdGUsIHNldFRyaWdnZXJVcGRhdGVdID0gdXNlU3RhdGUoMCk7XHJcbiAgICBjb25zdCByYXdfcmVmID0gdXNlUmVmKCk7XHJcblxyXG4gICAgbGV0IG5vdGVfb2JqO1xyXG4gICAgaWYoZGF0YS5pdGVtX2RhdGEpe1xyXG4gICAgICAvLyB3aHkgYW0gaSB1c2luZyB0aGlzIHN0cnVjdHVyZSBpbnN0ZWFkIG9mIGEgdGVybmFyeSBvcGVyYXRvcj9cclxuICAgICAgLy8gb2gganVzdCBpbiBjYXNlIGl0IGJyZWFrcyB3aGVuIHRyeWluZyB0byB1c2UgSlNPTi5wYXJzZVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmKG5vdGVfZGF0YSAhPSBcIlwiKXtcclxuICAgICAgICAgIG5vdGVfb2JqID0gSlNPTi5wYXJzZSh1bmVzY2FwZShub3RlX2RhdGEpKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIHRocm93IFwibm8gZWRpdG9yIGRhdGEgYXZhaWxhYmxlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIm5vdGVfZGF0YSBjb252ZXJzaW9uIGlzc3VlXCIsIGUpO1xyXG4gICAgICAgIG5vdGVfb2JqID0gXCJcIjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtkcmFmdEVkaXRvciwgc2V0RHJhZnRFZGl0b3JdID0gKG5vdGVfZGF0YSAhPSBcIlwiICYmIHR5cGVvZiBub3RlX29iaiA9PSBcIm9iamVjdFwiKSA/XHJcbiAgICB1c2VTdGF0ZShFZGl0b3JTdGF0ZS5jcmVhdGVXaXRoQ29udGVudChjb252ZXJ0RnJvbVJhdyhub3RlX29iaikpKSA6XHJcbiAgICB1c2VTdGF0ZShFZGl0b3JTdGF0ZS5jcmVhdGVFbXB0eSgpKTtcclxuXHJcbiAgICBpZihpbml0LmN1cnJlbnQgPT0gZmFsc2Upe1xyXG5cclxuICAgICAgaW5pdC5jdXJyZW50ID0gdHJ1ZTtcclxuXHJcbiAgICB9Ly8gaW5pdC5jdXJyZW50XHJcblxyXG4gICAgbGV0IGlVTiA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICBpZihnZXRFZGl0b3JDYWxsYmFjayl7XHJcbiAgICAgICAgZ2V0RWRpdG9yQ2FsbGJhY2soW0VkaXRvclN0YXRlLCBkcmFmdEVkaXRvciwgc2V0RHJhZnRFZGl0b3IsIGNvbnZlcnRGcm9tUmF3XSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBlZGl0b3Jfcm9vdCA9IGVudHJ5X3JlZi5jdXJyZW50LnF1ZXJ5U2VsZWN0b3IoYC5EcmFmdEVkaXRvci1yb290YCk7XHJcbiAgICAgIGlmKGRhdGEubWF4SGVpZ2h0KXtcclxuICAgICAgICBlZGl0b3Jfcm9vdC5zdHlsZS5tYXhIZWlnaHQgPSBkYXRhLm1heEhlaWdodDtcclxuICAgICAgfVxyXG4gICAgICBpZihkYXRhLmhpZGVfc2Nyb2xsKXtcclxuICAgICAgICBlZGl0b3Jfcm9vdC5jbGFzc0xpc3QuYWRkKFwiaGlkZS1zY3JvbGxcIik7XHJcbiAgICAgIH1cclxuICAgIH0sW10pO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgIGxldCBlZGl0b3Jfcm9vdCA9IGVudHJ5X3JlZi5jdXJyZW50LnF1ZXJ5U2VsZWN0b3IoYC5EcmFmdEVkaXRvci1yb290YCk7XHJcbiAgICAgIGxldCBwbGFjZWhvbGRlciA9IGVkaXRvcl9yb290LnF1ZXJ5U2VsZWN0b3IoXCIucHVibGljLURyYWZ0RWRpdG9yUGxhY2Vob2xkZXItaW5uZXJcIik7XHJcblxyXG4gICAgICBpZihwbGFjZWhvbGRlciAmJiAhcGxhY2Vob2xkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmVhZHlcIikpe1xyXG4gICAgICAgIHBsYWNlaG9sZGVyLmNsYXNzTGlzdC5hZGQoXCJyZWFkeVwiKTtcclxuICAgICAgICBwbGFjZWhvbGRlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKSA9PiB7XHJcbiAgICAgICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgdHJ1ZSkgY29uc29sZS53YXJuKGBbRW50cnldIGZvY3VzIGhhcyBiZWVuIGNhbGxlZGApO1xyXG4gICAgICAgICAgLy8gZW50cnlfcmVmLmN1cnJlbnQuZm9jdXMoKTsvLyB0aGlzIGlzbid0IHRoZSByZWYgdG8gdGhlIGFjdHVhbCBlZGl0b3JcclxuICAgICAgICAgIGRvbUVkaXRvci5jdXJyZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAvLyBkcmFmdEVkaXRvci5mb2N1cygpOy8vIGZhaWxlZFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0vLyBpZlxyXG4gICAgfSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuXHJcbiAgICAgIGlmKHJhd19yZWYuY3VycmVudCA9PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgICAgbGV0IHJhdyA9IHJhd19yZWYuY3VycmVudDtcclxuICAgICAgaWYoY2FsbGJhY2spe1xyXG4gICAgICAgIGNhbGxiYWNrKEpTT04uc3RyaW5naWZ5KHJhdyksZHJhZnRFZGl0b3IpO1xyXG4gICAgICB9Ly8gaWZcclxuICAgIH0sW2RyYWZ0RWRpdG9yXSlcclxuXHJcblxyXG5cclxuICAgIGNvbnN0IHVwZGF0ZV9lZGl0b3IgPSAoZEUpID0+IHtcclxuICAgICAgc2V0RHJhZnRFZGl0b3IoZEUpO1xyXG4gICAgICBsZXQgcmF3ID0gY29udmVydFRvUmF3KGRFLmdldEN1cnJlbnRDb250ZW50KCkpO1xyXG4gICAgICByYXdfcmVmLmN1cnJlbnQgPSByYXc7XHJcbiAgICAgIC8vIGlmIHRoZXJlIGlzIGEgY2FsbGJhY2sgcnVuIHRoZSBjYWxsYmFja1xyXG4gICAgICAvLyBGb3JtU3RvcmUuc2V0RGF0YShuYW1lLEpTT04uc3RyaW5naWZ5KHJhdykpO1xyXG5cclxuICAgICAgLy8gaGF2aW5nIHRoaXMgc2VjdGlvbiBkbyB0b28gbWFueSB0aGluZ3Mgd2lsbCBzbG93IGRvd24gdGhlIHJlLXJlbmRlciBwcm9jZXNzXHJcbiAgICAgIC8vIGlmKGNhbGxiYWNrKXtcclxuICAgICAgLy8gICBjYWxsYmFjayhKU09OLnN0cmluZ2lmeShyYXcpLGRyYWZ0RWRpdG9yKTtcclxuICAgICAgLy8gfS8vIGlmXHJcbiAgICAgIC8vIHNldFRyaWdnZXJVcGRhdGUocHJldiA9PiBwcmV2ICsgMSk7XHJcbiAgICB9Ly8gdXBkYXRlX2VkaXRvclxyXG5cclxuICAgIC8vIGNvbnN0IHRvZ2dsZUJsb2NrVHlwZShibG9ja1R5cGUpIHtcclxuICAgIC8vICAgdGhpcy5vbkNoYW5nZShcclxuICAgIC8vICAgICBSaWNoVXRpbHMudG9nZ2xlQmxvY2tUeXBlKFxyXG4gICAgLy8gICAgICAgZHJhZnRFZGl0b3IsXHJcbiAgICAvLyAgICAgICAvLyB0aGlzLnN0YXRlLmVkaXRvclN0YXRlLFxyXG4gICAgLy8gICAgICAgYmxvY2tUeXBlXHJcbiAgICAvLyAgICAgKVxyXG4gICAgLy8gICApO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIGNvbnN0IHRvZ2dsZUJsb2NrVHlwZSA9IChibG9ja1R5cGUpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IFJpY2hVdGlscy50b2dnbGVCbG9ja1R5cGUoZHJhZnRFZGl0b3IsIGJsb2NrVHlwZSk7XHJcbiAgICAgICAgaWYgKG5ld1N0YXRlKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZV9lZGl0b3IobmV3U3RhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gJ2hhbmRsZWQnO1xyXG4gICAgICAgIH0vL1xyXG4gICAgICAgIHJldHVybiAnbm90LWhhbmRsZWQnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGhhbmRsZUtleUNvbW1hbmQgPSAoY29tbWFuZCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdTdGF0ZSA9IFJpY2hVdGlscy5oYW5kbGVLZXlDb21tYW5kKGRyYWZ0RWRpdG9yLCBjb21tYW5kKVxyXG4gICAgICBpZiAobmV3U3RhdGUpIHtcclxuICAgICAgICAgIHVwZGF0ZV9lZGl0b3IobmV3U3RhdGUpO1xyXG4gICAgICAgICAgcmV0dXJuICdoYW5kbGVkJztcclxuICAgICAgfS8vXHJcbiAgICAgIHJldHVybiAnbm90LWhhbmRsZWQnO1xyXG4gICAgfS8vaGFuZGxlS2V5Q29tbWFuZFxyXG5cclxuICAgIC8vIGxldCB0Yl9vYmogPSB7XHJcbiAgICAvLyAgIHR5cGU6IFwiYmFzaWNcIixcclxuICAgIC8vICAgZHJhZnQ6e1xyXG4gICAgLy8gICAgIGRyYWZ0RWRpdG9yOiBkcmFmdEVkaXRvcixcclxuICAgIC8vICAgICB1cGRhdGVfZWRpdG9yOiB1cGRhdGVfZWRpdG9yLFxyXG4gICAgLy8gICAgIFJpY2hVdGlsczogUmljaFV0aWxzXHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH07XHJcblxyXG4gICAgLy8gbGV0IGJsb2NrX3Rvb2xfb2JqID0ge1xyXG4gICAgLy8gICB0eXBlOiBcImJsb2NrXCIsXHJcbiAgICAvLyAgIGRyYWZ0OntcclxuICAgIC8vICAgICBkcmFmdEVkaXRvcjogZHJhZnRFZGl0b3IsXHJcbiAgICAvLyAgICAgdXBkYXRlX2VkaXRvcjogdXBkYXRlX2VkaXRvcixcclxuICAgIC8vICAgICBSaWNoVXRpbHM6IFJpY2hVdGlscyxcclxuICAgIC8vICAgICBvblRvZ2dsZTogdG9nZ2xlQmxvY2tUeXBlXHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH07XHJcblxyXG4gICAgbGV0IGNvZGVfdG9vbF9vYmogPSB7XHJcbiAgICAgIHR5cGU6IHRvb2xiYXIsXHJcbiAgICAgIG5vd3JhcDogZmFsc2UsXHJcbiAgICAgIGRyYWZ0OntcclxuICAgICAgICBkcmFmdEVkaXRvcjogZHJhZnRFZGl0b3IsXHJcbiAgICAgICAgdXBkYXRlX2VkaXRvcjogdXBkYXRlX2VkaXRvcixcclxuICAgICAgICBSaWNoVXRpbHM6IFJpY2hVdGlscyxcclxuICAgICAgICBvblRvZ2dsZTogdG9nZ2xlQmxvY2tUeXBlXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGV0IHBsYWNlaG9sZGVyID0ge307XHJcbiAgICBpZihkYXRhLnBsYWNlaG9sZGVyICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgIHBsYWNlaG9sZGVyID0ge3BsYWNlaG9sZGVyOiBkYXRhLnBsYWNlaG9sZGVyfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZW50cnlfZWRpdG9yXyR7aVVOfSBlbnRyeV9lZGl0b3IgJHtuYW1lLnJlcGxhY2UoXCJfZGF0YVwiLFwiXCIpfSAke2N1c3RvbX1gfSBcclxuICAgICAgZGF0YS1jb21wPXtgRHJhZnQtRW50cnlgfVxyXG4gICAgICByZWY9e2VudHJ5X3JlZn0gPlxyXG4gICAgICAgIHt0b29sYmFyICE9IFwibm9uZVwiID8gPFRvb2xiYXIgZGF0YT17Y29kZV90b29sX29ian0gLz4gOiBudWxsfVxyXG4gICAgICAgICAgPEVkaXRvciBlZGl0b3JTdGF0ZT17ZHJhZnRFZGl0b3J9XHJcbiAgICAgICAgICBoYW5kbGVLZXlDb21tYW5kPXtoYW5kbGVLZXlDb21tYW5kfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3VwZGF0ZV9lZGl0b3J9XHJcbiAgICAgICAgICB7Li4ucGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICByZWY9e2RvbUVkaXRvcn0gLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuICAvLyBpIGRvbid0IHRoaW5rIGkgbmVlZCB0aGF0IGhpZGRlbiBpbnB1dCwgaXRzIGRvaW5nIG5vdGhpbmdcclxuXHJcbiAgZXhwb3J0IGRlZmF1bHQgRW50cnk7XHJcblxyXG5cclxuLy8gTEFURVI6IHBhc3MgaW4gZGlmZmVyZW50IHRvb2xiYXJzIGZvciBkaWZmZXJlbnQgZWRpdG9yIHN0eWxlc1xyXG4vLyBOb3RlOiBpIGNvdWxkbid0IGFkZCBtdWx0aXBsZSBmaWVsZCBpbnN0YW5jZXMgb2YgdGhlIHNhbWUgbm90ZSBjb21wb25lbnQgdG8gdGhlIGZvcm0gYmVjYXVzZSBhbHRob3VnaCBpdCB3aWxsIGFsbG93IGZyZXNoIGVudHJ5LFxyXG4vLyBpdCBkb2Vzbid0IHVwZGF0ZSBpbiBpdHMgY3VycmVudCBpdGVyYXRpb24uXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUhBO0FBV0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Draft/Entry.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/Draft/Entry.scss":
/*!************************************************************!*\
  !*** ./js/components/Narrator/components/Draft/Entry.scss ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvRHJhZnQvRW50cnkuc2Nzcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9EcmFmdC9FbnRyeS5zY3NzPzI5MjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Draft/Entry.scss\n");

/***/ }),

/***/ "./js/components/Narrator/components/Draft/Note.js":
/*!*********************************************************!*\
  !*** ./js/components/Narrator/components/Draft/Note.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var draft_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! draft-js */ \"./node_modules/draft-js/lib/Draft.js\");\n/* harmony import */ var draft_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(draft_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var draft_js_plugins_editor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! draft-js-plugins-editor */ \"./node_modules/draft-js-plugins-editor/lib/index.js\");\n/* harmony import */ var draft_js_plugins_editor__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(draft_js_plugins_editor__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var draft_js_image_plugin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! draft-js-image-plugin */ \"./node_modules/draft-js-image-plugin/lib/index.js\");\n/* harmony import */ var draft_js_image_plugin__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(draft_js_image_plugin__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var draft_js_video_plugin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! draft-js-video-plugin */ \"./node_modules/draft-js-video-plugin/lib/index.js\");\n/* harmony import */ var draft_js_video_plugin__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(draft_js_video_plugin__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var draft_js_alignment_plugin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! draft-js-alignment-plugin */ \"./node_modules/draft-js-alignment-plugin/lib/index.js\");\n/* harmony import */ var draft_js_alignment_plugin__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(draft_js_alignment_plugin__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var draft_js_resizeable_plugin__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! draft-js-resizeable-plugin */ \"./node_modules/draft-js-resizeable-plugin/lib/index.js\");\n/* harmony import */ var draft_js_resizeable_plugin__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(draft_js_resizeable_plugin__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\nvar resizeablePlugin = draft_js_resizeable_plugin__WEBPACK_IMPORTED_MODULE_8___default()();\nvar alignmentPlugin = draft_js_alignment_plugin__WEBPACK_IMPORTED_MODULE_7___default()();\nvar decorator = Object(draft_js_plugins_editor__WEBPACK_IMPORTED_MODULE_4__[\"composeDecorators\"])(alignmentPlugin.decorator, resizeablePlugin.decorator);\nvar imagePlugin = draft_js_image_plugin__WEBPACK_IMPORTED_MODULE_5___default()({\n  decorator: decorator\n});\nvar videoPlugin = draft_js_video_plugin__WEBPACK_IMPORTED_MODULE_6___default()({\n  decorator: decorator\n});\nvar plugins = [alignmentPlugin, resizeablePlugin, imagePlugin, videoPlugin];\n\n__webpack_require__(/*! ./Draft.scss */ \"./js/components/Narrator/components/Draft/Draft.scss\");\n\nvar Note = function Note(props) {\n  // props.children;\n  var init = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(false);\n  var input_el = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])();\n  var domEditor = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])();\n  var iUN_ref = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(props.iUN || Math.round(Math.random() * 10000));\n  var iUN = iUN_ref.current; // let desc_init = useRef(true);\n\n  var data = props.data;\n  var item_data = data.item_data;\n  var name = data.name || \"note_data\";\n  var custom = data.custom || \"\";\n  var note_data = typeof item_data[\"\".concat(name)] != \"undefined\" ? item_data[\"\".concat(name)] : \"\";\n  var getEditorCallback = data.getEditorCallback;\n  var update_trigger = data.update_trigger; // let register = props.register;\n\n  var note_obj;\n\n  try {\n    if (note_data != \"\") {\n      note_obj = JSON.parse(unescape(note_data));\n    } else {\n      throw \"no editor data available\";\n    }\n  } catch (e) {\n    console.debug(\"note_data conversion issue\", e);\n    note_obj = \"\";\n  }\n\n  var _ref = note_data != \"\" && _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(note_obj) == \"object\" ? Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(draft_js__WEBPACK_IMPORTED_MODULE_3__[\"EditorState\"].createWithContent(Object(draft_js__WEBPACK_IMPORTED_MODULE_3__[\"convertFromRaw\"])(note_obj))) : Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(draft_js__WEBPACK_IMPORTED_MODULE_3__[\"EditorState\"].createEmpty()),\n      _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_ref, 2),\n      draftEditor = _ref2[0],\n      setDraftEditor = _ref2[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    if (getEditorCallback) {\n      getEditorCallback([draft_js__WEBPACK_IMPORTED_MODULE_3__[\"EditorState\"], draftEditor, setDraftEditor, draft_js__WEBPACK_IMPORTED_MODULE_3__[\"convertFromRaw\"]]);\n    } // if\n\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    if (update_trigger) update_trigger();\n  }, [draftEditor]);\n\n  if (init.current == false) {\n    init.current = true;\n  } // init.current\n\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"draft_editor_\".concat(iUN, \" draft_editor \").concat(name.replace(\"_data\", \"\"), \" \").concat(custom),\n    \"data-comp\": \"Draft-Note\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(draft_js_plugins_editor__WEBPACK_IMPORTED_MODULE_4___default.a, {\n    editorState: draftEditor,\n    readOnly: true,\n    onChange: function onChange() {\n      /*do nothing - fix for error:\r\n      The prop `onChange` is marked as required in `PluginEditor`, but its value is `undefined`.*/\n    },\n    plugins: plugins,\n    ref: domEditor\n  }));\n}; //observer\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Note);\n\nvar exists = function exists(item) {\n  return item != null && typeof item != \"undefined\" && item != false && item != \"\" ? true : false;\n}; // LATER: pass in different toolbars for different editor styles\n// db.getCollection('items').find({category:\"Krita\",note_data:{$ne:\"\"}})\n// {\\\"blocks\\\"//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvRHJhZnQvTm90ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9EcmFmdC9Ob3RlLmpzP2E5ODgiXSwic291cmNlc0NvbnRlbnQiOlsiICBpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ29udGV4dCwgRnJhZ21lbnQsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuXHJcbiAgaW1wb3J0IHsgLypFZGl0b3IsKi8gRWRpdG9yU3RhdGUsIFJpY2hVdGlscywgY29udmVydEZyb21SYXcsIGNvbnZlcnRUb1JhdyB9IGZyb20gJ2RyYWZ0LWpzJztcclxuICBpbXBvcnQgRWRpdG9yLCB7Y29tcG9zZURlY29yYXRvcnMgfSBmcm9tICdkcmFmdC1qcy1wbHVnaW5zLWVkaXRvcic7XHJcbiAgaW1wb3J0IGNyZWF0ZUltYWdlUGx1Z2luIGZyb20gJ2RyYWZ0LWpzLWltYWdlLXBsdWdpbic7XHJcbiAgaW1wb3J0IGNyZWF0ZVZpZGVvUGx1Z2luIGZyb20gJ2RyYWZ0LWpzLXZpZGVvLXBsdWdpbic7XHJcblxyXG4gIGltcG9ydCBjcmVhdGVBbGlnbm1lbnRQbHVnaW4gZnJvbSAnZHJhZnQtanMtYWxpZ25tZW50LXBsdWdpbic7XHJcbiAgaW1wb3J0IGNyZWF0ZVJlc2l6ZWFibGVQbHVnaW4gZnJvbSAnZHJhZnQtanMtcmVzaXplYWJsZS1wbHVnaW4nO1xyXG5cclxuICBjb25zdCByZXNpemVhYmxlUGx1Z2luID0gY3JlYXRlUmVzaXplYWJsZVBsdWdpbigpO1xyXG4gIGNvbnN0IGFsaWdubWVudFBsdWdpbiA9IGNyZWF0ZUFsaWdubWVudFBsdWdpbigpO1xyXG5cclxuICBjb25zdCBkZWNvcmF0b3IgPSBjb21wb3NlRGVjb3JhdG9ycyhcclxuICAgIGFsaWdubWVudFBsdWdpbi5kZWNvcmF0b3IsXHJcbiAgICByZXNpemVhYmxlUGx1Z2luLmRlY29yYXRvcixcclxuICApO1xyXG5cclxuICBjb25zdCBpbWFnZVBsdWdpbiA9IGNyZWF0ZUltYWdlUGx1Z2luKHtkZWNvcmF0b3J9KTtcclxuICBjb25zdCB2aWRlb1BsdWdpbiA9IGNyZWF0ZVZpZGVvUGx1Z2luKHtkZWNvcmF0b3J9KTtcclxuXHJcbiAgY29uc3QgcGx1Z2lucyA9IFtcclxuICAgIGFsaWdubWVudFBsdWdpbixcclxuICAgIHJlc2l6ZWFibGVQbHVnaW4sXHJcbiAgICBpbWFnZVBsdWdpbixcclxuICAgIHZpZGVvUGx1Z2luXHJcbiAgXTtcclxuXHJcbiAgcmVxdWlyZSgnLi9EcmFmdC5zY3NzJyk7XHJcblxyXG4gIGNvbnN0IE5vdGUgPSBwcm9wcyA9PiB7XHJcblxyXG4gICAgLy8gcHJvcHMuY2hpbGRyZW47XHJcbiAgICBsZXQgaW5pdCA9IHVzZVJlZihmYWxzZSk7XHJcbiAgICBsZXQgaW5wdXRfZWwgPSB1c2VSZWYoKTtcclxuICAgIGxldCBkb21FZGl0b3IgPSB1c2VSZWYoKTtcclxuICAgIGNvbnN0IGlVTl9yZWYgPSB1c2VSZWYocHJvcHMuaVVOIHx8IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwKSk7XHJcbiAgICBjb25zdCBpVU4gPSBpVU5fcmVmLmN1cnJlbnQ7XHJcbiAgICAvLyBsZXQgZGVzY19pbml0ID0gdXNlUmVmKHRydWUpO1xyXG5cclxuXHJcbiAgICBsZXQgZGF0YSA9IHByb3BzLmRhdGE7XHJcbiAgICBsZXQgaXRlbV9kYXRhID0gZGF0YS5pdGVtX2RhdGE7XHJcbiAgICBsZXQgbmFtZSA9IGRhdGEubmFtZSB8fCBcIm5vdGVfZGF0YVwiO1xyXG4gICAgbGV0IGN1c3RvbSA9IGRhdGEuY3VzdG9tIHx8IFwiXCI7XHJcbiAgICBsZXQgbm90ZV9kYXRhID0gKHR5cGVvZiBpdGVtX2RhdGFbYCR7bmFtZX1gXSAhPSBcInVuZGVmaW5lZFwiKSA/IGl0ZW1fZGF0YVtgJHtuYW1lfWBdIDogXCJcIjtcclxuICAgIGxldCBnZXRFZGl0b3JDYWxsYmFjayA9IGRhdGEuZ2V0RWRpdG9yQ2FsbGJhY2s7XHJcbiAgICBsZXQgdXBkYXRlX3RyaWdnZXIgPSBkYXRhLnVwZGF0ZV90cmlnZ2VyO1xyXG5cclxuICAgIC8vIGxldCByZWdpc3RlciA9IHByb3BzLnJlZ2lzdGVyO1xyXG4gICAgbGV0IG5vdGVfb2JqO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYobm90ZV9kYXRhICE9IFwiXCIpe1xyXG4gICAgICAgIG5vdGVfb2JqID0gSlNPTi5wYXJzZSh1bmVzY2FwZShub3RlX2RhdGEpKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgdGhyb3cgXCJubyBlZGl0b3IgZGF0YSBhdmFpbGFibGVcIjtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmRlYnVnKFwibm90ZV9kYXRhIGNvbnZlcnNpb24gaXNzdWVcIiwgZSk7XHJcbiAgICAgICAgbm90ZV9vYmogPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtkcmFmdEVkaXRvciwgc2V0RHJhZnRFZGl0b3JdID0gKG5vdGVfZGF0YSAhPSBcIlwiICYmIHR5cGVvZiBub3RlX29iaiA9PSBcIm9iamVjdFwiKSA/XHJcbiAgICB1c2VTdGF0ZShFZGl0b3JTdGF0ZS5jcmVhdGVXaXRoQ29udGVudChjb252ZXJ0RnJvbVJhdyhub3RlX29iaikpKSA6XHJcbiAgICB1c2VTdGF0ZShFZGl0b3JTdGF0ZS5jcmVhdGVFbXB0eSgpKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICBpZihnZXRFZGl0b3JDYWxsYmFjayl7XHJcbiAgICAgICAgZ2V0RWRpdG9yQ2FsbGJhY2soW0VkaXRvclN0YXRlLCBkcmFmdEVkaXRvciwgc2V0RHJhZnRFZGl0b3IsIGNvbnZlcnRGcm9tUmF3XSk7XHJcbiAgICAgIH0vLyBpZlxyXG4gICAgfSxbXSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgaWYodXBkYXRlX3RyaWdnZXIpIHVwZGF0ZV90cmlnZ2VyKCk7XHJcbiAgICB9LFtkcmFmdEVkaXRvcl0pXHJcblxyXG4gICAgaWYoaW5pdC5jdXJyZW50ID09IGZhbHNlKXtcclxuXHJcbiAgICAgIGluaXQuY3VycmVudCA9IHRydWU7XHJcblxyXG4gICAgfS8vIGluaXQuY3VycmVudFxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZHJhZnRfZWRpdG9yXyR7aVVOfSBkcmFmdF9lZGl0b3IgJHtuYW1lLnJlcGxhY2UoXCJfZGF0YVwiLCBcIlwiKX0gJHtjdXN0b219YH0gXHJcbiAgICAgIGRhdGEtY29tcD17YERyYWZ0LU5vdGVgfT5cclxuICAgICAgICAgIDxFZGl0b3IgZWRpdG9yU3RhdGU9e2RyYWZ0RWRpdG9yfVxyXG4gICAgICAgICAgICByZWFkT25seT17dHJ1ZX1cclxuICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHtcclxuICAgICAgICAgICAgICAvKmRvIG5vdGhpbmcgLSBmaXggZm9yIGVycm9yOlxyXG4gICAgICAgICAgICAgIFRoZSBwcm9wIGBvbkNoYW5nZWAgaXMgbWFya2VkIGFzIHJlcXVpcmVkIGluIGBQbHVnaW5FZGl0b3JgLCBidXQgaXRzIHZhbHVlIGlzIGB1bmRlZmluZWRgLiovXHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIHBsdWdpbnM9e3BsdWdpbnN9XHJcbiAgICAgICAgICByZWY9e2RvbUVkaXRvcn0gLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH07Ly9vYnNlcnZlclxyXG5cclxuICBleHBvcnQgZGVmYXVsdCBOb3RlO1xyXG5cclxuICBjb25zdCBleGlzdHMgPSAoaXRlbSkgPT4ge1xyXG4gICAgcmV0dXJuIChpdGVtICE9IG51bGwgJiYgdHlwZW9mIGl0ZW0gIT0gXCJ1bmRlZmluZWRcIiAmJiBpdGVtICE9IGZhbHNlICYmIGl0ZW0gIT0gXCJcIikgPyB0cnVlIDogZmFsc2U7XHJcbiAgfVxyXG5cclxuLy8gTEFURVI6IHBhc3MgaW4gZGlmZmVyZW50IHRvb2xiYXJzIGZvciBkaWZmZXJlbnQgZWRpdG9yIHN0eWxlc1xyXG5cclxuLy8gZGIuZ2V0Q29sbGVjdGlvbignaXRlbXMnKS5maW5kKHtjYXRlZ29yeTpcIktyaXRhXCIsbm90ZV9kYXRhOnskbmU6XCJcIn19KVxyXG4vLyB7XFxcImJsb2Nrc1xcXCJcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Draft/Note.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/Draft/toolbars/Toolbar.js":
/*!*********************************************************************!*\
  !*** ./js/components/Narrator/components/Draft/toolbars/Toolbar.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_get_toolbar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/get_toolbar */ \"./js/components/Narrator/components/Draft/toolbars/lib/get_toolbar.js\");\n/* harmony import */ var _lib_toolbar_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/toolbar_loader */ \"./js/components/Narrator/components/Draft/toolbars/lib/toolbar_loader.js\");\n\n\n\n\nvar Toolbar = function Toolbar(props) {\n  var data = props.data;\n  var type_txt = data.type;\n  var toolbars = [];\n\n  if (Array.isArray(type_txt)) {\n    toolbars = type_txt.map(function (type) {\n      var toolbar_name = Object(_lib_get_toolbar__WEBPACK_IMPORTED_MODULE_1__[\"get_toolbar\"])(type);\n      var ToolbarButtons = _lib_toolbar_loader__WEBPACK_IMPORTED_MODULE_2__[\"default\"][toolbar_name];\n      return /*#__PURE__*/React.createElement(ToolbarButtons, {\n        data: data,\n        key: type\n      });\n    });\n  } else {\n    var toolbar_name = Object(_lib_get_toolbar__WEBPACK_IMPORTED_MODULE_1__[\"get_toolbar\"])(type_txt);\n    var ToolbarButtons = _lib_toolbar_loader__WEBPACK_IMPORTED_MODULE_2__[\"default\"][toolbar_name];\n    toolbars = [/*#__PURE__*/React.createElement(ToolbarButtons, {\n      data: data,\n      key: type_txt\n    })];\n  }\n\n  return /*#__PURE__*/React.createElement(react__WEBPACK_IMPORTED_MODULE_0__[\"Suspense\"], {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader_modal w3-modal active\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader\"\n    }, \"Loading...\"))\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"entry_toolbar\"\n  }, toolbars));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Toolbar);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvRHJhZnQvdG9vbGJhcnMvVG9vbGJhci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9EcmFmdC90b29sYmFycy9Ub29sYmFyLmpzPzNjMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtTdXNwZW5zZX0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge2dldF90b29sYmFyfSBmcm9tIFwiLi9saWIvZ2V0X3Rvb2xiYXJcIjtcclxuaW1wb3J0IHRvb2xiYXJfbG9hZGVyIGZyb20gXCIuL2xpYi90b29sYmFyX2xvYWRlclwiO1xyXG5cclxuY29uc3QgVG9vbGJhciA9IChwcm9wcykgPT4ge1xyXG5cclxuICBsZXQgZGF0YSA9IHByb3BzLmRhdGE7XHJcbiAgbGV0IHR5cGVfdHh0ID0gZGF0YS50eXBlO1xyXG4gIGxldCB0b29sYmFycyA9IFtdO1xyXG5cclxuICBpZihBcnJheS5pc0FycmF5KHR5cGVfdHh0KSl7XHJcbiAgICB0b29sYmFycyA9IHR5cGVfdHh0Lm1hcCgodHlwZSkgPT4ge1xyXG4gICAgICBsZXQgdG9vbGJhcl9uYW1lID0gZ2V0X3Rvb2xiYXIodHlwZSk7XHJcbiAgICAgIGxldCBUb29sYmFyQnV0dG9ucyA9IHRvb2xiYXJfbG9hZGVyW3Rvb2xiYXJfbmFtZV07XHJcbiAgICAgIHJldHVybiA8VG9vbGJhckJ1dHRvbnMgZGF0YT17ZGF0YX0ga2V5PXt0eXBlfS8+XHJcbiAgICB9KVxyXG4gIH1lbHNle1xyXG4gICAgbGV0IHRvb2xiYXJfbmFtZSA9IGdldF90b29sYmFyKHR5cGVfdHh0KTtcclxuICAgIGxldCBUb29sYmFyQnV0dG9ucyA9IHRvb2xiYXJfbG9hZGVyW3Rvb2xiYXJfbmFtZV07XHJcbiAgICB0b29sYmFycyA9IFs8VG9vbGJhckJ1dHRvbnMgZGF0YT17ZGF0YX0ga2V5PXt0eXBlX3R4dH0vPl07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2IGNsYXNzTmFtZT1cImxvYWRlcl9tb2RhbCB3My1tb2RhbCBhY3RpdmVcIj48ZGl2IGNsYXNzTmFtZT1cImxvYWRlclwiPkxvYWRpbmcuLi48L2Rpdj48L2Rpdj59ID5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJlbnRyeV90b29sYmFyXCI+XHJcbiAgICAgICAge3Rvb2xiYXJzfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvU3VzcGVuc2U+XHJcbiAgKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUb29sYmFyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Draft/toolbars/Toolbar.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/Draft/toolbars/lib/get_toolbar.js":
/*!*****************************************************************************!*\
  !*** ./js/components/Narrator/components/Draft/toolbars/lib/get_toolbar.js ***!
  \*****************************************************************************/
/*! exports provided: get_toolbar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"get_toolbar\", function() { return get_toolbar; });\nvar get_toolbar = function get_toolbar(name) {\n  switch (name) {\n    case \"comment\":\n    case \"basic\":\n      return \"BasicToolbar\";\n      break;\n\n    case \"block\":\n      return \"BlockToolbar\";\n      break;\n\n    case \"code\":\n      return \"CodeToolbar\";\n      break;\n\n    default:\n      return \"BasicToolbar\";\n  } // switch\n\n}; // get_toolbar//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvRHJhZnQvdG9vbGJhcnMvbGliL2dldF90b29sYmFyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci9jb21wb25lbnRzL0RyYWZ0L3Rvb2xiYXJzL2xpYi9nZXRfdG9vbGJhci5qcz8xNTViIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuZXhwb3J0IGNvbnN0IGdldF90b29sYmFyID0gbmFtZSA9PiB7XHJcbiAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICBjYXNlIFwiY29tbWVudFwiOlxyXG4gICAgY2FzZSBcImJhc2ljXCI6XHJcbiAgICAgIHJldHVybiBcIkJhc2ljVG9vbGJhclwiO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJibG9ja1wiOlxyXG4gICAgICByZXR1cm4gXCJCbG9ja1Rvb2xiYXJcIjtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiY29kZVwiOlxyXG4gICAgICByZXR1cm4gXCJDb2RlVG9vbGJhclwiO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBcIkJhc2ljVG9vbGJhclwiO1xyXG4gIH0vLyBzd2l0Y2hcclxufS8vIGdldF90b29sYmFyXHJcbiJdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFaQTtBQUNBO0FBYUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Draft/toolbars/lib/get_toolbar.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/Draft/toolbars/lib/toolbar_loader.js":
/*!********************************************************************************!*\
  !*** ./js/components/Narrator/components/Draft/toolbars/lib/toolbar_loader.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nvar BasicToolbar = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__[\"lazy\"])(function () {\n  return __webpack_require__.e(/*! import() | templates/draft/formTemplates */ \"templates/draft/formTemplates\").then(__webpack_require__.bind(null, /*! ../components/BasicToolbar */ \"./js/components/Narrator/components/Draft/toolbars/components/BasicToolbar.js\"));\n}); // const FullToolbar = lazy(() => import(/* webpackChunkName: \"templates/draft/formTemplates\" */ `../components/FullToolbar`));\n\nvar BlockToolbar = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__[\"lazy\"])(function () {\n  return __webpack_require__.e(/*! import() | templates/draft/formTemplates */ \"templates/draft/formTemplates\").then(__webpack_require__.bind(null, /*! ../components/BlockToolbar */ \"./js/components/Narrator/components/Draft/toolbars/components/BlockToolbar.js\"));\n});\nvar CodeToolbar = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__[\"lazy\"])(function () {\n  return __webpack_require__.e(/*! import() | templates/draft/formTemplates */ \"templates/draft/formTemplates\").then(__webpack_require__.bind(null, /*! ../components/CodeToolbar */ \"./js/components/Narrator/components/Draft/toolbars/components/CodeToolbar.js\"));\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  BasicToolbar: BasicToolbar,\n\n  /*FullToolbar,*/\n  BlockToolbar: BlockToolbar,\n  CodeToolbar: CodeToolbar\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvRHJhZnQvdG9vbGJhcnMvbGliL3Rvb2xiYXJfbG9hZGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci9jb21wb25lbnRzL0RyYWZ0L3Rvb2xiYXJzL2xpYi90b29sYmFyX2xvYWRlci5qcz85YmJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7bGF6eX0gZnJvbSAncmVhY3QnO1xyXG5cclxuY29uc3QgQmFzaWNUb29sYmFyID0gbGF6eSgoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJ0ZW1wbGF0ZXMvZHJhZnQvZm9ybVRlbXBsYXRlc1wiICovIGAuLi9jb21wb25lbnRzL0Jhc2ljVG9vbGJhcmApKTtcclxuXHJcbi8vIGNvbnN0IEZ1bGxUb29sYmFyID0gbGF6eSgoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJ0ZW1wbGF0ZXMvZHJhZnQvZm9ybVRlbXBsYXRlc1wiICovIGAuLi9jb21wb25lbnRzL0Z1bGxUb29sYmFyYCkpO1xyXG5cclxuY29uc3QgQmxvY2tUb29sYmFyID0gbGF6eSgoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJ0ZW1wbGF0ZXMvZHJhZnQvZm9ybVRlbXBsYXRlc1wiICovIGAuLi9jb21wb25lbnRzL0Jsb2NrVG9vbGJhcmApKTtcclxuXHJcbmNvbnN0IENvZGVUb29sYmFyID0gbGF6eSgoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJ0ZW1wbGF0ZXMvZHJhZnQvZm9ybVRlbXBsYXRlc1wiICovIGAuLi9jb21wb25lbnRzL0NvZGVUb29sYmFyYCkpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge0Jhc2ljVG9vbGJhciwvKkZ1bGxUb29sYmFyLCovIEJsb2NrVG9vbGJhciwgQ29kZVRvb2xiYXJ9O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Draft/toolbars/lib/toolbar_loader.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/Loader/Loader.js":
/*!************************************************************!*\
  !*** ./js/components/Narrator/components/Loader/Loader.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"./node_modules/@babel/runtime/helpers/extends.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n\n\nvar _excluded = [\"type\", \"prefix\", \"name\", \"iUN\", \"variants\", \"inner\", \"children\"],\n    _excluded2 = [\"variants\"];\n\n\nvar _require = __webpack_require__(/*! ../../tools/class_maker */ \"./js/components/Narrator/tools/class_maker.js\"),\n    class_maker = _require.class_maker;\n\nvar Loader = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_2__[\"forwardRef\"])(function (_ref, ref) {\n  var type = _ref.type,\n      _ref$prefix = _ref.prefix,\n      prefix = _ref$prefix === void 0 ? \"\" : _ref$prefix,\n      _ref$name = _ref.name,\n      name = _ref$name === void 0 ? \"\" : _ref$name,\n      iUN = _ref.iUN,\n      _ref$variants = _ref.variants,\n      variants = _ref$variants === void 0 ? \"\" : _ref$variants,\n      _ref$inner = _ref.inner,\n      inner = _ref$inner === void 0 ? {} : _ref$inner,\n      children = _ref.children,\n      rest = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(_ref, _excluded);\n\n  if (ref != undefined) rest.ref = ref; // variants are whatever you want to appear in the classname  of the loader wrapper\n  // inner_variant is for variants set in the inner property for the actial loader element(s)\n\n  var _inner$variants = inner.variants,\n      inner_variants = _inner$variants === void 0 ? \"\" : _inner$variants,\n      inner_rest = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(inner, _excluded2);\n\n  var iUN_ref = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(Math.round(Math.random() * 10000));\n  iUN = typeof iUN == \"undefined\" ? iUN_ref.current : iUN;\n  var loader_display;\n\n  switch (type) {\n    case \"bounce\":\n    case \"dots\":\n      loader_display = /*#__PURE__*/React.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n        className: \"\".concat(class_maker({\n          prefix: prefix,\n          name: name,\n          main: \"bounce-loader\",\n          iUN: iUN\n        }), \" \").concat(inner_variants)\n      }, inner_rest), /*#__PURE__*/React.createElement(\"div\", {\n        className: class_maker({\n          prefix: prefix,\n          name: name,\n          main: \"bounce1\",\n          iUN: iUN\n        })\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: class_maker({\n          prefix: prefix,\n          name: name,\n          main: \"bounce2\",\n          iUN: iUN\n        })\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: class_maker({\n          prefix: prefix,\n          name: name,\n          main: \"bounce3\",\n          iUN: iUN\n        })\n      }));\n      break;\n\n    case \"spin\":\n    case \"spinner\":\n    default:\n      loader_display = /*#__PURE__*/React.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n        className: \"\".concat(class_maker({\n          prefix: prefix,\n          name: name,\n          main: \"loader\",\n          iUN: iUN\n        }), \" \").concat(inner_variants)\n      }, inner_rest), children);\n\n    /*<div className={class_maker({prefix,name,main:\"loader_wrapper\",iUN})} ref={observer}\r\n      onClick={(e) => { observer(e.target,true); }}  data-observer=\"loader\">*/\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n    className: \"\".concat(class_maker({\n      prefix: prefix,\n      name: name,\n      main: \"loader_wrapper\",\n      iUN: iUN\n    }), \" \").concat(variants),\n    \"data-comp\": \"Loader\"\n  }, rest, {\n    \"data-comp\": \"Loader\"\n  }), loader_display);\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (Loader);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvTG9hZGVyL0xvYWRlci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9Mb2FkZXIvTG9hZGVyLmpzPzIxNjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZVN0YXRlLCBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5jb25zdCB7Y2xhc3NfbWFrZXJ9ID0gcmVxdWlyZSgnLi4vLi4vdG9vbHMvY2xhc3NfbWFrZXInKTtcclxuXHJcbmNvbnN0IExvYWRlciA9IGZvcndhcmRSZWYoKHtcclxuICB0eXBlLFxyXG4gIHByZWZpeCA9IFwiXCIsXHJcbiAgbmFtZSA9IFwiXCIsXHJcbiAgaVVOLFxyXG4gIHZhcmlhbnRzID0gXCJcIixcclxuICBpbm5lciA9IHt9LFxyXG4gIGNoaWxkcmVuLFxyXG4gIC4uLnJlc3RcclxufSxyZWYpID0+IHtcclxuXHJcbiAgaWYocmVmICE9IHVuZGVmaW5lZCkgcmVzdC5yZWYgPSByZWY7XHJcbiAgXHJcbiAgLy8gdmFyaWFudHMgYXJlIHdoYXRldmVyIHlvdSB3YW50IHRvIGFwcGVhciBpbiB0aGUgY2xhc3NuYW1lICBvZiB0aGUgbG9hZGVyIHdyYXBwZXJcclxuICAvLyBpbm5lcl92YXJpYW50IGlzIGZvciB2YXJpYW50cyBzZXQgaW4gdGhlIGlubmVyIHByb3BlcnR5IGZvciB0aGUgYWN0aWFsIGxvYWRlciBlbGVtZW50KHMpXHJcbiAgY29uc3Qge3ZhcmlhbnRzOiBpbm5lcl92YXJpYW50cyA9IFwiXCIsIC4uLmlubmVyX3Jlc3R9ID0gaW5uZXI7XHJcblxyXG4gIGNvbnN0IGlVTl9yZWYgPSB1c2VSZWYoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMDApKTtcclxuICBpVU4gPSAodHlwZW9mIGlVTiA9PSBcInVuZGVmaW5lZFwiKSA/IGlVTl9yZWYuY3VycmVudCA6IGlVTjtcclxuXHJcbiAgbGV0IGxvYWRlcl9kaXNwbGF5O1xyXG5cclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgXCJib3VuY2VcIjpcclxuICAgIGNhc2UgXCJkb3RzXCI6XHJcbiAgICAgIGxvYWRlcl9kaXNwbGF5ID0gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtjbGFzc19tYWtlcih7cHJlZml4LG5hbWUsbWFpbjpcImJvdW5jZS1sb2FkZXJcIixpVU59KX0gJHtpbm5lcl92YXJpYW50c31gfSB7Li4uaW5uZXJfcmVzdH0gPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzX21ha2VyKHtwcmVmaXgsbmFtZSxtYWluOlwiYm91bmNlMVwiLGlVTn0pfT48L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc19tYWtlcih7cHJlZml4LG5hbWUsbWFpbjpcImJvdW5jZTJcIixpVU59KX0+PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NfbWFrZXIoe3ByZWZpeCxuYW1lLG1haW46XCJib3VuY2UzXCIsaVVOfSl9PjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJzcGluXCI6XHJcbiAgICBjYXNlIFwic3Bpbm5lclwiOlxyXG4gICAgZGVmYXVsdDpcclxuICAgICAgbG9hZGVyX2Rpc3BsYXkgPSAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2NsYXNzX21ha2VyKHtwcmVmaXgsbmFtZSxtYWluOlwibG9hZGVyXCIsaVVOfSl9ICR7aW5uZXJfdmFyaWFudHN9YH0gey4uLmlubmVyX3Jlc3R9PlxyXG4gICAgICAgICAge2NoaWxkcmVufVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgICAvKjxkaXYgY2xhc3NOYW1lPXtjbGFzc19tYWtlcih7cHJlZml4LG5hbWUsbWFpbjpcImxvYWRlcl93cmFwcGVyXCIsaVVOfSl9IHJlZj17b2JzZXJ2ZXJ9XHJcbiAgICAgICAgb25DbGljaz17KGUpID0+IHsgb2JzZXJ2ZXIoZS50YXJnZXQsdHJ1ZSk7IH19ICBkYXRhLW9ic2VydmVyPVwibG9hZGVyXCI+Ki9cclxuICB9XHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtjbGFzc19tYWtlcih7cHJlZml4LG5hbWUsbWFpbjpcImxvYWRlcl93cmFwcGVyXCIsaVVOfSl9ICR7dmFyaWFudHN9YH0gXHJcbiAgICBkYXRhLWNvbXA9e2BMb2FkZXJgfVxyXG4gICAgey4uLnJlc3R9IFxyXG4gICAgZGF0YS1jb21wPXtgTG9hZGVyYH0gPlxyXG4gICAgICB7bG9hZGVyX2Rpc3BsYXl9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvYWRlcjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQXBCQTtBQUNBO0FBcUJBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFPQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Loader/Loader.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/ProfileIcon/ProfileIcon.js":
/*!**********************************************************************!*\
  !*** ./js/components/Narrator/components/ProfileIcon/ProfileIcon.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _sunzao_d3po_itkr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunzao/d3po_itkr */ \"./node_modules/@sunzao/d3po_itkr/d3po_ITKR.js\");\n/* harmony import */ var _sunzao_d3po_itkr__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_sunzao_d3po_itkr__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n // import MasterImage from '../../../../../../core/d3po_ITKR/src/app.d3po_ITKR';\n\n // console.log(\"info_icon ready\");\n\nvar _require = __webpack_require__(/*! ../../tools/html_decode.js */ \"./js/components/Narrator/tools/html_decode.js\"),\n    htmlDecode = _require.htmlDecode;\n\nvar _require2 = __webpack_require__(/*! ../../tools/has_extra_data.js */ \"./js/components/Narrator/tools/has_extra_data.js\"),\n    has_extra_data = _require2.has_extra_data;\n\nvar _require3 = __webpack_require__(/*! ../../tools/get_default_image.js */ \"./js/components/Narrator/tools/get_default_image.js\"),\n    get_default_image = _require3.get_default_image;\n\nvar _require4 = __webpack_require__(/*! ../../tools/exists.js */ \"./js/components/Narrator/tools/exists.js\"),\n    exists = _require4.exists;\n\nvar _require5 = __webpack_require__(/*! ../../tools/detect_project_type */ \"./js/components/Narrator/tools/detect_project_type.js\"),\n    detect_project_type = _require5.detect_project_type;\n\n__webpack_require__(/*! ./ProfileIcon.scss */ \"./js/components/Narrator/components/ProfileIcon/ProfileIcon.scss\");\n/**\r\n * @module ProfileIcon\r\n * @desc self explanitory\r\n * @category display\r\n * @subcategory icons\r\n * @param {object} props\r\n * @example\r\n * // set deep dive to true to run default callback go_to_profile\r\n * let p_data = {\r\n *   // item:data,\r\n *   preset_data:data.preset_data,\r\n *   name: \"clip_profile\",\r\n *   // callback: callbackName\r\n *   deep_dive:true,\r\n *   // deep_dive: callbackName,\r\n *   // init_stage: 2,\r\n *   // fallback: \"icon\"\r\n * }\r\n * <ProfileIcon data={p_data}/>\r\n *\r\n * // you can also omit item and just pass in the preset_data\r\n *\r\n * // add a callback to deep_dive to use a different callback that the default\r\n * <ProfileIcon data={{ item:data, name: \"clip_profile\", deep_dive: callbackName}}/>\r\n *\r\n */\n\n/**\r\n * @file\r\n */\n\n\nvar ProfileIcon = function ProfileIcon(props) {\n  //sample:\n  // <AWrapr tVar={tVar} ></AWrapr>\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(false),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState, 2),\n      imgError = _useState2[0],\n      setImgError = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(false),\n      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3, 2),\n      textOnly = _useState4[0],\n      setTextOnly = _useState4[1];\n\n  var init = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(false);\n  /**\r\n  * @member data\r\n  * @type {object}\r\n  * @prop {object} props.data\r\n  * @prop {object} [data.item] item data object\r\n  * @prop {object} [item.preset_data] user/owner preset data\r\n  * @prop {string} data.name element class name tags\r\n  * @prop {function} [callback = callbackName] can take a callback fn\r\n  * @prop {boolean} [deep_dive = false] also uses deep_dive = callbackName\r\n  * @prop {number} [init_stage = 2] can force an inital stage for testing\r\n  * @prop {string} [fallback = \"icon\"] can fallback to an site image or an icon element\r\n  *\r\n  */\n\n  var data = exists(props.data) ? props.data : props;\n  var item = data.item || {};\n  var no_class = data.no_class || false;\n  var preset_data = exists(item.preset_data) ? item.preset_data : data.preset_data;\n  var name = data.name || \"\";\n  var tag = data.tag || \"\";\n  var fallback = data.fallback || \"icon\"; // \"icon\" || \"image\"\n\n  var text_only_mode = data.text_only_mode || false;\n  var init_stage = data.init_stage || 1;\n  var imageStage = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(init_stage); // set the image stage\n\n  if (init.current == false) {\n    // determine the initial state\n    if (preset_data && exists(preset_data.items) && exists(preset_data.items.image) && exists(preset_data.items.image.value) && preset_data.items.image.value != \"unavailable\") {// were in stage 1, continue\n    } else if (preset_data && exists(preset_data.defaults) && exists(preset_data.defaults.image) && exists(preset_data.defaults.image.value) && preset_data.defaults.image.value != \"unavailable\") {\n      imageStage.current = 2;\n    } else {\n      imageStage.current = 3;\n    }\n  } // init\n  // if no callback is provided && deep_dive == true, runs go_to_profile\n\n\n  var deep_dive = exists(data.deep_dive) ? data.deep_dive : false;\n  var iUN_ref = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"])(Math.round(Math.random() * 10000));\n  var iUN = data.iUN || iUN_ref.current;\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(0),\n      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5, 2),\n      val = _useState6[0],\n      setVal = _useState6[1]; // integer state\n\n\n  var forceUpdate = function forceUpdate() {\n    setVal(function (val) {\n      return ++val;\n    }); // update the state to force render\n  }; // forceUpdate\n\n  /**\r\n   * @member img_error\r\n   * @param  {object} obj not needed here\r\n   * @desc sets the imageStage to a new tier (up to 3) with each error - start with desired image,\r\n   * onerror fall back to default image, on error again fall back to site image or use icon\r\n   * @return {void}     [description]\r\n   */\n\n\n  var img_error = function img_error(obj) {\n    var meseeks = \"myerror\"; // if(imgError == false){\n    //   setImgError(true);\n    //   setTextOnly(true);\n    //   // this.setState({text_only: true, img_error: true});\n    // }//if\n\n    if (imageStage.current == 1 && preset_data && exists(preset_data.defaults) && exists(preset_data.defaults.image && exists(preset_data.defaults.image.value) && preset_data.defaults.image.value != \"unavailable\")) {\n      // make sure the defaults exist\n      imageStage.current = 2;\n    } else {\n      imageStage.current = 3;\n    }\n\n    forceUpdate();\n  }; // img_error\n\n\n  var get_path = function get_path() {\n    var path_array = location.pathname.split(\"/\"); // this shouldn't be empty - if it is ill need to do something\n\n    return path_array[1];\n  };\n\n  var go_to_profile = function go_to_profile() {\n    console.warn(\"[ProfileIcon] go_to_profile clicked!\");\n    preset_data;\n    var project = preset_data.project;\n    var viewer_id = VIEWER_DATA.project_id; // let preset_id = preset_data.user.user_id;\n    // let preset_alias = preset_data.project.alias;\n\n    var type = detect_project_type(_objectSpread({}, project));\n    var preset_alias = type == \"project\" && project.alias.includes(project.parent_project) ? \"\".concat(project.parent_name, \"/\").concat(project.path) : project.alias;\n    var path = get_path(); // let is_preset_owner = (viewer_id == preset_id) ? true : false;// deprecated\n    // deprecated?\n    // let is_on_preset_page = location.href.includes(`/${path}/${preset_id}`) ? true : false;\n    // let is_on_owner_page = (location.href.includes(`/${path}/${viewer_id}`) || location.pathname == `/${path}/`) ? true : false;\n    // !location.href.includes() ||\n    // if(is_preset_owner && is_on_owner_page) return;\n    // let profile_url = `${location.origin}/core/${preset_id}`;\n\n    var profile_url = \"\".concat(location.origin, \"/core/\").concat(preset_alias); // goto project page\n\n    console.warn(\"[ProfileIcon] go_to_profile url = \", profile_url);\n    location.replace(profile_url);\n  }; // go_to_profile\n  // get the image data from the preset\n\n\n  var image_item = imageStage.current == 1 ? preset_data.items.image : imageStage.current == 2 ? preset_data.defaults.image : null;\n  var extra = exists(image_item) && exists(image_item.extra) ? has_extra_data({\n    extra: image_item.extra,\n    layout: \"profile\"\n  }, true) : null; // i need the profile extra or use the default\n  //if i need type \"verbose\" && a certain layout - it won't return true unless its there. if its a legacy version it will come back true\n  // let icon_image = (exists(extra) && extra.has_extra) ? image_item.extra : (exists(image_item) && exists(image_item.value)) ? image_item.value :  get_default_image();//  get user defaults instead\n\n  var icon_image = exists(image_item) ? image_item.value : get_default_image(); // NOTE: test for stage2 image\n  // let icon_image = get_default_image();// test default stage2 image\n  // i need 3 stages here,\n  // 1. try the desired image\n  // 2. try the backup image (default)\n  // 3. either use the sites default image or use a user icon instead\n  // return null;\n\n  var master_image = null;\n  var accept_image = imageStage.current != 3 || imageStage.current == 3 && fallback != \"icon\" ? true : false;\n  var use_callback = exists(data.callback) ? data.callback : exists(data.deep_dive) && typeof data.deep_dive != \"boolean\" ? data.deep_dive : go_to_profile;\n\n  if (accept_image) {\n    var my_icon_str = name + \"_icon_img\";\n    var my_scale = icon_image.includes(\"flame.png\") ? 1 : 2;\n    var img_data = {\n      varName: \"\".concat(my_icon_str),\n      url: icon_image,\n      type: \"profile\",\n      custom_class: \"\".concat(my_icon_str, \" \"),\n      canvas_class: no_class ? \"\" : \"d3-profile-rounded\",\n      image_class: no_class ? \"\" : \"d3-profile-rounded\",\n      width: 100,\n      height: 100,\n      scale: my_scale,\n      mode: \"image\",\n      stop_bubble: true,\n      auto_validate: true,\n      layout: [\"profile\", \"thumbnail\"],\n      has_error_callout: true,\n      error_callout_params: [img_error, {\n        /*state,\"pId\":rich_image_cont_id,*/\n        \"mod\": \"rich\"\n        /*\"tObj\":trans_obj*/\n\n      }] // default_img: default_image\n\n    };\n\n    if (exists(extra) && extra.has_extra) {\n      img_data.extra = image_item.extra; // this is the whole thing (all the layout variations)\n\n      img_data.mode = \"auto\"; // i need to read the extra and see if the dimensions work for the display area,\n      // in this case it needs profile or thumbnail or custom with the same width and height - otherwise do nothing\n      // needs to use profile or thumbnail layout or default image (no extra) - can also send a different img_url (icon_image)\n      //also if it has multiple images, look for the profile or thumbnail and get its extra data\n    } // end if\n    // let deep_dive = (s.app_state.display_data != \"info\" || s.app_state.display_data == \"info\" &&\n    // tVar.myIn_data_type == \"folder\" || s.app_state.display_data == \"info\" &&\n    // tVar.myIn_data_type == \"preset\") ? true : false;\n    // let deep_dive = true;\n\n\n    if (exists(deep_dive)) {\n      img_data.has_callout = \"true\";\n      img_data.callout_params = [use_callback\n      /*, item*/\n      ];\n    } // if deep_dive\n    // // add .extra = [do i need extra with thumbnails? - lets start with no]\n    // [ok lets try yes - why modify images if you don't use them?]\n    // extra:data.extra,\n    // master_image = (\n    //   <MasterImage data={img_data} />\n    // ) ;\n\n\n    master_image = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useMemo\"])(function () {\n      return /*#__PURE__*/React.createElement(_sunzao_d3po_itkr__WEBPACK_IMPORTED_MODULE_3___default.a, {\n        data: img_data\n      });\n    }, [img_data]);\n  } // accept_image\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(name, \" ProfileIcon_icon_wrapper ProfileIcon_icon_wrapper_\").concat(iUN, \" \").concat(tag),\n    \"data-comp\": \"ProfileIcon\"\n  }, !text_only_mode && accept_image ? master_image : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(name, \"_icon ProfileIcon_icon d3-ico d3-ico-btn icon-user\"),\n    key: \"ProfileIcon_icon_\".concat(iUN),\n    onClick: function onClick(e) {\n      e.preventDefault();\n      e.persist();\n      use_callback(e);\n    }\n  }));\n}; // ProfileIcon\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ProfileIcon);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvUHJvZmlsZUljb24vUHJvZmlsZUljb24uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvUHJvZmlsZUljb24vUHJvZmlsZUljb24uanM/ODA2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuICBpbXBvcnQgLypSZWFjdCwqLyB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbiAgLy8gaW1wb3J0IE1hc3RlckltYWdlIGZyb20gJy4uLy4uLy4uLy4uLy4uLy4uL2NvcmUvZDNwb19JVEtSL3NyYy9hcHAuZDNwb19JVEtSJztcclxuICBpbXBvcnQgTWFzdGVySW1hZ2UgZnJvbSAnQHN1bnphby9kM3BvX2l0a3InO1xyXG5cclxuICAvLyBjb25zb2xlLmxvZyhcImluZm9faWNvbiByZWFkeVwiKTtcclxuXHJcbiAgY29uc3Qge2h0bWxEZWNvZGV9ID0gcmVxdWlyZSgnLi4vLi4vdG9vbHMvaHRtbF9kZWNvZGUuanMnKTtcclxuICBjb25zdCB7aGFzX2V4dHJhX2RhdGF9ID0gcmVxdWlyZSgnLi4vLi4vdG9vbHMvaGFzX2V4dHJhX2RhdGEuanMnKTtcclxuICBjb25zdCB7Z2V0X2RlZmF1bHRfaW1hZ2V9ID0gcmVxdWlyZSgnLi4vLi4vdG9vbHMvZ2V0X2RlZmF1bHRfaW1hZ2UuanMnKTtcclxuICBjb25zdCB7ZXhpc3RzfSA9IHJlcXVpcmUoJy4uLy4uL3Rvb2xzL2V4aXN0cy5qcycpO1xyXG4gIGNvbnN0IHtkZXRlY3RfcHJvamVjdF90eXBlfSA9IHJlcXVpcmUoJy4uLy4uL3Rvb2xzL2RldGVjdF9wcm9qZWN0X3R5cGUnKTtcclxuXHJcbiAgcmVxdWlyZSgnLi9Qcm9maWxlSWNvbi5zY3NzJyk7XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbW9kdWxlIFByb2ZpbGVJY29uXHJcbiAgICogQGRlc2Mgc2VsZiBleHBsYW5pdG9yeVxyXG4gICAqIEBjYXRlZ29yeSBkaXNwbGF5XHJcbiAgICogQHN1YmNhdGVnb3J5IGljb25zXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBzZXQgZGVlcCBkaXZlIHRvIHRydWUgdG8gcnVuIGRlZmF1bHQgY2FsbGJhY2sgZ29fdG9fcHJvZmlsZVxyXG4gICAqIGxldCBwX2RhdGEgPSB7XHJcbiAgICogICAvLyBpdGVtOmRhdGEsXHJcbiAgICogICBwcmVzZXRfZGF0YTpkYXRhLnByZXNldF9kYXRhLFxyXG4gICAqICAgbmFtZTogXCJjbGlwX3Byb2ZpbGVcIixcclxuICAgKiAgIC8vIGNhbGxiYWNrOiBjYWxsYmFja05hbWVcclxuICAgKiAgIGRlZXBfZGl2ZTp0cnVlLFxyXG4gICAqICAgLy8gZGVlcF9kaXZlOiBjYWxsYmFja05hbWUsXHJcbiAgICogICAvLyBpbml0X3N0YWdlOiAyLFxyXG4gICAqICAgLy8gZmFsbGJhY2s6IFwiaWNvblwiXHJcbiAgICogfVxyXG4gICAqIDxQcm9maWxlSWNvbiBkYXRhPXtwX2RhdGF9Lz5cclxuICAgKlxyXG4gICAqIC8vIHlvdSBjYW4gYWxzbyBvbWl0IGl0ZW0gYW5kIGp1c3QgcGFzcyBpbiB0aGUgcHJlc2V0X2RhdGFcclxuICAgKlxyXG4gICAqIC8vIGFkZCBhIGNhbGxiYWNrIHRvIGRlZXBfZGl2ZSB0byB1c2UgYSBkaWZmZXJlbnQgY2FsbGJhY2sgdGhhdCB0aGUgZGVmYXVsdFxyXG4gICAqIDxQcm9maWxlSWNvbiBkYXRhPXt7IGl0ZW06ZGF0YSwgbmFtZTogXCJjbGlwX3Byb2ZpbGVcIiwgZGVlcF9kaXZlOiBjYWxsYmFja05hbWV9fS8+XHJcbiAgICpcclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQGZpbGVcclxuICAgKi9cclxuXHJcbiAgY29uc3QgUHJvZmlsZUljb24gPSAocHJvcHMpID0+IHtcclxuXHJcblxyXG4gICAgLy9zYW1wbGU6XHJcbiAgICAvLyA8QVdyYXByIHRWYXI9e3RWYXJ9ID48L0FXcmFwcj5cclxuICAgIGxldCBbaW1nRXJyb3Isc2V0SW1nRXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgbGV0IFt0ZXh0T25seSwgc2V0VGV4dE9ubHldID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgbGV0IGluaXQgPSB1c2VSZWYoZmFsc2UpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgKiBAbWVtYmVyIGRhdGFcclxuICAgICogQHR5cGUge29iamVjdH1cclxuICAgICogQHByb3Age29iamVjdH0gcHJvcHMuZGF0YVxyXG4gICAgKiBAcHJvcCB7b2JqZWN0fSBbZGF0YS5pdGVtXSBpdGVtIGRhdGEgb2JqZWN0XHJcbiAgICAqIEBwcm9wIHtvYmplY3R9IFtpdGVtLnByZXNldF9kYXRhXSB1c2VyL293bmVyIHByZXNldCBkYXRhXHJcbiAgICAqIEBwcm9wIHtzdHJpbmd9IGRhdGEubmFtZSBlbGVtZW50IGNsYXNzIG5hbWUgdGFnc1xyXG4gICAgKiBAcHJvcCB7ZnVuY3Rpb259IFtjYWxsYmFjayA9IGNhbGxiYWNrTmFtZV0gY2FuIHRha2UgYSBjYWxsYmFjayBmblxyXG4gICAgKiBAcHJvcCB7Ym9vbGVhbn0gW2RlZXBfZGl2ZSA9IGZhbHNlXSBhbHNvIHVzZXMgZGVlcF9kaXZlID0gY2FsbGJhY2tOYW1lXHJcbiAgICAqIEBwcm9wIHtudW1iZXJ9IFtpbml0X3N0YWdlID0gMl0gY2FuIGZvcmNlIGFuIGluaXRhbCBzdGFnZSBmb3IgdGVzdGluZ1xyXG4gICAgKiBAcHJvcCB7c3RyaW5nfSBbZmFsbGJhY2sgPSBcImljb25cIl0gY2FuIGZhbGxiYWNrIHRvIGFuIHNpdGUgaW1hZ2Ugb3IgYW4gaWNvbiBlbGVtZW50XHJcbiAgICAqXHJcbiAgICAqL1xyXG4gICAgbGV0IGRhdGEgPSBleGlzdHMocHJvcHMuZGF0YSkgPyBwcm9wcy5kYXRhIDogcHJvcHM7XHJcbiAgICBsZXQgaXRlbSA9IGRhdGEuaXRlbSB8fCB7fTtcclxuICAgIGxldCBub19jbGFzcyA9IGRhdGEubm9fY2xhc3MgfHwgZmFsc2U7XHJcbiAgICBsZXQgcHJlc2V0X2RhdGEgPSBleGlzdHMoaXRlbS5wcmVzZXRfZGF0YSkgPyBpdGVtLnByZXNldF9kYXRhIDogZGF0YS5wcmVzZXRfZGF0YTtcclxuICAgIGxldCBuYW1lID0gZGF0YS5uYW1lIHx8IFwiXCI7XHJcbiAgICBsZXQgdGFnID0gZGF0YS50YWcgfHwgXCJcIjtcclxuICAgIGxldCBmYWxsYmFjayA9IGRhdGEuZmFsbGJhY2sgfHwgXCJpY29uXCI7Ly8gXCJpY29uXCIgfHwgXCJpbWFnZVwiXHJcbiAgICBsZXQgdGV4dF9vbmx5X21vZGUgPSBkYXRhLnRleHRfb25seV9tb2RlIHx8IGZhbHNlO1xyXG5cclxuICAgIGxldCBpbml0X3N0YWdlID0gZGF0YS5pbml0X3N0YWdlIHx8IDE7XHJcbiAgICBsZXQgaW1hZ2VTdGFnZSA9IHVzZVJlZihpbml0X3N0YWdlKTtcclxuICAgIC8vIHNldCB0aGUgaW1hZ2Ugc3RhZ2VcclxuICAgIGlmKGluaXQuY3VycmVudCA9PSBmYWxzZSl7XHJcbiAgICAgIC8vIGRldGVybWluZSB0aGUgaW5pdGlhbCBzdGF0ZVxyXG4gICAgICBpZihwcmVzZXRfZGF0YSAmJiBleGlzdHMocHJlc2V0X2RhdGEuaXRlbXMpICYmIGV4aXN0cyhwcmVzZXRfZGF0YS5pdGVtcy5pbWFnZSkgJiZcclxuICAgICAgZXhpc3RzKHByZXNldF9kYXRhLml0ZW1zLmltYWdlLnZhbHVlKSAmJiBwcmVzZXRfZGF0YS5pdGVtcy5pbWFnZS52YWx1ZSAhPSBcInVuYXZhaWxhYmxlXCIpe1xyXG4gICAgICAgIC8vIHdlcmUgaW4gc3RhZ2UgMSwgY29udGludWVcclxuICAgICAgfWVsc2UgaWYocHJlc2V0X2RhdGEgJiYgZXhpc3RzKHByZXNldF9kYXRhLmRlZmF1bHRzKSAmJiBleGlzdHMocHJlc2V0X2RhdGEuZGVmYXVsdHMuaW1hZ2UpICYmXHJcbiAgICAgIGV4aXN0cyhwcmVzZXRfZGF0YS5kZWZhdWx0cy5pbWFnZS52YWx1ZSkgJiYgcHJlc2V0X2RhdGEuZGVmYXVsdHMuaW1hZ2UudmFsdWUgIT0gXCJ1bmF2YWlsYWJsZVwiKXtcclxuICAgICAgICBpbWFnZVN0YWdlLmN1cnJlbnQgPSAyO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICBpbWFnZVN0YWdlLmN1cnJlbnQgPSAzO1xyXG4gICAgICB9XHJcbiAgICB9Ly8gaW5pdFxyXG5cclxuICAgIC8vIGlmIG5vIGNhbGxiYWNrIGlzIHByb3ZpZGVkICYmIGRlZXBfZGl2ZSA9PSB0cnVlLCBydW5zIGdvX3RvX3Byb2ZpbGVcclxuICAgIGxldCBkZWVwX2RpdmUgPSAoZXhpc3RzKGRhdGEuZGVlcF9kaXZlKSkgPyBkYXRhLmRlZXBfZGl2ZSA6IGZhbHNlO1xyXG5cclxuICAgIGxldCBpVU5fcmVmID0gdXNlUmVmKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwKSk7XHJcbiAgICBsZXQgaVVOID0gZGF0YS5pVU4gfHwgaVVOX3JlZi5jdXJyZW50O1xyXG5cclxuICAgIGNvbnN0IFt2YWwsIHNldFZhbF0gPSB1c2VTdGF0ZSgwKTsgLy8gaW50ZWdlciBzdGF0ZVxyXG4gICAgY29uc3QgZm9yY2VVcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgIHNldFZhbCh2YWwgPT4gKyt2YWwpOyAvLyB1cGRhdGUgdGhlIHN0YXRlIHRvIGZvcmNlIHJlbmRlclxyXG4gICAgfS8vIGZvcmNlVXBkYXRlXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbWVtYmVyIGltZ19lcnJvclxyXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBvYmogbm90IG5lZWRlZCBoZXJlXHJcbiAgICAgKiBAZGVzYyBzZXRzIHRoZSBpbWFnZVN0YWdlIHRvIGEgbmV3IHRpZXIgKHVwIHRvIDMpIHdpdGggZWFjaCBlcnJvciAtIHN0YXJ0IHdpdGggZGVzaXJlZCBpbWFnZSxcclxuICAgICAqIG9uZXJyb3IgZmFsbCBiYWNrIHRvIGRlZmF1bHQgaW1hZ2UsIG9uIGVycm9yIGFnYWluIGZhbGwgYmFjayB0byBzaXRlIGltYWdlIG9yIHVzZSBpY29uXHJcbiAgICAgKiBAcmV0dXJuIHt2b2lkfSAgICAgW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXHJcbiAgICBjb25zdCBpbWdfZXJyb3IgPSAob2JqKSA9PiB7XHJcbiAgICAgIGxldCBtZXNlZWtzID0gXCJteWVycm9yXCI7XHJcbiAgICAgIC8vIGlmKGltZ0Vycm9yID09IGZhbHNlKXtcclxuICAgICAgLy8gICBzZXRJbWdFcnJvcih0cnVlKTtcclxuICAgICAgLy8gICBzZXRUZXh0T25seSh0cnVlKTtcclxuICAgICAgLy8gICAvLyB0aGlzLnNldFN0YXRlKHt0ZXh0X29ubHk6IHRydWUsIGltZ19lcnJvcjogdHJ1ZX0pO1xyXG4gICAgICAvLyB9Ly9pZlxyXG4gICAgICBpZihpbWFnZVN0YWdlLmN1cnJlbnQgPT0gMSAmJiBwcmVzZXRfZGF0YSAmJiBleGlzdHMocHJlc2V0X2RhdGEuZGVmYXVsdHMpICYmIGV4aXN0cyhwcmVzZXRfZGF0YS5kZWZhdWx0cy5pbWFnZSAmJlxyXG4gICAgICBleGlzdHMocHJlc2V0X2RhdGEuZGVmYXVsdHMuaW1hZ2UudmFsdWUpICYmIHByZXNldF9kYXRhLmRlZmF1bHRzLmltYWdlLnZhbHVlICE9IFwidW5hdmFpbGFibGVcIikpe1xyXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgZGVmYXVsdHMgZXhpc3RcclxuICAgICAgICBpbWFnZVN0YWdlLmN1cnJlbnQgPSAyO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICBpbWFnZVN0YWdlLmN1cnJlbnQgPSAzO1xyXG4gICAgICB9XHJcbiAgICAgIGZvcmNlVXBkYXRlKCk7XHJcbiAgICB9Ly8gaW1nX2Vycm9yXHJcblxyXG4gICAgY29uc3QgZ2V0X3BhdGggPSAoKSA9PiB7XHJcbiAgICAgIGxldCBwYXRoX2FycmF5ID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoXCIvXCIpO1xyXG4gICAgICAvLyB0aGlzIHNob3VsZG4ndCBiZSBlbXB0eSAtIGlmIGl0IGlzIGlsbCBuZWVkIHRvIGRvIHNvbWV0aGluZ1xyXG4gICAgICByZXR1cm4gcGF0aF9hcnJheVsxXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBnb190b19wcm9maWxlID0gKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJbUHJvZmlsZUljb25dIGdvX3RvX3Byb2ZpbGUgY2xpY2tlZCFcIik7XHJcbiAgICAgIHByZXNldF9kYXRhO1xyXG4gICAgICBsZXQgcHJvamVjdCA9IHByZXNldF9kYXRhLnByb2plY3Q7XHJcbiAgICAgIGxldCB2aWV3ZXJfaWQgPSBWSUVXRVJfREFUQS5wcm9qZWN0X2lkO1xyXG4gICAgICAvLyBsZXQgcHJlc2V0X2lkID0gcHJlc2V0X2RhdGEudXNlci51c2VyX2lkO1xyXG4gICAgICAvLyBsZXQgcHJlc2V0X2FsaWFzID0gcHJlc2V0X2RhdGEucHJvamVjdC5hbGlhcztcclxuICAgICAgbGV0IHR5cGUgPSBkZXRlY3RfcHJvamVjdF90eXBlKHsuLi5wcm9qZWN0fSk7XHJcblxyXG4gICAgICBsZXQgcHJlc2V0X2FsaWFzID0gKHR5cGUgPT0gXCJwcm9qZWN0XCIgJiYgcHJvamVjdC5hbGlhcy5pbmNsdWRlcyhwcm9qZWN0LnBhcmVudF9wcm9qZWN0KSkgP1xyXG4gICAgICBgJHtwcm9qZWN0LnBhcmVudF9uYW1lfS8ke3Byb2plY3QucGF0aH1gIDogcHJvamVjdC5hbGlhcztcclxuXHJcbiAgICAgIGxldCBwYXRoID0gZ2V0X3BhdGgoKTtcclxuXHJcbiAgICAgIC8vIGxldCBpc19wcmVzZXRfb3duZXIgPSAodmlld2VyX2lkID09IHByZXNldF9pZCkgPyB0cnVlIDogZmFsc2U7Ly8gZGVwcmVjYXRlZFxyXG5cclxuICAgICAgLy8gZGVwcmVjYXRlZD9cclxuICAgICAgLy8gbGV0IGlzX29uX3ByZXNldF9wYWdlID0gbG9jYXRpb24uaHJlZi5pbmNsdWRlcyhgLyR7cGF0aH0vJHtwcmVzZXRfaWR9YCkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIC8vIGxldCBpc19vbl9vd25lcl9wYWdlID0gKGxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoYC8ke3BhdGh9LyR7dmlld2VyX2lkfWApIHx8IGxvY2F0aW9uLnBhdGhuYW1lID09IGAvJHtwYXRofS9gKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgLy8gIWxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoKSB8fFxyXG5cclxuICAgICAgLy8gaWYoaXNfcHJlc2V0X293bmVyICYmIGlzX29uX293bmVyX3BhZ2UpIHJldHVybjtcclxuXHJcbiAgICAgIC8vIGxldCBwcm9maWxlX3VybCA9IGAke2xvY2F0aW9uLm9yaWdpbn0vY29yZS8ke3ByZXNldF9pZH1gO1xyXG4gICAgICBsZXQgcHJvZmlsZV91cmwgPSBgJHtsb2NhdGlvbi5vcmlnaW59L2NvcmUvJHtwcmVzZXRfYWxpYXN9YDsvLyBnb3RvIHByb2plY3QgcGFnZVxyXG4gICAgICBjb25zb2xlLndhcm4oXCJbUHJvZmlsZUljb25dIGdvX3RvX3Byb2ZpbGUgdXJsID0gXCIscHJvZmlsZV91cmwpO1xyXG5cclxuICAgICAgbG9jYXRpb24ucmVwbGFjZShwcm9maWxlX3VybCk7XHJcbiAgICB9Ly8gZ29fdG9fcHJvZmlsZVxyXG5cclxuXHJcbiAgICAvLyBnZXQgdGhlIGltYWdlIGRhdGEgZnJvbSB0aGUgcHJlc2V0XHJcbiAgICBsZXQgaW1hZ2VfaXRlbSA9IChpbWFnZVN0YWdlLmN1cnJlbnQgPT0gMSkgPyBwcmVzZXRfZGF0YS5pdGVtcy5pbWFnZSA6XHJcbiAgICAoaW1hZ2VTdGFnZS5jdXJyZW50ID09IDIpID8gcHJlc2V0X2RhdGEuZGVmYXVsdHMuaW1hZ2UgOlxyXG4gICAgbnVsbDtcclxuXHJcbiAgICBsZXQgZXh0cmEgPSAoZXhpc3RzKGltYWdlX2l0ZW0pICYmIGV4aXN0cyhpbWFnZV9pdGVtLmV4dHJhKSkgPyBoYXNfZXh0cmFfZGF0YSh7ZXh0cmE6IGltYWdlX2l0ZW0uZXh0cmEsIGxheW91dDogXCJwcm9maWxlXCJ9LCB0cnVlKSA6IG51bGw7Ly8gaSBuZWVkIHRoZSBwcm9maWxlIGV4dHJhIG9yIHVzZSB0aGUgZGVmYXVsdFxyXG5cclxuICAgIC8vaWYgaSBuZWVkIHR5cGUgXCJ2ZXJib3NlXCIgJiYgYSBjZXJ0YWluIGxheW91dCAtIGl0IHdvbid0IHJldHVybiB0cnVlIHVubGVzcyBpdHMgdGhlcmUuIGlmIGl0cyBhIGxlZ2FjeSB2ZXJzaW9uIGl0IHdpbGwgY29tZSBiYWNrIHRydWVcclxuICAgIC8vIGxldCBpY29uX2ltYWdlID0gKGV4aXN0cyhleHRyYSkgJiYgZXh0cmEuaGFzX2V4dHJhKSA/IGltYWdlX2l0ZW0uZXh0cmEgOiAoZXhpc3RzKGltYWdlX2l0ZW0pICYmIGV4aXN0cyhpbWFnZV9pdGVtLnZhbHVlKSkgPyBpbWFnZV9pdGVtLnZhbHVlIDogIGdldF9kZWZhdWx0X2ltYWdlKCk7Ly8gIGdldCB1c2VyIGRlZmF1bHRzIGluc3RlYWRcclxuXHJcbiAgICBsZXQgaWNvbl9pbWFnZSA9IChleGlzdHMoaW1hZ2VfaXRlbSkpID8gaW1hZ2VfaXRlbS52YWx1ZSA6ICBnZXRfZGVmYXVsdF9pbWFnZSgpO1xyXG5cclxuICAgIC8vIE5PVEU6IHRlc3QgZm9yIHN0YWdlMiBpbWFnZVxyXG4gICAgLy8gbGV0IGljb25faW1hZ2UgPSBnZXRfZGVmYXVsdF9pbWFnZSgpOy8vIHRlc3QgZGVmYXVsdCBzdGFnZTIgaW1hZ2VcclxuXHJcbiAgICAvLyBpIG5lZWQgMyBzdGFnZXMgaGVyZSxcclxuICAgIC8vIDEuIHRyeSB0aGUgZGVzaXJlZCBpbWFnZVxyXG4gICAgLy8gMi4gdHJ5IHRoZSBiYWNrdXAgaW1hZ2UgKGRlZmF1bHQpXHJcbiAgICAvLyAzLiBlaXRoZXIgdXNlIHRoZSBzaXRlcyBkZWZhdWx0IGltYWdlIG9yIHVzZSBhIHVzZXIgaWNvbiBpbnN0ZWFkXHJcblxyXG4gICAgLy8gcmV0dXJuIG51bGw7XHJcbiAgICBsZXQgbWFzdGVyX2ltYWdlID0gbnVsbDtcclxuXHJcbiAgICBsZXQgYWNjZXB0X2ltYWdlID0gKGltYWdlU3RhZ2UuY3VycmVudCAhPSAzIHx8IGltYWdlU3RhZ2UuY3VycmVudCA9PSAzICYmIGZhbGxiYWNrICE9IFwiaWNvblwiKSA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICBsZXQgdXNlX2NhbGxiYWNrID0gKGV4aXN0cyhkYXRhLmNhbGxiYWNrKSkgPyBkYXRhLmNhbGxiYWNrIDogKGV4aXN0cyhkYXRhLmRlZXBfZGl2ZSkgJiYgdHlwZW9mIGRhdGEuZGVlcF9kaXZlICE9IFwiYm9vbGVhblwiKSA/IGRhdGEuZGVlcF9kaXZlIDogZ29fdG9fcHJvZmlsZTtcclxuXHJcbiAgICBpZiAoYWNjZXB0X2ltYWdlKSB7XHJcblxyXG4gICAgICBsZXQgbXlfaWNvbl9zdHIgPSBuYW1lICsgXCJfaWNvbl9pbWdcIjtcclxuICAgICAgbGV0IG15X3NjYWxlID0gKGljb25faW1hZ2UuaW5jbHVkZXMoXCJmbGFtZS5wbmdcIikpID8gMSA6IDI7XHJcblxyXG5cclxuICAgICAgbGV0IGltZ19kYXRhID0ge1xyXG4gICAgICAgIHZhck5hbWU6YCR7bXlfaWNvbl9zdHJ9YCxcclxuICAgICAgICB1cmw6aWNvbl9pbWFnZSxcclxuICAgICAgICB0eXBlOiBcInByb2ZpbGVcIixcclxuICAgICAgICBjdXN0b21fY2xhc3M6YCR7bXlfaWNvbl9zdHJ9ICR7LypzLmFwcF9zdGF0ZS50ZXh0X3ZpZXcqL1wiXCJ9YCxcclxuICAgICAgICBjYW52YXNfY2xhc3M6IG5vX2NsYXNzID8gXCJcIiA6IGBkMy1wcm9maWxlLXJvdW5kZWRgLFxyXG4gICAgICAgIGltYWdlX2NsYXNzOiBub19jbGFzcyA/IFwiXCIgOiBgZDMtcHJvZmlsZS1yb3VuZGVkYCxcclxuICAgICAgICB3aWR0aDoxMDAsaGVpZ2h0OjEwMCxzY2FsZTpteV9zY2FsZSxcclxuICAgICAgICBtb2RlOlwiaW1hZ2VcIixcclxuICAgICAgICBzdG9wX2J1YmJsZTogdHJ1ZSxcclxuICAgICAgICBhdXRvX3ZhbGlkYXRlOiB0cnVlLFxyXG4gICAgICAgIGxheW91dDogW1wicHJvZmlsZVwiLFwidGh1bWJuYWlsXCJdLFxyXG4gICAgICAgIGhhc19lcnJvcl9jYWxsb3V0OiB0cnVlLFxyXG4gICAgICAgIGVycm9yX2NhbGxvdXRfcGFyYW1zOltpbWdfZXJyb3Isey8qc3RhdGUsXCJwSWRcIjpyaWNoX2ltYWdlX2NvbnRfaWQsKi9cIm1vZFwiOlwicmljaFwiLC8qXCJ0T2JqXCI6dHJhbnNfb2JqKi99XVxyXG4gICAgICAgIC8vIGRlZmF1bHRfaW1nOiBkZWZhdWx0X2ltYWdlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZihleGlzdHMoZXh0cmEpICYmIGV4dHJhLmhhc19leHRyYSl7XHJcbiAgICAgICAgaW1nX2RhdGEuZXh0cmEgPSBpbWFnZV9pdGVtLmV4dHJhOy8vIHRoaXMgaXMgdGhlIHdob2xlIHRoaW5nIChhbGwgdGhlIGxheW91dCB2YXJpYXRpb25zKVxyXG4gICAgICAgIGltZ19kYXRhLm1vZGUgPSBcImF1dG9cIjtcclxuICAgICAgICAvLyBpIG5lZWQgdG8gcmVhZCB0aGUgZXh0cmEgYW5kIHNlZSBpZiB0aGUgZGltZW5zaW9ucyB3b3JrIGZvciB0aGUgZGlzcGxheSBhcmVhLFxyXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSBpdCBuZWVkcyBwcm9maWxlIG9yIHRodW1ibmFpbCBvciBjdXN0b20gd2l0aCB0aGUgc2FtZSB3aWR0aCBhbmQgaGVpZ2h0IC0gb3RoZXJ3aXNlIGRvIG5vdGhpbmdcclxuICAgICAgICAvLyBuZWVkcyB0byB1c2UgcHJvZmlsZSBvciB0aHVtYm5haWwgbGF5b3V0IG9yIGRlZmF1bHQgaW1hZ2UgKG5vIGV4dHJhKSAtIGNhbiBhbHNvIHNlbmQgYSBkaWZmZXJlbnQgaW1nX3VybCAoaWNvbl9pbWFnZSlcclxuXHJcbiAgICAgICAgLy9hbHNvIGlmIGl0IGhhcyBtdWx0aXBsZSBpbWFnZXMsIGxvb2sgZm9yIHRoZSBwcm9maWxlIG9yIHRodW1ibmFpbCBhbmQgZ2V0IGl0cyBleHRyYSBkYXRhXHJcbiAgICAgIH0vLyBlbmQgaWZcclxuXHJcbiAgICAgIC8vIGxldCBkZWVwX2RpdmUgPSAocy5hcHBfc3RhdGUuZGlzcGxheV9kYXRhICE9IFwiaW5mb1wiIHx8IHMuYXBwX3N0YXRlLmRpc3BsYXlfZGF0YSA9PSBcImluZm9cIiAmJlxyXG4gICAgICAvLyB0VmFyLm15SW5fZGF0YV90eXBlID09IFwiZm9sZGVyXCIgfHwgcy5hcHBfc3RhdGUuZGlzcGxheV9kYXRhID09IFwiaW5mb1wiICYmXHJcbiAgICAgIC8vIHRWYXIubXlJbl9kYXRhX3R5cGUgPT0gXCJwcmVzZXRcIikgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgICAvLyBsZXQgZGVlcF9kaXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgIGlmKGV4aXN0cyhkZWVwX2RpdmUpKVxyXG4gICAgICB7XHJcbiAgICAgICAgaW1nX2RhdGEuaGFzX2NhbGxvdXQgPSBcInRydWVcIjtcclxuICAgICAgICBpbWdfZGF0YS5jYWxsb3V0X3BhcmFtcyA9IFt1c2VfY2FsbGJhY2svKiwgaXRlbSovXTtcclxuICAgICAgfS8vIGlmIGRlZXBfZGl2ZVxyXG5cclxuXHJcbiAgICAgIC8vIC8vIGFkZCAuZXh0cmEgPSBbZG8gaSBuZWVkIGV4dHJhIHdpdGggdGh1bWJuYWlscz8gLSBsZXRzIHN0YXJ0IHdpdGggbm9dXHJcbiAgICAgIC8vIFtvayBsZXRzIHRyeSB5ZXMgLSB3aHkgbW9kaWZ5IGltYWdlcyBpZiB5b3UgZG9uJ3QgdXNlIHRoZW0/XVxyXG4gICAgICAvLyBleHRyYTpkYXRhLmV4dHJhLFxyXG5cclxuICAgICAgLy8gbWFzdGVyX2ltYWdlID0gKFxyXG4gICAgICAvLyAgIDxNYXN0ZXJJbWFnZSBkYXRhPXtpbWdfZGF0YX0gLz5cclxuICAgICAgLy8gKSA7XHJcbiAgICAgIG1hc3Rlcl9pbWFnZSA9IHVzZU1lbW8oKCkgPT4gPE1hc3RlckltYWdlIGRhdGE9e2ltZ19kYXRhfSAvPixbaW1nX2RhdGFdKTtcclxuICAgIH0vLyBhY2NlcHRfaW1hZ2VcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtuYW1lfSBQcm9maWxlSWNvbl9pY29uX3dyYXBwZXIgUHJvZmlsZUljb25faWNvbl93cmFwcGVyXyR7aVVOfSAke3RhZ31gfSBkYXRhLWNvbXA9e2BQcm9maWxlSWNvbmB9ID5cclxuICAgICAgeyAhdGV4dF9vbmx5X21vZGUgJiYgYWNjZXB0X2ltYWdlID8gbWFzdGVyX2ltYWdlIDogKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtuYW1lfV9pY29uIFByb2ZpbGVJY29uX2ljb24gZDMtaWNvIGQzLWljby1idG4gaWNvbi11c2VyYH1cclxuICAgICAgICAgIGtleT17YFByb2ZpbGVJY29uX2ljb25fJHtpVU59YH1cclxuICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZS5wZXJzaXN0KCk7XHJcbiAgICAgICAgICAgIHVzZV9jYWxsYmFjayhlKTtcclxuICAgICAgICB9fT48L2Rpdj5cclxuICAgICAgKVxyXG4gICAgICB9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG5cclxuXHJcbiAgfS8vIFByb2ZpbGVJY29uXHJcblxyXG4gIGV4cG9ydCBkZWZhdWx0IFByb2ZpbGVJY29uO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQWRBO0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBYUE7QUFDQTtBQUNBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/ProfileIcon/ProfileIcon.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/ProfileIcon/ProfileIcon.scss":
/*!************************************************************************!*\
  !*** ./js/components/Narrator/components/ProfileIcon/ProfileIcon.scss ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvUHJvZmlsZUljb24vUHJvZmlsZUljb24uc2Nzcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9Qcm9maWxlSWNvbi9Qcm9maWxlSWNvbi5zY3NzPzQzNDQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/ProfileIcon/ProfileIcon.scss\n");

/***/ }),

/***/ "./js/components/Narrator/components/Toast/Toast.js":
/*!**********************************************************!*\
  !*** ./js/components/Narrator/components/Toast/Toast.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Toast; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _Toast_scss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Toast.scss */ \"./js/components/Narrator/components/Toast/Toast.scss\");\n/* harmony import */ var _Toast_scss__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_Toast_scss__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _toaster__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./toaster */ \"./js/components/Narrator/components/Toast/toaster.js\");\n\n\n\n\n\n\n\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n\n\n // const {toaster} = require('./toaster.js');// produces an error - is not a function\n\n //works\n\nvar _require = __webpack_require__(/*! ../../tools/exists */ \"./js/components/Narrator/tools/exists.js\"),\n    exists = _require.exists; // what does this button do???\n\n/**\r\n * @module Toast\r\n * @category Tools\r\n * @desc Toast component\r\n * @future visible countdown b4 auto hiding, close btn (along with clicking anywhere to make closing clearer),\r\n */\n\n/**\r\n * @file\r\n */\n\n/**\r\n * @class Toast\r\n * @requires exists\r\n * @see [toast-msg (linkback)]{@link module:toast-msg}\r\n * @see ./toast.scss\r\n * @example\r\n * import  Toast from './toast';\r\n * <Toast data={{state,home:`.${prefix}message_display_span`,message:sort_txt_obj[label_txt],auto:true,sec:5}} wrapper={true}/>,\r\n */\n\n\nvar Toast = /*#__PURE__*/function (_React$Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(Toast, _React$Component);\n\n  var _super = _createSuper(Toast);\n\n  /**\r\n   * Toast constructor\r\n  * @constructs Toast\r\n  * @param {Object} props component props\r\n  * @param {Object} props.data data object prop\r\n  * @param  {Object} props.data.state                         app state object (store)\r\n  * @param  {String} data.message                       message to the viewer\r\n  * @param  {String} data.name                          unique identifier string\r\n  * @param  {Number} [data.iUN=Math.round(Math.random() *             10000)] individual unique number\r\n  * @param  {Number} [data.seconds]                       [description]\r\n  * @param  {Number} [data.sec]                           [description]\r\n  * @param  {Boolean} [data.auto]\r\n  */\n  function Toast(props) {\n    var _this2;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Toast);\n\n    _this2 = _super.call(this, props);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this2), \"timer\", \"\");\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this2), \"timer2\", \"\");\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this2), \"remove_self\", function () {\n      try {\n        var s = _this2.state;\n        var data = _this2.props.data;\n        var targ_el = _this2.toast_cont.current;\n        var target_container = targ_el.parentNode;\n        react_dom__WEBPACK_IMPORTED_MODULE_8___default.a.unmountComponentAtNode(target_container); // this is like innerHTML = \"\" for react components\n\n        if (exists(_this2.props.wrapper) && _this2.props.wrapper == true) {\n          // then remove the parent element\n          var bigDaddy = target_container.parentNode;\n          bigDaddy.removeChild(target_container);\n        } // if\n\n      } catch (err) {\n        console.error(\"[remove_self] an error occured\", err);\n      }\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this2), \"prep_vars\", function (_ref) {\n      var message = _ref.message,\n          name = _ref.name,\n          custom = _ref.custom,\n          _ref$iUN = _ref.iUN,\n          iUN = _ref$iUN === void 0 ? Math.round(Math.random() * 10000) : _ref$iUN,\n          seconds = _ref.seconds,\n          sec = _ref.sec,\n          _ref$auto = _ref.auto,\n          auto = _ref$auto === void 0 ? true : _ref$auto,\n          _ref$card = _ref.card,\n          card = _ref$card === void 0 ? true : _ref$card,\n          link = _ref.link,\n          _ref$close = _ref.close,\n          close = _ref$close === void 0 ? false : _ref$close;\n\n      var _this = _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this2);\n\n      _this2.setState({\n        message: message,\n        name: name,\n        iUN: iUN,\n        custom: custom,\n        card: card,\n        link: link,\n        close: close\n      }); //setState\n\n\n      if (auto) {\n        // if its auto its going to fade in and out by the specified duration\n        // clearTimeout(this.timer);\n        var hold_time = seconds ? seconds * 1000 : sec ? sec * 1000 : 3000; // 1000 = 1s\n        // let container_str = `.${name}_toast_cont_${iUN}`;\n        //apply the fade out\n\n        clearTimeout(_this2.timer);\n        clearTimeout(_this2.timer2);\n        _this2.timer = setTimeout(function () {\n          clearTimeout(_this.timer); // let targ_el = document.querySelector(container_str);\n          // targ_el.classList.add(\"d3-fade-out-quick\");\n\n          _this.toast_cont.current.classList.add(\"d3-fade-out-quick\");\n\n          _this.timer2 = setTimeout(function () {\n            clearTimeout(_this.timer2); // targ_el.classList.remove(\"d3-fade-out-quick\");\n\n            _this.toast_cont.current.classList.remove(\"d3-fade-out-quick\"); // toaster({state,mode:\"hide\"});\n\n\n            _this.remove_self();\n          }, 1000); // the hold_time is below - this time is for the end of the fader \"timer2\"\n          //i can use a fade delay that will do the same thing as a timer - do both?\n        }, hold_time); //timer\n      } //if\n\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this2), \"update_state\", function (obj) {\n      _this2.prep_vars(obj);\n    });\n\n    _this2.state = {}; // toaster({mode:\"test\"});\n    // this.state.click = toaster;\n\n    _this2.toast_cont = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef();\n    return _this2;\n  } // constructor\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Toast, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //this section is for setting up initial values just after page is rendered\n      // console.log(\"active component is ready to roll!\");\n      // console.log(`available data = ${this.props.data}`);\n      this.prep_vars(this.props.data);\n    } //componentDidMount\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: // prep_vars\n    function componentDidUpdate() {//this section is for executing just after first state update - all init vars are set by now\n    } //componentDidUpdate\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.timer);\n      clearTimeout(this.timer2);\n    }\n  }, {\n    key: \"render\",\n    value:\n    /*<img src={`${ARC_IMG_URL}flame@xs.png`} />*/\n    function render() {\n      var _this3 = this;\n\n      // enter logic here\n      var s = this.state;\n      var toast_class = s.custom ? s.custom : \"\";\n      var show_card = s.card == true ? \"w3-card\" : \"\";\n      var close_btn = s.close ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(\"div\", {\n        className: \"\".concat(s.name, \"_toast_close_\").concat(s.iUN, \" toast_close d3-ico d3-bg d3-disc-outer d3-disc-bg d3-abs icon-cross\"),\n        onClick: function onClick(e) {\n          e.preventDefault();\n\n          _this3.remove_self();\n        }\n      }) : null;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(\"div\", {\n        className: \"\".concat(s.name, \"_toast_cont_\").concat(s.iUN, \" toast_cont d3_toast \").concat(toast_class, \" \").concat(show_card, \" d3-slide-in-bottom d3-fade-in-quick\"),\n        ref: this.toast_cont,\n        \"data-comp\": \"Toast\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n\n          _this3.remove_self();\n        }\n      }, close_btn, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(\"p\", null, unescape(s.message)), s.link ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(\"a\", {\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.persist();\n          s.link.callback(e, s.link.data);\n        }\n      }, s.link.text) : null);\n    } // render\n\n  }]);\n\n  return Toast;\n}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component); // Toast\n// toaster({mode:\"hide\"})\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVG9hc3QvVG9hc3QuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVG9hc3QvVG9hc3QuanM/YTcxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcclxuaW1wb3J0IFwiLi9Ub2FzdC5zY3NzXCI7XHJcbi8vIGNvbnN0IHt0b2FzdGVyfSA9IHJlcXVpcmUoJy4vdG9hc3Rlci5qcycpOy8vIHByb2R1Y2VzIGFuIGVycm9yIC0gaXMgbm90IGEgZnVuY3Rpb25cclxuaW1wb3J0IHt0b2FzdGVyfSBmcm9tICcuL3RvYXN0ZXInOy8vd29ya3NcclxuY29uc3Qge2V4aXN0c30gPSByZXF1aXJlKCcuLi8uLi90b29scy9leGlzdHMnKTtcclxuXHJcbiAgLy8gd2hhdCBkb2VzIHRoaXMgYnV0dG9uIGRvPz8/XHJcbiAgLyoqXHJcbiAgICogQG1vZHVsZSBUb2FzdFxyXG4gICAqIEBjYXRlZ29yeSBUb29sc1xyXG4gICAqIEBkZXNjIFRvYXN0IGNvbXBvbmVudFxyXG4gICAqIEBmdXR1cmUgdmlzaWJsZSBjb3VudGRvd24gYjQgYXV0byBoaWRpbmcsIGNsb3NlIGJ0biAoYWxvbmcgd2l0aCBjbGlja2luZyBhbnl3aGVyZSB0byBtYWtlIGNsb3NpbmcgY2xlYXJlciksXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmaWxlXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIEBjbGFzcyBUb2FzdFxyXG4gICAqIEByZXF1aXJlcyBleGlzdHNcclxuICAgKiBAc2VlIFt0b2FzdC1tc2cgKGxpbmtiYWNrKV17QGxpbmsgbW9kdWxlOnRvYXN0LW1zZ31cclxuICAgKiBAc2VlIC4vdG9hc3Quc2Nzc1xyXG4gICAqIEBleGFtcGxlXHJcbiAgICogaW1wb3J0ICBUb2FzdCBmcm9tICcuL3RvYXN0JztcclxuICAgKiA8VG9hc3QgZGF0YT17e3N0YXRlLGhvbWU6YC4ke3ByZWZpeH1tZXNzYWdlX2Rpc3BsYXlfc3BhbmAsbWVzc2FnZTpzb3J0X3R4dF9vYmpbbGFiZWxfdHh0XSxhdXRvOnRydWUsc2VjOjV9fSB3cmFwcGVyPXt0cnVlfS8+LFxyXG4gICAqL1xyXG5cclxuICBleHBvcnQgZGVmYXVsdCBjbGFzcyBUb2FzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUb2FzdCBjb25zdHJ1Y3RvclxyXG4gICAgKiBAY29uc3RydWN0cyBUb2FzdFxyXG4gICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgY29tcG9uZW50IHByb3BzXHJcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcy5kYXRhIGRhdGEgb2JqZWN0IHByb3BcclxuICAgICogQHBhcmFtICB7T2JqZWN0fSBwcm9wcy5kYXRhLnN0YXRlICAgICAgICAgICAgICAgICAgICAgICAgIGFwcCBzdGF0ZSBvYmplY3QgKHN0b3JlKVxyXG4gICAgKiBAcGFyYW0gIHtTdHJpbmd9IGRhdGEubWVzc2FnZSAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSB0byB0aGUgdmlld2VyXHJcbiAgICAqIEBwYXJhbSAge1N0cmluZ30gZGF0YS5uYW1lICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWUgaWRlbnRpZmllciBzdHJpbmdcclxuICAgICogQHBhcmFtICB7TnVtYmVyfSBbZGF0YS5pVU49TWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogICAgICAgICAgICAgMTAwMDApXSBpbmRpdmlkdWFsIHVuaXF1ZSBudW1iZXJcclxuICAgICogQHBhcmFtICB7TnVtYmVyfSBbZGF0YS5zZWNvbmRzXSAgICAgICAgICAgICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXVxyXG4gICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtkYXRhLnNlY10gICAgICAgICAgICAgICAgICAgICAgICAgICBbZGVzY3JpcHRpb25dXHJcbiAgICAqIEBwYXJhbSAge0Jvb2xlYW59IFtkYXRhLmF1dG9dXHJcbiAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xyXG4gICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuICAgICAgLy8gdG9hc3Rlcih7bW9kZTpcInRlc3RcIn0pO1xyXG4gICAgICAvLyB0aGlzLnN0YXRlLmNsaWNrID0gdG9hc3RlcjtcclxuICAgICAgdGhpcy50b2FzdF9jb250ID0gUmVhY3QuY3JlYXRlUmVmKCk7XHJcbiAgICB9Ly8gY29uc3RydWN0b3JcclxuXHJcbiAgICB0aW1lciA9IFwiXCI7XHJcbiAgICB0aW1lcjIgPSBcIlwiO1xyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCl7XHJcbiAgICAgIC8vdGhpcyBzZWN0aW9uIGlzIGZvciBzZXR0aW5nIHVwIGluaXRpYWwgdmFsdWVzIGp1c3QgYWZ0ZXIgcGFnZSBpcyByZW5kZXJlZFxyXG4gICAgICAvLyBjb25zb2xlLmxvZyhcImFjdGl2ZSBjb21wb25lbnQgaXMgcmVhZHkgdG8gcm9sbCFcIik7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBhdmFpbGFibGUgZGF0YSA9ICR7dGhpcy5wcm9wcy5kYXRhfWApO1xyXG4gICAgICB0aGlzLnByZXBfdmFycyh0aGlzLnByb3BzLmRhdGEpO1xyXG5cclxuICAgIH0vL2NvbXBvbmVudERpZE1vdW50XHJcblxyXG4gICAgcmVtb3ZlX3NlbGYgPSAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcblxyXG4gICAgICAgIGxldCBzID0gIHRoaXMuc3RhdGU7XHJcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLnByb3BzLmRhdGE7XHJcbiAgICAgICAgbGV0IHRhcmdfZWwgPSB0aGlzLnRvYXN0X2NvbnQuY3VycmVudDtcclxuICAgICAgICBsZXQgdGFyZ2V0X2NvbnRhaW5lciA9IHRhcmdfZWwucGFyZW50Tm9kZTtcclxuXHJcbiAgICAgICAgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZSh0YXJnZXRfY29udGFpbmVyKTsvLyB0aGlzIGlzIGxpa2UgaW5uZXJIVE1MID0gXCJcIiBmb3IgcmVhY3QgY29tcG9uZW50c1xyXG4gICAgICAgIGlmKGV4aXN0cyh0aGlzLnByb3BzLndyYXBwZXIpICYmIHRoaXMucHJvcHMud3JhcHBlciA9PSB0cnVlKXtcclxuICAgICAgICAgIC8vIHRoZW4gcmVtb3ZlIHRoZSBwYXJlbnQgZWxlbWVudFxyXG4gICAgICAgICAgbGV0IGJpZ0RhZGR5ID0gdGFyZ2V0X2NvbnRhaW5lci5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgYmlnRGFkZHkucmVtb3ZlQ2hpbGQodGFyZ2V0X2NvbnRhaW5lcik7XHJcbiAgICAgICAgfS8vIGlmXHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbcmVtb3ZlX3NlbGZdIGFuIGVycm9yIG9jY3VyZWRcIixlcnIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwYXNzZXMgcHJvcHMuZGF0YSB0byB0aGUgdGhpcy5zdGF0ZVxyXG4gICAgICogQGZ1bmN0aW9uIHByZXBfdmFyc1xyXG4gICAgICogQG1lbWJlcm9mIFRvYXN0XHJcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHN0YXRlICAgICAgICAgICAgICAgICAgICAgICAgIGFwcCBzdGF0ZSBvYmplY3QgKHN0b3JlKVxyXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBtZXNzYWdlICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlIHRvIHRoZSB2aWV3ZXJcclxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlIGlkZW50aWZpZXIgc3RyaW5nXHJcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtpVU49TWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogICAgICAgICAgICAgMTAwMDApXSBpbmRpdmlkdWFsIHVuaXF1ZSBudW1iZXJcclxuICAgICAqIEBwYXJhbSAge051bWJlcn0gW3NlY29uZHNdICAgICAgICAgICAgICAgICAgICAgICBbZGVzY3JpcHRpb25dXHJcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtzZWNdICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXVxyXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gW2F1dG9dICAgICAgICAgICAgICBbZGVzY3JpcHRpb25dXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgcHJlcF92YXJzID0gKHtcclxuICAgICAgbWVzc2FnZSxcclxuICAgICAgbmFtZSxcclxuICAgICAgY3VzdG9tLFxyXG4gICAgICBpVU4gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMCksXHJcbiAgICAgIHNlY29uZHMsXHJcbiAgICAgIHNlYyxcclxuICAgICAgYXV0byA9IHRydWUsXHJcbiAgICAgIGNhcmQgPSB0cnVlLFxyXG4gICAgICBsaW5rLFxyXG4gICAgICBjbG9zZSA9IGZhbHNlXHJcbiAgICB9KSA9PiB7XHJcblxyXG4gICAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGlVTixcclxuICAgICAgICBjdXN0b20sXHJcbiAgICAgICAgY2FyZCxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICAgIGNsb3NlLFxyXG4gICAgICB9KTsvL3NldFN0YXRlXHJcblxyXG4gICAgICBpZihhdXRvKXtcclxuICAgICAgICAvLyBpZiBpdHMgYXV0byBpdHMgZ29pbmcgdG8gZmFkZSBpbiBhbmQgb3V0IGJ5IHRoZSBzcGVjaWZpZWQgZHVyYXRpb25cclxuICAgICAgICAvLyBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcbiAgICAgICAgbGV0IGhvbGRfdGltZSA9IChzZWNvbmRzKSA/IHNlY29uZHMgKiAxMDAwIDogKHNlYykgPyBzZWMgKiAxMDAwIDogMzAwMDsvLyAxMDAwID0gMXNcclxuICAgICAgICAvLyBsZXQgY29udGFpbmVyX3N0ciA9IGAuJHtuYW1lfV90b2FzdF9jb250XyR7aVVOfWA7XHJcblxyXG4gICAgICAgIC8vYXBwbHkgdGhlIGZhZGUgb3V0XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyMik7XHJcblxyXG4gICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMudGltZXIpO1xyXG4gICAgICAgICAgLy8gbGV0IHRhcmdfZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcl9zdHIpO1xyXG4gICAgICAgICAgLy8gdGFyZ19lbC5jbGFzc0xpc3QuYWRkKFwiZDMtZmFkZS1vdXQtcXVpY2tcIik7XHJcbiAgICAgICAgICBfdGhpcy50b2FzdF9jb250LmN1cnJlbnQuY2xhc3NMaXN0LmFkZChcImQzLWZhZGUtb3V0LXF1aWNrXCIpO1xyXG5cclxuICAgICAgICAgIF90aGlzLnRpbWVyMiA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMudGltZXIyKTtcclxuICAgICAgICAgICAgLy8gdGFyZ19lbC5jbGFzc0xpc3QucmVtb3ZlKFwiZDMtZmFkZS1vdXQtcXVpY2tcIik7XHJcbiAgICAgICAgICAgIF90aGlzLnRvYXN0X2NvbnQuY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZDMtZmFkZS1vdXQtcXVpY2tcIik7XHJcbiAgICAgICAgICAgIC8vIHRvYXN0ZXIoe3N0YXRlLG1vZGU6XCJoaWRlXCJ9KTtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3ZlX3NlbGYoKTtcclxuICAgICAgICAgIH0sIDEwMDApOy8vIHRoZSBob2xkX3RpbWUgaXMgYmVsb3cgLSB0aGlzIHRpbWUgaXMgZm9yIHRoZSBlbmQgb2YgdGhlIGZhZGVyIFwidGltZXIyXCJcclxuXHJcbiAgICAgICAgICAvL2kgY2FuIHVzZSBhIGZhZGUgZGVsYXkgdGhhdCB3aWxsIGRvIHRoZSBzYW1lIHRoaW5nIGFzIGEgdGltZXIgLSBkbyBib3RoP1xyXG5cclxuICAgICAgICB9LCBob2xkX3RpbWUpOy8vdGltZXJcclxuXHJcblxyXG4gICAgICB9Ly9pZlxyXG5cclxuICAgIH0vLyBwcmVwX3ZhcnNcclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUoKXtcclxuICAgICAgLy90aGlzIHNlY3Rpb24gaXMgZm9yIGV4ZWN1dGluZyBqdXN0IGFmdGVyIGZpcnN0IHN0YXRlIHVwZGF0ZSAtIGFsbCBpbml0IHZhcnMgYXJlIHNldCBieSBub3dcclxuXHJcbiAgICB9Ly9jb21wb25lbnREaWRVcGRhdGVcclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyMik7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlX3N0YXRlID0gKG9iaikgPT4ge1xyXG4gICAgICB0aGlzLnByZXBfdmFycyhvYmopO1xyXG4gICAgfVxyXG4gICAgLyo8aW1nIHNyYz17YCR7QVJDX0lNR19VUkx9ZmxhbWVAeHMucG5nYH0gLz4qL1xyXG5cclxuXHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAvLyBlbnRlciBsb2dpYyBoZXJlXHJcbiAgICAgIGxldCBzID0gIHRoaXMuc3RhdGU7XHJcbiAgICAgIGxldCB0b2FzdF9jbGFzcyA9IChzLmN1c3RvbSkgPyBzLmN1c3RvbSA6IFwiXCI7XHJcbiAgICAgIGxldCBzaG93X2NhcmQgPSAocy5jYXJkID09IHRydWUpID8gXCJ3My1jYXJkXCIgOiBcIlwiO1xyXG5cclxuXHJcbiAgICAgIGxldCBjbG9zZV9idG4gPSBzLmNsb3NlID8gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtzLm5hbWV9X3RvYXN0X2Nsb3NlXyR7cy5pVU59IHRvYXN0X2Nsb3NlIGQzLWljbyBkMy1iZyBkMy1kaXNjLW91dGVyIGQzLWRpc2MtYmcgZDMtYWJzIGljb24tY3Jvc3NgfVxyXG4gICAgICAgICAgb25DbGljaz17KGUpID0+IHtlLnByZXZlbnREZWZhdWx0KCk7IHRoaXMucmVtb3ZlX3NlbGYoKX19XHJcbiAgICAgICAgPjwvZGl2PlxyXG4gICAgICApIDogbnVsbDtcclxuXHJcbiAgICAgIHJldHVybihcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cy5uYW1lfV90b2FzdF9jb250XyR7cy5pVU59IHRvYXN0X2NvbnQgZDNfdG9hc3QgJHt0b2FzdF9jbGFzc30gJHtzaG93X2NhcmR9IGQzLXNsaWRlLWluLWJvdHRvbSBkMy1mYWRlLWluLXF1aWNrYH1cclxuICAgICAgICAgIHJlZj17dGhpcy50b2FzdF9jb250fVxyXG4gICAgICAgICAgZGF0YS1jb21wPXtgVG9hc3RgfVxyXG4gICAgICAgICAgb25DbGljaz17KGUpID0+IHtlLnByZXZlbnREZWZhdWx0KCk7IHRoaXMucmVtb3ZlX3NlbGYoKX19ID5cclxuICAgICAgICAgIHtjbG9zZV9idG59XHJcbiAgICAgICAgICA8cD57dW5lc2NhcGUocy5tZXNzYWdlKX08L3A+XHJcbiAgICAgICAgICB7cy5saW5rID8gKFxyXG4gICAgICAgICAgICA8YSBvbkNsaWNrPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICBlLnBlcnNpc3QoKTtcclxuICAgICAgICAgICAgICBzLmxpbmsuY2FsbGJhY2soZSxzLmxpbmsuZGF0YSlcclxuICAgICAgICAgICAgfX0+e3MubGluay50ZXh0fTwvYT5cclxuICAgICAgICAgICkgOiBudWxsfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgfS8vIHJlbmRlclxyXG5cclxuICB9Ly8gVG9hc3RcclxuICAvLyB0b2FzdGVyKHttb2RlOlwiaGlkZVwifSlcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFvQkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckNBO0FBOERBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQTdHQTtBQXlIQTtBQUNBO0FBQ0E7QUF6SEE7QUFFQTtBQUNBO0FBQUE7QUFMQTtBQU1BO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQTBGQTtBQUVBO0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFLQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUhBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUUE7QUFDQTs7OztBQTVLQTtBQThLQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Toast/Toast.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/Toast/Toast.scss":
/*!************************************************************!*\
  !*** ./js/components/Narrator/components/Toast/Toast.scss ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVG9hc3QvVG9hc3Quc2Nzcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9Ub2FzdC9Ub2FzdC5zY3NzP2ViNzEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Toast/Toast.scss\n");

/***/ }),

/***/ "./js/components/Narrator/components/Toast/toaster.js":
/*!************************************************************!*\
  !*** ./js/components/Narrator/components/Toast/toaster.js ***!
  \************************************************************/
/*! exports provided: toaster */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toaster\", function() { return toaster; });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Toast__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Toast */ \"./js/components/Narrator/components/Toast/Toast.js\");\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// console.log(`toast running!`);\n// const {toaster} = require('../elements/toaster/toaster.js');\n\n\n\n\nvar _require = __webpack_require__(/*! ../../tools/wrapr */ \"./js/components/Narrator/tools/wrapr.js\"),\n    wrapr = _require.wrapr;\n/**\r\n * popup message that can be added to a DOM elemenet and set to automatically fade away after x seconds\r\n * @module action-msg\r\n * @category Tools\r\n * @requires Toast\r\n * @requires wrapr\r\n * @param  {Object} obj wrapper for all params\r\n * @param  {String} obj.home                          DOM element root\r\n * @param  {String} obj.name                          unique string identifier/reference\r\n * @param  {Number} [obj.iUN=Math.round(Math.random() *             10000)}] individual unique number\r\n * @return {Void}     returns false\r\n * @example\r\n * const {toaster} = require('../../elements/toaster/toaster.js');\r\n * toaster({mode:\"show\",prefix,message:sort_txt_obj[label_txt],auto:true,sec:5});\r\n * toaster({home:`.${prefix}message_display_span`,message:sort_txt_obj[label_txt],auto:true,sec:5});\r\n */\n\n\nvar toaster = function toaster(obj) {\n  // state is not needed\n  var _obj$home = obj.home,\n      home = _obj$home === void 0 ? \".toaster_home\" : _obj$home,\n      name = obj.name,\n      custom = obj.custom,\n      _obj$iUN = obj.iUN,\n      iUN = _obj$iUN === void 0 ? Math.round(Math.random() * 10000) : _obj$iUN;\n  var toasters = document.querySelectorAll(\".toast_cont\");\n\n  if (typeof toasters != \"undefined\") {\n    toasters = Array.from(toasters);\n    toasters.forEach(function (entry) {\n      entry.classList.add(\"hide\");\n    });\n  } // generate home container\n\n  /**\r\n   * @function wrapr\r\n   * @requires wrapr\r\n   */\n\n\n  var toast_home = wrapr({\n    name: \"\".concat(name, \"_wrapr_cont\"),\n    iUN: iUN,\n    home: home,\n    custom: \"toaster\"\n  });\n  react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    data: _objectSpread({}, obj),\n    wrapper: true\n  }), toast_home); // else do this\n}; //toaster\n// usage:\n// const {toaster} = require('../elements/toaster/toaster.js');\n// toaster({mode:\"show\",prefix,message:sort_txt_obj[label_txt],auto:true,sec:5});\n// toaster({home:`.${prefix}message_display_span`,message:sort_txt_obj[label_txt],auto:true,sec:5});\n\n/**\r\n * @memberof action-msg\r\n *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVG9hc3QvdG9hc3Rlci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9Ub2FzdC90b2FzdGVyLmpzP2NmNjkiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG4gIC8vIGNvbnNvbGUubG9nKGB0b2FzdCBydW5uaW5nIWApO1xyXG4gIC8vIGNvbnN0IHt0b2FzdGVyfSA9IHJlcXVpcmUoJy4uL2VsZW1lbnRzL3RvYXN0ZXIvdG9hc3Rlci5qcycpO1xyXG4gIGltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbiAgaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XHJcblxyXG4gIGltcG9ydCAgVG9hc3QgZnJvbSAnLi9Ub2FzdCc7XHJcblxyXG4gIGNvbnN0IHt3cmFwcn0gPSByZXF1aXJlKCcuLi8uLi90b29scy93cmFwcicpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBwb3B1cCBtZXNzYWdlIHRoYXQgY2FuIGJlIGFkZGVkIHRvIGEgRE9NIGVsZW1lbmV0IGFuZCBzZXQgdG8gYXV0b21hdGljYWxseSBmYWRlIGF3YXkgYWZ0ZXIgeCBzZWNvbmRzXHJcbiAqIEBtb2R1bGUgYWN0aW9uLW1zZ1xyXG4gKiBAY2F0ZWdvcnkgVG9vbHNcclxuICogQHJlcXVpcmVzIFRvYXN0XHJcbiAqIEByZXF1aXJlcyB3cmFwclxyXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iaiB3cmFwcGVyIGZvciBhbGwgcGFyYW1zXHJcbiAqIEBwYXJhbSAge1N0cmluZ30gb2JqLmhvbWUgICAgICAgICAgICAgICAgICAgICAgICAgIERPTSBlbGVtZW50IHJvb3RcclxuICogQHBhcmFtICB7U3RyaW5nfSBvYmoubmFtZSAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlIHN0cmluZyBpZGVudGlmaWVyL3JlZmVyZW5jZVxyXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IFtvYmouaVVOPU1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICAgICAgICAgICAgIDEwMDAwKX1dIGluZGl2aWR1YWwgdW5pcXVlIG51bWJlclxyXG4gKiBAcmV0dXJuIHtWb2lkfSAgICAgcmV0dXJucyBmYWxzZVxyXG4gKiBAZXhhbXBsZVxyXG4gKiBjb25zdCB7dG9hc3Rlcn0gPSByZXF1aXJlKCcuLi8uLi9lbGVtZW50cy90b2FzdGVyL3RvYXN0ZXIuanMnKTtcclxuICogdG9hc3Rlcih7bW9kZTpcInNob3dcIixwcmVmaXgsbWVzc2FnZTpzb3J0X3R4dF9vYmpbbGFiZWxfdHh0XSxhdXRvOnRydWUsc2VjOjV9KTtcclxuICogdG9hc3Rlcih7aG9tZTpgLiR7cHJlZml4fW1lc3NhZ2VfZGlzcGxheV9zcGFuYCxtZXNzYWdlOnNvcnRfdHh0X29ialtsYWJlbF90eHRdLGF1dG86dHJ1ZSxzZWM6NX0pO1xyXG4gKi9cclxuXHJcbiAgZXhwb3J0IGNvbnN0IHRvYXN0ZXIgPSAob2JqKSA9PiB7XHJcblxyXG4gIC8vIHN0YXRlIGlzIG5vdCBuZWVkZWRcclxuICBsZXQge2hvbWUgPSBcIi50b2FzdGVyX2hvbWVcIiwgbmFtZSwgY3VzdG9tLCBpVU4gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMCl9ID0gb2JqO1xyXG5cclxuICBsZXQgdG9hc3RlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAudG9hc3RfY29udGApO1xyXG5cclxuICBpZih0eXBlb2YgdG9hc3RlcnMgIT0gXCJ1bmRlZmluZWRcIil7XHJcbiAgICB0b2FzdGVycyA9IEFycmF5LmZyb20odG9hc3RlcnMpO1xyXG4gICAgdG9hc3RlcnMuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgZW50cnkuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gZ2VuZXJhdGUgaG9tZSBjb250YWluZXJcclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gd3JhcHJcclxuICAgKiBAcmVxdWlyZXMgd3JhcHJcclxuICAgKi9cclxuICBsZXQgdG9hc3RfaG9tZSA9IHdyYXByKHtuYW1lOmAke25hbWV9X3dyYXByX2NvbnRgLGlVTiwgaG9tZSwgY3VzdG9tOlwidG9hc3RlclwifSk7XHJcblxyXG4gICAgUmVhY3RET00ucmVuZGVyKFxyXG4gICAgICA8VG9hc3QgZGF0YT17ey4uLm9iai8qLCBhdXRvOiBmYWxzZSovfX0gd3JhcHBlcj17dHJ1ZX0vPixcclxuICAgICAgdG9hc3RfaG9tZVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBlbHNlIGRvIHRoaXNcclxuICB9Ly90b2FzdGVyXHJcblxyXG5cclxuICAvLyB1c2FnZTpcclxuICAvLyBjb25zdCB7dG9hc3Rlcn0gPSByZXF1aXJlKCcuLi9lbGVtZW50cy90b2FzdGVyL3RvYXN0ZXIuanMnKTtcclxuICAvLyB0b2FzdGVyKHttb2RlOlwic2hvd1wiLHByZWZpeCxtZXNzYWdlOnNvcnRfdHh0X29ialtsYWJlbF90eHRdLGF1dG86dHJ1ZSxzZWM6NX0pO1xyXG4gIC8vIHRvYXN0ZXIoe2hvbWU6YC4ke3ByZWZpeH1tZXNzYWdlX2Rpc3BsYXlfc3BhbmAsbWVzc2FnZTpzb3J0X3R4dF9vYmpbbGFiZWxfdHh0XSxhdXRvOnRydWUsc2VjOjV9KTtcclxuXHJcbi8qKlxyXG4gKiBAbWVtYmVyb2YgYWN0aW9uLW1zZ1xyXG4gKi9cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/Toast/toaster.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/VirtualScroll/Pully.js":
/*!******************************************************************!*\
  !*** ./js/components/Narrator/components/VirtualScroll/Pully.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nvar _require = __webpack_require__(/*! ../../tools/class_maker */ \"./js/components/Narrator/tools/class_maker.js\"),\n    class_maker = _require.class_maker;\n\nvar display_console = false;\n\n__webpack_require__(/*! ./Pully.scss */ \"./js/components/Narrator/components/VirtualScroll/Pully.scss\");\n/**\r\n * @module Pully\r\n * @category List\r\n * @subcategory scroll\r\n * @desc pully component\r\n * @param {object} data\r\n * @param {number} data.iUN individual unique number - helps identify and set keys when needed\r\n * @param {object} data.container useRef\r\n * @param {object} data.refresh refresh callback\r\n * @param {number} refresh.timer display loader delay in milliseconds\r\n * @param {boolean} wait continue to refresh component or dont update state and wait for component to be unmounted\r\n * @see [VirtualScroll]{@link module:VirtualScroll}\r\n */\n\n/**\r\n * @file\r\n */\n\n\nvar Pully = function Pully(props) {\n  var iUN_ref = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(Math.round(Math.random() * 10000));\n  var _props$data = props.data,\n      _props$data$iUN = _props$data.iUN,\n      iUN = _props$data$iUN === void 0 ? iUN_ref.current : _props$data$iUN,\n      container = _props$data.container,\n      _props$data$refresh = _props$data.refresh,\n      refresh = _props$data$refresh === void 0 ? {\n    timer: 4000,\n    wait: false\n  } : _props$data$refresh,\n      _props$data$timer = _props$data.timer,\n      timer = _props$data$timer === void 0 ? refresh.timer : _props$data$timer,\n      _props$data$wait = _props$data.wait,\n      wait = _props$data$wait === void 0 ? refresh.wait : _props$data$wait;\n  var pullyRef = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(); // const [panHeight, setPanHeight] = useState(0);\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])({\n    panHeight: 0,\n    panRotate: 0\n  }),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(false),\n      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3, 2),\n      showLoader = _useState4[0],\n      setShowLoader = _useState4[1];\n\n  var interacting = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(false);\n  var panning = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(false);\n  var refreshing = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(false);\n  var loading = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(false);\n  var close_timer = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])();\n  var shrinky = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])();\n\n  var reset_pully = function reset_pully() {\n    if (refreshing.current && wait == true) return; // if wait the component will unmount - don't update any more state variables\n\n    interacting.current = false;\n    panning.current = false;\n    refreshing.current = false;\n    loading.current = false; // setPanHeight(0);\n\n    setState({\n      panHeight: 0,\n      panRotate: 0\n    });\n    setShowLoader(false);\n  };\n  /**\r\n   * @callback can_enabled\r\n   * @param  {object} rec hamerjs manager object\r\n   * @param  {object} input hammerjs event object equivalent\r\n   * @param {number} input.direction number code to determine the pan direction (16 = down)\r\n   * @return {boolean} is pan enabled?\r\n   */\n\n\n  var can_enabled = function can_enabled(rec, input) {\n    var scrollTop = container.current.scrollTop; //props.data.scrollTop\n\n    if (typeof rec == \"undefined\" || typeof input == \"undefined\") return false;\n    if (display_console || false) console.warn(\"[pan] rec\", rec);\n    if (display_console || false) console.warn(\"[pan] input\", input);\n    if (display_console || false) console.warn(\"[Pully] scrollTop\", scrollTop);\n    if (display_console || false) console.warn(\"[Pully] panning\", panning.current);\n    var dir = input.direction == 16 ? \"down\" : \"up\";\n    /**\r\n     * @var enable_it\r\n     * @desc determine if pan should be enabled\r\n     * @type {boolean}\r\n     * @example\r\n     *  // if not panning and at the top of the scoll and dir is down,\r\n     * !panning.current && scrollTop < 10 && dir == \"down\"\r\n     * //if panning and scrollTop is less than 10 and direction is up or down\r\n     * // idk how the next 2 are useful (this is the next day docs) but if i remove them it janks\r\n     * panning.current && scrollTop < 10 && dir == \"down\" ||\r\n     * // modified to\r\n     * panning.current && dir == \"down\" ||\r\n     */\n\n    var enable_it = !panning.current && scrollTop < 10 && dir == \"down\" || panning.current && dir == \"down\" || panning.current && dir == \"up\" ? true : false;\n\n    if (enable_it == false) {\n      // rec.manager.touchAction.actions = \"none\";\n      if (display_console || false) console.warn(\"[Pully] disabling pan \", dir);\n      unpan();\n      container.current.style.touchAction = \"auto\";\n      rec.manager.set({\n        touchAction: \"auto\"\n      });\n    } else {\n      if (display_console || false) console.warn(\"[Pully] enabling pan \", dir); // rec.manager.touchAction.actions = \"pan-x\";\n\n      container.current.style.touchAction = \"pan-x\";\n      rec.manager.set({\n        touchAction: \"pan-x\"\n      });\n    } // else\n\n\n    return enable_it;\n  }; // can_enabled\n\n\n  var cE = can_enabled.bind(\"\", props);\n\n  var pan_display = function pan_display(e, whaa) {\n    var me = window.event; // let _this = this;\n    // let panHeight = this;\n    // if(typeof this == \"undefined\" || typeof panHeight == \"undefined\") return;\n    // if(me.type == \"pointerup\") return;// fixes the extra pan event occuring when release the mouse btn\n\n    if (display_console || false) console.warn(\"[Pully] event =\", me);\n    var end_event = me.pointerType.includes(\"touch\") ? \"touchend\" : \"mouseup\";\n    if (!panning.current) document.addEventListener(end_event, unpan, {\n      once: true\n    }); // setting panning.current during the false state helps me not add this multiple times with each movement\n\n    interacting.current = true;\n    panning.current = true;\n    var dir = e.direction == 16 ? \"down\" : \"up\";\n    if (display_console || false) console.warn(\"[Pully] scrollTop\", props.data.scrollTop);\n    if (display_console || false) console.warn(\"[Pully] panning...\", dir);\n    if (display_console || false) console.warn(\"[Pully] deltaY = \", e.deltaY);\n    var maxY = 100;\n    var minY = 0;\n    var rotateMin = 0;\n    var rotateMax = 540; // half is 270\n    // let nextY = e.deltaY < maxY ? e.deltaY : maxY;\n    // let nextY;\n    // switch (dir) {\n    //   case \"down\":\n    //       // nextY = panHeight < maxY ? panHeight + 1 : maxY;\n    //       nextY = e.deltaY < maxY ? e.deltaY : maxY;\n    //     break;\n    //   default:\n    //       // nextY = panHeight > minY ? panHeight - 1 : minY;\n    // }\n\n    /**\r\n     * the delta is used to increment the height - i tried to just add to the height but there were issus with the height useRef and hammer bind\r\n     * @type {number}\r\n     */\n\n    var nextY = e.deltaY > maxY ? maxY : e.deltaY < minY ? minY : e.deltaY;\n    /**\r\n     * @member nextRotate\r\n     * @desc\r\n     * once i figure out nextY, what % of the max is this number?\r\n     * then take this percentage and times it by the rotate max to us the same percentage as the rotate degree\r\n     * @type {number}\r\n     */\n\n    var nextRotate = nextY / maxY * rotateMax;\n    if (display_console || false) console.warn(\"[Pully] nextY = \", nextY);\n\n    if (nextY == maxY) {\n      refreshing.current = true;\n    } else {\n      refreshing.current = false;\n    }\n\n    if (display_console || false) console.warn(\"[Pully] refreshing = \", refreshing.current);\n    window.requestAnimationFrame(function () {\n      setState(function (prev) {\n        return {\n          panHeight: nextY,\n          panRotate: nextRotate\n        };\n      });\n    });\n  }; //pan_display\n\n  /**\r\n   * cosmetic function used only as a delay placeholder - it servers no other purpose\r\n   * @return {Promise} [description]\r\n   */\n\n\n  var delay_display = /*#__PURE__*/function () {\n    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {\n      var ms;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              //shrink back to shrink css display\n              ms = timer; // shrinky.current = await setTimeout(function(){\n              //   // wait a few\n              //   return true;\n              // }, 3000);// half a second? nope too fast\n\n              return _context.abrupt(\"return\", new Promise(function (resolve) {\n                return shrinky.current = setTimeout(resolve, ms);\n              }));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function delay_display() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var pull_me = /*#__PURE__*/function () {\n    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2() {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!refreshing.current\n              /*&& typeof refresh.callback != \"undefined\"*/\n              ) {\n                _context2.next = 10;\n                break;\n              }\n\n              loading.current = true;\n              setShowLoader(true);\n              if (display_console || false) console.warn(\"[Pully] running refresh callback\");\n              _context2.next = 6;\n              return delay_display();\n\n            case 6:\n              refresh.callback();\n              reset_pully(); // Arc dismounts Pully so running this after the callback creates a memory leak\n\n              _context2.next = 12;\n              break;\n\n            case 10:\n              // this runs when pully is manually reset to the start position by the user\n              if (display_console || false) console.warn(\"[Pully] pull_me running reset_pully\"); // this was the memory leak\n\n              reset_pully();\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function pull_me() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // pull_me\n\n\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (display_console || false) console.warn(\"[Pully] pullyRef = \", pullyRef);\n    if (display_console || false) console.warn(\"[Pully] container = \", container);\n    var hammertime;\n    window.hammertime = hammertime = new Hammer.Manager(container.current, {\n      domEvents: true\n    }); //\n    // set the directions\n\n    hammertime.add(new Hammer.Pan({\n      enable: can_enabled\n    }));\n    hammertime.get(\"pan\").set({\n      direction: Hammer.DIRECTION_VERTICAL\n    }); //[Hammer.DIRECTION_UP,Hammer.DIRECTION_DOWN] // somehow this direction array not longer works\n    // hammertime.on(\"panup, pandown\", Hammer.bindFn(pan_display,panHeight),false);\n\n    hammertime.on(\"panup pandown\", pan_display);\n    hammertime.on(\"panend\", unpan);\n    return function () {\n      // cleanup\n      if (hammertime) {\n        hammertime.destroy();\n      }\n\n      if (typeof close_timer.current != \"undefined\") {\n        clearTimeout(close_timer.current);\n      }\n\n      if (typeof shrinky.current != \"undefined\") {\n        clearTimeout(shrinky.current);\n      }\n    }; // return\n  }, []);\n  /**\r\n   * triggers during panend/ and touchend, mouseup but it sometimes fails to be detected so close_timer timeout is used as a catch all\r\n   * @return {void}\r\n   */\n\n  var unpan = function unpan() {\n    if (display_console || false) console.warn(\"[Pully] panning ending...\");\n    if (refreshing.current) return; // don't do anything if were in refreshing mode\n\n    panning.current = false; // pullyRef.current.style.height = \"0px\";\n    // hammertime.set({touchAction:\"auto\"})// fails\n    // setPanHeight(0);\n\n    setState({\n      panHeight: 0,\n      panRotate: 0\n    });\n  };\n\n  if (typeof close_timer.current != \"undefined\") clearTimeout(close_timer.current);\n\n  if (interacting.current == true && loading.current == false) {\n    // this timeout makes sure the the panning window doesn't hang open\n    close_timer.current = setTimeout(function () {\n      pull_me();\n    }, 1000); // half a second? nope too fast\n  }\n\n  if (display_console || false) console.warn(\"[Pully] rendering...\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(class_maker({\n      name: \"pully\",\n      main: \"pull_to_refresh\",\n      iUN: iUN\n    }), \" \").concat(showLoader ? \"shrink\" : \"\"),\n    ref: pullyRef,\n    style: {\n      height: \"\".concat(state.panHeight, \"px\")\n    }\n  }, !showLoader ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pull-arrow d3-ico icon-spinner11 \".concat(refreshing.current ? \"envy heartbeat\" : \"\"),\n    style: {\n      transform: \"rotateZ(\".concat(state.panRotate, \"deg)\")\n    }\n  }) : null, showLoader ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pull-loader\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bounce1\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bounce2\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bounce3\"\n  })) : null);\n}; // Pully\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (React.memo(Pully));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVmlydHVhbFNjcm9sbC9QdWxseS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9WaXJ0dWFsU2Nyb2xsL1B1bGx5LmpzPzg5OGQiXSwic291cmNlc0NvbnRlbnQiOlsiICBpbXBvcnQgLypSZWFjdCwqLyB7bWVtbywgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VNZW1vfSBmcm9tICdyZWFjdCc7XHJcbiAgY29uc3Qge2NsYXNzX21ha2VyfSA9IHJlcXVpcmUoJy4uLy4uL3Rvb2xzL2NsYXNzX21ha2VyJyk7XHJcbiAgY29uc3QgZGlzcGxheV9jb25zb2xlID0gZmFsc2U7XHJcbiAgcmVxdWlyZSgnLi9QdWxseS5zY3NzJyk7XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAbW9kdWxlIFB1bGx5XHJcbiAgICogQGNhdGVnb3J5IExpc3RcclxuICAgKiBAc3ViY2F0ZWdvcnkgc2Nyb2xsXHJcbiAgICogQGRlc2MgcHVsbHkgY29tcG9uZW50XHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGFcclxuICAgKiBAcGFyYW0ge251bWJlcn0gZGF0YS5pVU4gaW5kaXZpZHVhbCB1bmlxdWUgbnVtYmVyIC0gaGVscHMgaWRlbnRpZnkgYW5kIHNldCBrZXlzIHdoZW4gbmVlZGVkXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEuY29udGFpbmVyIHVzZVJlZlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhLnJlZnJlc2ggcmVmcmVzaCBjYWxsYmFja1xyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZWZyZXNoLnRpbWVyIGRpc3BsYXkgbG9hZGVyIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gd2FpdCBjb250aW51ZSB0byByZWZyZXNoIGNvbXBvbmVudCBvciBkb250IHVwZGF0ZSBzdGF0ZSBhbmQgd2FpdCBmb3IgY29tcG9uZW50IHRvIGJlIHVubW91bnRlZFxyXG4gICAqIEBzZWUgW1ZpcnR1YWxTY3JvbGxde0BsaW5rIG1vZHVsZTpWaXJ0dWFsU2Nyb2xsfVxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiBAZmlsZVxyXG4gICAqL1xyXG5cclxuICBjb25zdCBQdWxseSA9IChwcm9wcykgPT4ge1xyXG5cclxuICAgIGNvbnN0IGlVTl9yZWYgPSB1c2VSZWYoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMDApKTtcclxuXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGlVTiA9IGlVTl9yZWYuY3VycmVudCxcclxuICAgICAgY29udGFpbmVyLFxyXG4gICAgICByZWZyZXNoID0ge3RpbWVyOiA0MDAwLCB3YWl0OiBmYWxzZX0sXHJcbiAgICAgIHRpbWVyID0gcmVmcmVzaC50aW1lcixcclxuICAgICAgd2FpdCA9IHJlZnJlc2gud2FpdFxyXG4gICAgfSA9IHByb3BzLmRhdGE7XHJcblxyXG5cclxuICAgIGNvbnN0IHB1bGx5UmVmID0gdXNlUmVmKCk7XHJcbiAgICAvLyBjb25zdCBbcGFuSGVpZ2h0LCBzZXRQYW5IZWlnaHRdID0gdXNlU3RhdGUoMCk7XHJcbiAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtwYW5IZWlnaHQ6MCwgcGFuUm90YXRlOjB9KTtcclxuICAgIGNvbnN0IFtzaG93TG9hZGVyLCBzZXRTaG93TG9hZGVyXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICAgIGNvbnN0IGludGVyYWN0aW5nID0gdXNlUmVmKGZhbHNlKTtcclxuICAgIGNvbnN0IHBhbm5pbmcgPSB1c2VSZWYoZmFsc2UpO1xyXG4gICAgY29uc3QgcmVmcmVzaGluZyA9IHVzZVJlZihmYWxzZSk7XHJcbiAgICBjb25zdCBsb2FkaW5nID0gdXNlUmVmKGZhbHNlKTtcclxuICAgIGNvbnN0IGNsb3NlX3RpbWVyID0gdXNlUmVmKCk7XHJcbiAgICBjb25zdCBzaHJpbmt5ID0gdXNlUmVmKCk7XHJcblxyXG4gICAgY29uc3QgcmVzZXRfcHVsbHkgPSAoKSA9PiB7XHJcblxyXG4gICAgICBpZiggcmVmcmVzaGluZy5jdXJyZW50ICYmIHdhaXQgPT0gdHJ1ZSkgcmV0dXJuOy8vIGlmIHdhaXQgdGhlIGNvbXBvbmVudCB3aWxsIHVubW91bnQgLSBkb24ndCB1cGRhdGUgYW55IG1vcmUgc3RhdGUgdmFyaWFibGVzXHJcblxyXG4gICAgICBpbnRlcmFjdGluZy5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgIHBhbm5pbmcuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICByZWZyZXNoaW5nLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgbG9hZGluZy5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgIC8vIHNldFBhbkhlaWdodCgwKTtcclxuICAgICAgc2V0U3RhdGUoe3BhbkhlaWdodDowLCBwYW5Sb3RhdGU6MH0pO1xyXG4gICAgICBzZXRTaG93TG9hZGVyKGZhbHNlKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2FsbGJhY2sgY2FuX2VuYWJsZWRcclxuICAgICAqIEBwYXJhbSAge29iamVjdH0gcmVjIGhhbWVyanMgbWFuYWdlciBvYmplY3RcclxuICAgICAqIEBwYXJhbSAge29iamVjdH0gaW5wdXQgaGFtbWVyanMgZXZlbnQgb2JqZWN0IGVxdWl2YWxlbnRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbnB1dC5kaXJlY3Rpb24gbnVtYmVyIGNvZGUgdG8gZGV0ZXJtaW5lIHRoZSBwYW4gZGlyZWN0aW9uICgxNiA9IGRvd24pXHJcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBpcyBwYW4gZW5hYmxlZD9cclxuICAgICAqL1xyXG4gICAgY29uc3QgY2FuX2VuYWJsZWQgPSAocmVjLCBpbnB1dCkgPT4ge1xyXG5cclxuICAgICAgbGV0IHNjcm9sbFRvcCA9IGNvbnRhaW5lci5jdXJyZW50LnNjcm9sbFRvcDsvL3Byb3BzLmRhdGEuc2Nyb2xsVG9wXHJcblxyXG4gICAgICBpZih0eXBlb2YgcmVjID09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGlucHV0ID09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtwYW5dIHJlY2AscmVjKTtcclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtwYW5dIGlucHV0YCxpbnB1dCk7XHJcbiAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKGBbUHVsbHldIHNjcm9sbFRvcGAsc2Nyb2xsVG9wKTtcclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtQdWxseV0gcGFubmluZ2AscGFubmluZy5jdXJyZW50KTtcclxuXHJcbiAgICAgIGxldCBkaXIgPSAoaW5wdXQuZGlyZWN0aW9uID09IDE2KSA/IFwiZG93blwiIDogXCJ1cFwiO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEB2YXIgZW5hYmxlX2l0XHJcbiAgICAgICAqIEBkZXNjIGRldGVybWluZSBpZiBwYW4gc2hvdWxkIGJlIGVuYWJsZWRcclxuICAgICAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAqICAvLyBpZiBub3QgcGFubmluZyBhbmQgYXQgdGhlIHRvcCBvZiB0aGUgc2NvbGwgYW5kIGRpciBpcyBkb3duLFxyXG4gICAgICAgKiAhcGFubmluZy5jdXJyZW50ICYmIHNjcm9sbFRvcCA8IDEwICYmIGRpciA9PSBcImRvd25cIlxyXG4gICAgICAgKiAvL2lmIHBhbm5pbmcgYW5kIHNjcm9sbFRvcCBpcyBsZXNzIHRoYW4gMTAgYW5kIGRpcmVjdGlvbiBpcyB1cCBvciBkb3duXHJcbiAgICAgICAqIC8vIGlkayBob3cgdGhlIG5leHQgMiBhcmUgdXNlZnVsICh0aGlzIGlzIHRoZSBuZXh0IGRheSBkb2NzKSBidXQgaWYgaSByZW1vdmUgdGhlbSBpdCBqYW5rc1xyXG4gICAgICAgKiBwYW5uaW5nLmN1cnJlbnQgJiYgc2Nyb2xsVG9wIDwgMTAgJiYgZGlyID09IFwiZG93blwiIHx8XHJcbiAgICAgICAqIC8vIG1vZGlmaWVkIHRvXHJcbiAgICAgICAqIHBhbm5pbmcuY3VycmVudCAmJiBkaXIgPT0gXCJkb3duXCIgfHxcclxuICAgICAgICovXHJcbiAgICAgIGxldCBlbmFibGVfaXQgPSAoIXBhbm5pbmcuY3VycmVudCAmJiBzY3JvbGxUb3AgPCAxMCAmJiBkaXIgPT0gXCJkb3duXCIgfHxcclxuICAgICAgcGFubmluZy5jdXJyZW50ICYmIGRpciA9PSBcImRvd25cIiB8fFxyXG4gICAgICBwYW5uaW5nLmN1cnJlbnQgJiYgZGlyID09IFwidXBcIlxyXG4gICAgICApID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgaWYoZW5hYmxlX2l0ID09IGZhbHNlKXtcclxuICAgICAgICAvLyByZWMubWFuYWdlci50b3VjaEFjdGlvbi5hY3Rpb25zID0gXCJub25lXCI7XHJcbiAgICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtQdWxseV0gZGlzYWJsaW5nIHBhbiBgLGRpcik7XHJcbiAgICAgICAgdW5wYW4oKTtcclxuICAgICAgICBjb250YWluZXIuY3VycmVudC5zdHlsZS50b3VjaEFjdGlvbiA9IFwiYXV0b1wiO1xyXG4gICAgICAgIHJlYy5tYW5hZ2VyLnNldCh7dG91Y2hBY3Rpb246XCJhdXRvXCJ9KTtcclxuICAgICAgfWVsc2Uge1xyXG4gICAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKGBbUHVsbHldIGVuYWJsaW5nIHBhbiBgLGRpcik7XHJcbiAgICAgICAgLy8gcmVjLm1hbmFnZXIudG91Y2hBY3Rpb24uYWN0aW9ucyA9IFwicGFuLXhcIjtcclxuICAgICAgICBjb250YWluZXIuY3VycmVudC5zdHlsZS50b3VjaEFjdGlvbiA9IFwicGFuLXhcIjtcclxuICAgICAgICByZWMubWFuYWdlci5zZXQoe3RvdWNoQWN0aW9uOlwicGFuLXhcIn0pO1xyXG4gICAgICB9Ly8gZWxzZVxyXG5cclxuICAgICAgcmV0dXJuIGVuYWJsZV9pdDtcclxuICAgIH0vLyBjYW5fZW5hYmxlZFxyXG5cclxuICAgIGxldCBjRSA9IGNhbl9lbmFibGVkLmJpbmQoXCJcIixwcm9wcyk7XHJcblxyXG4gICAgY29uc3QgcGFuX2Rpc3BsYXkgPSBmdW5jdGlvbiAoZSx3aGFhKSB7XHJcblxyXG4gICAgICBsZXQgbWUgPSB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgIC8vIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICAgIC8vIGxldCBwYW5IZWlnaHQgPSB0aGlzO1xyXG5cclxuICAgICAgLy8gaWYodHlwZW9mIHRoaXMgPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgcGFuSGVpZ2h0ID09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcclxuICAgICAgLy8gaWYobWUudHlwZSA9PSBcInBvaW50ZXJ1cFwiKSByZXR1cm47Ly8gZml4ZXMgdGhlIGV4dHJhIHBhbiBldmVudCBvY2N1cmluZyB3aGVuIHJlbGVhc2UgdGhlIG1vdXNlIGJ0blxyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1B1bGx5XSBldmVudCA9YCxtZSk7XHJcbiAgICAgIGxldCBlbmRfZXZlbnQgPSAobWUucG9pbnRlclR5cGUuaW5jbHVkZXMoXCJ0b3VjaFwiKSkgPyBcInRvdWNoZW5kXCIgOiBcIm1vdXNldXBcIjtcclxuICAgICAgaWYoIXBhbm5pbmcuY3VycmVudCkgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihlbmRfZXZlbnQsdW5wYW4se29uY2U6dHJ1ZX0pOy8vIHNldHRpbmcgcGFubmluZy5jdXJyZW50IGR1cmluZyB0aGUgZmFsc2Ugc3RhdGUgaGVscHMgbWUgbm90IGFkZCB0aGlzIG11bHRpcGxlIHRpbWVzIHdpdGggZWFjaCBtb3ZlbWVudFxyXG5cclxuICAgICAgaW50ZXJhY3RpbmcuY3VycmVudCA9IHRydWU7XHJcbiAgICAgIHBhbm5pbmcuY3VycmVudCA9IHRydWU7XHJcbiAgICAgIGxldCBkaXIgPSAoZS5kaXJlY3Rpb24gPT0gMTYpID8gXCJkb3duXCIgOiBcInVwXCI7XHJcblxyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1B1bGx5XSBzY3JvbGxUb3BgLHByb3BzLmRhdGEuc2Nyb2xsVG9wKTtcclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtQdWxseV0gcGFubmluZy4uLmAsZGlyKTtcclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtQdWxseV0gZGVsdGFZID0gYCxlLmRlbHRhWSk7XHJcblxyXG4gICAgICBsZXQgbWF4WSA9IDEwMDtcclxuICAgICAgbGV0IG1pblkgPSAwO1xyXG5cclxuICAgICAgbGV0IHJvdGF0ZU1pbiA9IDA7XHJcbiAgICAgIGxldCByb3RhdGVNYXggPSA1NDA7Ly8gaGFsZiBpcyAyNzBcclxuXHJcblxyXG5cclxuICAgICAgLy8gbGV0IG5leHRZID0gZS5kZWx0YVkgPCBtYXhZID8gZS5kZWx0YVkgOiBtYXhZO1xyXG4gICAgICAvLyBsZXQgbmV4dFk7XHJcbiAgICAgIC8vIHN3aXRjaCAoZGlyKSB7XHJcbiAgICAgIC8vICAgY2FzZSBcImRvd25cIjpcclxuICAgICAgLy8gICAgICAgLy8gbmV4dFkgPSBwYW5IZWlnaHQgPCBtYXhZID8gcGFuSGVpZ2h0ICsgMSA6IG1heFk7XHJcbiAgICAgIC8vICAgICAgIG5leHRZID0gZS5kZWx0YVkgPCBtYXhZID8gZS5kZWx0YVkgOiBtYXhZO1xyXG4gICAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAgIC8vICAgZGVmYXVsdDpcclxuICAgICAgLy8gICAgICAgLy8gbmV4dFkgPSBwYW5IZWlnaHQgPiBtaW5ZID8gcGFuSGVpZ2h0IC0gMSA6IG1pblk7XHJcbiAgICAgIC8vIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiB0aGUgZGVsdGEgaXMgdXNlZCB0byBpbmNyZW1lbnQgdGhlIGhlaWdodCAtIGkgdHJpZWQgdG8ganVzdCBhZGQgdG8gdGhlIGhlaWdodCBidXQgdGhlcmUgd2VyZSBpc3N1cyB3aXRoIHRoZSBoZWlnaHQgdXNlUmVmIGFuZCBoYW1tZXIgYmluZFxyXG4gICAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgbGV0IG5leHRZID0gZS5kZWx0YVkgPiBtYXhZID8gbWF4WSA6IGUuZGVsdGFZIDwgbWluWSA/IG1pblkgOiBlLmRlbHRhWTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAbWVtYmVyIG5leHRSb3RhdGVcclxuICAgICAgICogQGRlc2NcclxuICAgICAgICogb25jZSBpIGZpZ3VyZSBvdXQgbmV4dFksIHdoYXQgJSBvZiB0aGUgbWF4IGlzIHRoaXMgbnVtYmVyP1xyXG4gICAgICAgKiB0aGVuIHRha2UgdGhpcyBwZXJjZW50YWdlIGFuZCB0aW1lcyBpdCBieSB0aGUgcm90YXRlIG1heCB0byB1cyB0aGUgc2FtZSBwZXJjZW50YWdlIGFzIHRoZSByb3RhdGUgZGVncmVlXHJcbiAgICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBsZXQgbmV4dFJvdGF0ZSA9IChuZXh0WSAvIG1heFkpICogcm90YXRlTWF4O1xyXG5cclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtQdWxseV0gbmV4dFkgPSBgLG5leHRZKTtcclxuXHJcbiAgICAgIGlmKG5leHRZID09IG1heFkpe1xyXG4gICAgICAgIHJlZnJlc2hpbmcuY3VycmVudCA9IHRydWU7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHJlZnJlc2hpbmcuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1B1bGx5XSByZWZyZXNoaW5nID0gYCxyZWZyZXNoaW5nLmN1cnJlbnQpO1xyXG5cclxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgc2V0U3RhdGUoKHByZXYpID0+IHtcclxuICAgICAgICAgIHJldHVybiB7cGFuSGVpZ2h0OiBuZXh0WSwgcGFuUm90YXRlOiBuZXh0Um90YXRlfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgfS8vcGFuX2Rpc3BsYXlcclxuXHJcbiAgICAvKipcclxuICAgICAqIGNvc21ldGljIGZ1bmN0aW9uIHVzZWQgb25seSBhcyBhIGRlbGF5IHBsYWNlaG9sZGVyIC0gaXQgc2VydmVycyBubyBvdGhlciBwdXJwb3NlXHJcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBbZGVzY3JpcHRpb25dXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IGRlbGF5X2Rpc3BsYXkgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vc2hyaW5rIGJhY2sgdG8gc2hyaW5rIGNzcyBkaXNwbGF5XHJcbiAgICAgIGxldCBtcyA9IHRpbWVyO1xyXG4gICAgICAvLyBzaHJpbmt5LmN1cnJlbnQgPSBhd2FpdCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgIC8vICAgLy8gd2FpdCBhIGZld1xyXG4gICAgICAvLyAgIHJldHVybiB0cnVlO1xyXG4gICAgICAvLyB9LCAzMDAwKTsvLyBoYWxmIGEgc2Vjb25kPyBub3BlIHRvbyBmYXN0XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzaHJpbmt5LmN1cnJlbnQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHVsbF9tZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gdGhpcyBydW4gd2hlbiBwdWxseSBpcyBmdWxseSBleHRlbmRlZCBhbmQgYXV0byByZXNldHMgdG8gdGhlIHN0YXJ0IHBvc2l0aW9uXHJcbiAgICAgIGlmKHJlZnJlc2hpbmcuY3VycmVudCAvKiYmIHR5cGVvZiByZWZyZXNoLmNhbGxiYWNrICE9IFwidW5kZWZpbmVkXCIqLyl7XHJcbiAgICAgICAgbG9hZGluZy5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgICBzZXRTaG93TG9hZGVyKHRydWUpO1xyXG4gICAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKGBbUHVsbHldIHJ1bm5pbmcgcmVmcmVzaCBjYWxsYmFja2ApO1xyXG4gICAgICAgIGF3YWl0IGRlbGF5X2Rpc3BsYXkoKVxyXG4gICAgICAgIHJlZnJlc2guY2FsbGJhY2soKTtcclxuICAgICAgICByZXNldF9wdWxseSgpOy8vIEFyYyBkaXNtb3VudHMgUHVsbHkgc28gcnVubmluZyB0aGlzIGFmdGVyIHRoZSBjYWxsYmFjayBjcmVhdGVzIGEgbWVtb3J5IGxlYWtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgLy8gdGhpcyBydW5zIHdoZW4gcHVsbHkgaXMgbWFudWFsbHkgcmVzZXQgdG8gdGhlIHN0YXJ0IHBvc2l0aW9uIGJ5IHRoZSB1c2VyXHJcbiAgICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtQdWxseV0gcHVsbF9tZSBydW5uaW5nIHJlc2V0X3B1bGx5YCk7Ly8gdGhpcyB3YXMgdGhlIG1lbW9yeSBsZWFrXHJcbiAgICAgICAgcmVzZXRfcHVsbHkoKTtcclxuICAgICAgfVxyXG4gICAgfS8vIHB1bGxfbWVcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1B1bGx5XSBwdWxseVJlZiA9IGAscHVsbHlSZWYpO1xyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1B1bGx5XSBjb250YWluZXIgPSBgLGNvbnRhaW5lcik7XHJcblxyXG4gICAgICBsZXQgaGFtbWVydGltZTtcclxuICAgICAgd2luZG93LmhhbW1lcnRpbWUgPSBoYW1tZXJ0aW1lID0gbmV3IEhhbW1lci5NYW5hZ2VyKGNvbnRhaW5lci5jdXJyZW50LHtkb21FdmVudHM6dHJ1ZX0pOy8vXHJcbiAgICAgIC8vIHNldCB0aGUgZGlyZWN0aW9uc1xyXG4gICAgICBoYW1tZXJ0aW1lLmFkZChuZXcgSGFtbWVyLlBhbih7ZW5hYmxlOmNhbl9lbmFibGVkfSkpO1xyXG5cclxuICAgICAgaGFtbWVydGltZS5nZXQoXCJwYW5cIikuc2V0KHtkaXJlY3Rpb246IEhhbW1lci5ESVJFQ1RJT05fVkVSVElDQUx9KTsvL1tIYW1tZXIuRElSRUNUSU9OX1VQLEhhbW1lci5ESVJFQ1RJT05fRE9XTl0gLy8gc29tZWhvdyB0aGlzIGRpcmVjdGlvbiBhcnJheSBub3QgbG9uZ2VyIHdvcmtzXHJcblxyXG4gICAgICAvLyBoYW1tZXJ0aW1lLm9uKFwicGFudXAsIHBhbmRvd25cIiwgSGFtbWVyLmJpbmRGbihwYW5fZGlzcGxheSxwYW5IZWlnaHQpLGZhbHNlKTtcclxuICAgICAgaGFtbWVydGltZS5vbihcInBhbnVwIHBhbmRvd25cIixwYW5fZGlzcGxheSk7XHJcblxyXG4gICAgICBoYW1tZXJ0aW1lLm9uKFwicGFuZW5kXCIsdW5wYW4pO1xyXG5cclxuICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAvLyBjbGVhbnVwXHJcbiAgICAgICAgaWYoaGFtbWVydGltZSl7XHJcbiAgICAgICAgICBoYW1tZXJ0aW1lLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgY2xvc2VfdGltZXIuY3VycmVudCAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQoY2xvc2VfdGltZXIuY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHNocmlua3kuY3VycmVudCAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2hyaW5reS5jdXJyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0vLyByZXR1cm5cclxuXHJcbiAgICB9LFtdKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHRyaWdnZXJzIGR1cmluZyBwYW5lbmQvIGFuZCB0b3VjaGVuZCwgbW91c2V1cCBidXQgaXQgc29tZXRpbWVzIGZhaWxzIHRvIGJlIGRldGVjdGVkIHNvIGNsb3NlX3RpbWVyIHRpbWVvdXQgaXMgdXNlZCBhcyBhIGNhdGNoIGFsbFxyXG4gICAgICogQHJldHVybiB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgY29uc3QgdW5wYW4gPSAoKSA9PiB7XHJcbiAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKGBbUHVsbHldIHBhbm5pbmcgZW5kaW5nLi4uYCk7XHJcbiAgICAgIGlmKHJlZnJlc2hpbmcuY3VycmVudCkgcmV0dXJuOy8vIGRvbid0IGRvIGFueXRoaW5nIGlmIHdlcmUgaW4gcmVmcmVzaGluZyBtb2RlXHJcbiAgICAgIHBhbm5pbmcuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAvLyBwdWxseVJlZi5jdXJyZW50LnN0eWxlLmhlaWdodCA9IFwiMHB4XCI7XHJcbiAgICAgIC8vIGhhbW1lcnRpbWUuc2V0KHt0b3VjaEFjdGlvbjpcImF1dG9cIn0pLy8gZmFpbHNcclxuICAgICAgLy8gc2V0UGFuSGVpZ2h0KDApO1xyXG4gICAgICBzZXRTdGF0ZSh7cGFuSGVpZ2h0OjAsIHBhblJvdGF0ZTowfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodHlwZW9mIGNsb3NlX3RpbWVyLmN1cnJlbnQgIT0gXCJ1bmRlZmluZWRcIikgY2xlYXJUaW1lb3V0KGNsb3NlX3RpbWVyLmN1cnJlbnQpO1xyXG5cclxuICAgIGlmKGludGVyYWN0aW5nLmN1cnJlbnQgPT0gdHJ1ZSAmJiBsb2FkaW5nLmN1cnJlbnQgPT0gZmFsc2Upe1xyXG4gICAgICAvLyB0aGlzIHRpbWVvdXQgbWFrZXMgc3VyZSB0aGUgdGhlIHBhbm5pbmcgd2luZG93IGRvZXNuJ3QgaGFuZyBvcGVuXHJcbiAgICAgIGNsb3NlX3RpbWVyLmN1cnJlbnQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcHVsbF9tZSgpO1xyXG4gICAgICB9LCAxMDAwKTsvLyBoYWxmIGEgc2Vjb25kPyBub3BlIHRvbyBmYXN0XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtQdWxseV0gcmVuZGVyaW5nLi4uYCk7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtgJHtjbGFzc19tYWtlcih7bmFtZTpcInB1bGx5XCIsbWFpbjpcInB1bGxfdG9fcmVmcmVzaFwiLGlVTn0pfSAke3Nob3dMb2FkZXIgPyBcInNocmlua1wiIDogXCJcIn1gfSByZWY9e3B1bGx5UmVmfSBzdHlsZT17e2hlaWdodDpgJHtzdGF0ZS5wYW5IZWlnaHR9cHhgfX0+XHJcbiAgICAgIHshc2hvd0xvYWRlciA/ICg8ZGl2IGNsYXNzTmFtZT17YHB1bGwtYXJyb3cgZDMtaWNvIGljb24tc3Bpbm5lcjExICR7cmVmcmVzaGluZy5jdXJyZW50ID8gXCJlbnZ5IGhlYXJ0YmVhdFwiIDogXCJcIn1gfSBzdHlsZT17e3RyYW5zZm9ybTpgcm90YXRlWigke3N0YXRlLnBhblJvdGF0ZX1kZWcpYH19PjwvZGl2PikgOiBudWxsfVxyXG4gICAgICB7c2hvd0xvYWRlciA/IChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB1bGwtbG9hZGVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvdW5jZTFcIj48L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm91bmNlMlwiPjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3VuY2UzXCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICkgOiBudWxsfVxyXG4gICAgPC9kaXY+O1xyXG4gIH0vLyBQdWxseVxyXG5cclxuICBleHBvcnQgZGVmYXVsdCBSZWFjdC5tZW1vKFB1bGx5KTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVFBO0FBQUE7QUFDQTtBQVRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBVUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFMQTtBQUFBO0FBQ0E7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQVRBO0FBQUE7QUFDQTtBQURBO0FBVUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/VirtualScroll/Pully.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/VirtualScroll/Pully.scss":
/*!********************************************************************!*\
  !*** ./js/components/Narrator/components/VirtualScroll/Pully.scss ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVmlydHVhbFNjcm9sbC9QdWxseS5zY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci9jb21wb25lbnRzL1ZpcnR1YWxTY3JvbGwvUHVsbHkuc2Nzcz8zNDQ0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/VirtualScroll/Pully.scss\n");

/***/ }),

/***/ "./js/components/Narrator/components/VirtualScroll/Views.js":
/*!******************************************************************!*\
  !*** ./js/components/Narrator/components/VirtualScroll/Views.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _VirtualScroll_VirtualScroll__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../VirtualScroll/VirtualScroll */ \"./js/components/Narrator/components/VirtualScroll/VirtualScroll.js\");\n/* harmony import */ var _Loader_Loader__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Loader/Loader */ \"./js/components/Narrator/components/Loader/Loader.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default()(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n // import Item from './lib/Item/Item';// deprecated\n// import Clips from '../Clips/Clips';\n\n // import IconWall from '../IconWall/IconWall';\n\n\n\nvar _require = __webpack_require__(/*! ../../tools/exists */ \"./js/components/Narrator/tools/exists.js\"),\n    exists = _require.exists,\n    obj_exists = _require.obj_exists; // const {wrapr} = require('../../tools/wrapr');\n\n\nvar _require2 = __webpack_require__(/*! ../VirtualScroll/observer */ \"./js/components/Narrator/components/VirtualScroll/observer.js\"),\n    observerSetupCallback = _require2.observerSetupCallback; // import {PaperProvider, PaperContext } from '../Paper/lib/paperContext';\n\n\nvar display_console = false;\n\n__webpack_require__(/*! ./Views.scss */ \"./js/components/Narrator/components/VirtualScroll/Views.scss\");\n/**\r\n * a dumb portable Views component that works directly with vScroll - it doesn't know the content template\r\n * modified from Arc\r\n * @category Paper\r\n * @subcategory views\r\n * @module Views\r\n * @desc views main class based component\r\n * @requires VirtualScroll\r\n * @see {@link module:MainCore}\r\n */\n\n/**\r\n * @file\r\n */\n\n/**\r\n * [Views description]\r\n * @extends Component\r\n */\n\n\nvar Views = /*#__PURE__*/function (_Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default()(Views, _Component);\n\n  var _super = _createSuper(Views);\n\n  /*\r\n  .dP\"Y8 888888    db    888888 888888\r\n  `Ybo.\"   88     dPYb     88   88__\r\n  o.`Y8b   88    dP__Yb    88   88\"\"\r\n  8bodP'   88   dP\"\"\"\"Yb   88   888888\r\n  \r\n  [4MAX](http://patorjk.com/software/taag/#p=display&f=4Max&t=state)\r\n  */\n  // this will get all data eventually unless i put a total (failsafe)\n  // once i create forever scrolling the failsafe wont be needed\n  // let [list, setList] = useState([]);\n  // let [loading, setLoading] = useState(true);\n  // let return_data_length = useRef(0);\n  // let init = useRef(false);\n  // let [info_page, setPage] = useState(1);\n  function Views(props) {\n    var _this2;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, Views);\n\n    _this2 = _super.call(this, props);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"componentDidMount\", function () {\n      // this.root_viewport.current = document.querySelector(`.views_view_content.${this.state.name}`);\n      // this.root_viewport.current = `.views_scroll_viewport_${this.state.iUN}`;//latest\n      // this.restock_ndx.current = 10;// i may not need this\n      // if(display_console || false) console.warn('[Views] component updated');\n      var cancel_obj = {};\n      _this2.cancel_obj.current = cancel_obj;\n      if (_this2.state.render != \"auto\") return;\n\n      if (_this2.props.data.callback != undefined) {\n        _this2.props.data.callback({\n          obj: cancel_obj\n        });\n      } else {\n        _this2.fetch_info({\n          obj: cancel_obj\n        });\n      } // else\n      // if (display_console || false) console.debug('[Views] CDM render_nbr', this.render_nbr.current);\n\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"componentWillUnmount\", function () {\n      if (_this2.cancel_obj.current.cancelToken) {\n        _this2.cancel_obj.current.cancelToken.cancel('Operation canceled due to new request.');\n      } // if\n\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"componentDidUpdate\", function () {\n      var state = _this2.state;\n\n      if (state.init == true && state.has_more && state.render_double && _this2.double_init.current == false) {\n        //set new variables and fetch again\n        // info_page ++;\n        if (display_console || false) console.warn(\"[Views] rendering double\");\n\n        _this2.props.data.callback();\n      } // end if\n\n\n      if (_this2.init.current == false) {\n        _this2.init.current = true;\n\n        _this2.forceUpdate();\n      }\n\n      if (state.reset) {\n        // i may need a reset_double\n        // console.error(`[Views.js] state.reset was called...`);\n        if (_this2.props.data && _this2.props.data.callback) {\n          _this2.props.data.callback(); // i did this if the request was external\n\n        } else {\n          _this2.fetch_info();\n        } // state.reset = false;\n\n\n        _this2.setState({\n          reset: false\n        });\n      } // let ul_el = document.querySelector(`.views_view_content_${this.state.iUN}`);\n\n\n      var ul_el = document.querySelector(\".\".concat(_this2.props.data.home)); // if(display_console || false) console.warn(\"[views] views_view_content\",ul_el);\n\n      if (_this2.height.current == 0 && ul_el) {\n        // resize fix hack\n        // the default for this.height.current is 470 - after 2 renders it can become set to zero using the ul_el's getBoundingClientRect\n        // if it gets set to zero it would normally be the end of the line. but we use this hack to create one more render at a\n        // specific time.  so if it is zero (due to css display: none), come in here and create a resize observer\n        // on resize and with _this.height.current still at zero as a precaution reset the auto_height variable to false to\n        // allow the height to be set one more time - or repeat this process at the next resize - otherwise unobserve\n        var _this3 = _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2);\n\n        var resizer = new ResizeObserver(function (entries) {\n          // _this.force_scroll.current = false;\n          if (_this3.height.current == 0) {\n            _this2.auto_height.current = false;\n            if (display_console || false) console.warn(\"[Views] updating height\");\n\n            _this3.forceUpdate();\n\n            resizer.unobserve(entries[0].target);\n          } // loadItems(10);\n          // if(display_console || false) console.log('Loaded new items');\n\n        }); // start observing\n\n        resizer.observe(ul_el);\n      } // if this.force_scroll\n      // if (display_console || false) console.debug('[Views] CDU render_nbr', this.render_nbr.current);\n\n\n      if (_this2.state.flip && _this2.force_scroll.current == true) {\n        var scroll_pos = Number(_this2.save_scroll_pos.current) + _this2.state.shortfall;\n\n        _this2.vscroll_ref.current.force_scroll(scroll_pos);\n\n        _this2.force_scroll.current = false;\n      } // if\n\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"_this\", _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"fetch_info\", /*#__PURE__*/_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default.a.mark(function _callee() {\n      var obj,\n          views,\n          state,\n          force_request,\n          uploadData,\n          ctrl_Url,\n          has_value,\n          same_value,\n          meseeks,\n          cancel_obj,\n          response,\n          response_data,\n          requested_items,\n          _yield$create_order,\n          result_ids,\n          result_data,\n          me_seeks,\n          _args = arguments;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              obj = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n              views = _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2);\n              state = _this2.state;\n              force_request = obj.force_request || false; // helps external triggers renew without updating state.has_more;\n\n              if (!(!force_request && state.has_more == false)) {\n                _context.next = 6;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 6:\n              // this.render_nbr.current = this.render_nbr.current + 1;\n              // if (display_console || false) console.debug('[Views] new render_nbr', this.render_nbr.current);\n              //save the current scrollBottom\n              if (state.flip && obj_exists(views.vscroll_ref, \"current.force_scroll\")) {\n                // save scroll position after calculating scrollTop distance from the bottom\n                views.save_scroll_pos.current = views.vscroll_ref.current.getScrollBottom(views.vscroll_ref.current.viewport.current, true);\n              } // if\n\n\n              _context.prev = 7;\n              // let data_id = data_obj._id;\n              views;\n              uploadData = {}; // const ctrl_Url = `${location.origin}/api/alight/views/${request_tasks[views.props.mode]}`;\n\n              ctrl_Url = \"\".concat(location.origin, \"/\").concat(views.props.path, \"/\").concat(views.props.task); // api/alight/views\n              // const ctrl_Url = `${location.origin}/api/details/items/getItemInfo`;// it doesn't have to be a public api\n              // const ctrl_Url = `${location.origin}/api/alight/users/${urlMod}`;// used to get recent during user_prefs request var urlMod = \"getUserPrefs\";\n              // const recent = require('./lib/getData/recent');// location of routers recent query\n              // uploadData.item_data = data_obj;\n\n              uploadData.mode = \"page\";\n              uploadData.page = state.info_page;\n              uploadData.project_id = views.props.project_id;\n              uploadData.limit = state.limit;\n              uploadData.payload = views.props.payload || {}; // payload vs upload - payload will be a property of body ie. req.body.payload\n              // uploadData.host_id = state.host_id;\n\n              uploadData.active_filters = state.active_filters;\n              if (exists(views.props.upload)) uploadData = _objectSpread(_objectSpread({}, uploadData), views.props.upload); // upload is any custom data that needs to be added\n\n              if (exists(state.scroll_data)) uploadData.scroll_data = _objectSpread({}, state.scroll_data); // NOTE: looks deprecated - idk though\n\n              if (exists(obj.scroll_data)) uploadData.scroll_data = _objectSpread({}, obj.scroll_data); // overwrites state.scroll_data - should only be used when resetting\n\n              if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(views.payload_ref.current) == \"object\") uploadData = _objectSpread(_objectSpread({}, uploadData), views.payload_ref.current); // anything else the is added dynamically\n              // let is_list_internal = views.list_src == \"internal\";//!obj_exists(views,\"state.setList\");// could also use views.list_src == \"internal\"\n              // does the request have a value?\n              // this section ensures new search request values (for internal list_src) don't add to the last values list array and items\n\n              has_value = exists(uploadData.value);\n              same_value = true;\n\n              if (has_value) {\n                same_value = views.last_request_value.current == uploadData.value;\n                views.last_request_value.current = uploadData.value;\n              }\n\n              meseeks = \"what?\";\n              cancel_obj = obj.cancel_obj ? obj.cancel_obj : obj.obj ? obj.obj : {};\n              cancel_obj.cancelToken = axios.CancelToken.source(); // {\n              //   cancelToken: cancel_obj.cancelToken.token\n              // }\n\n              _context.next = 29;\n              return axios.post(ctrl_Url, uploadData, {\n                cancelToken: cancel_obj.cancelToken.token\n              });\n\n            case 29:\n              response = _context.sent;\n              response_data = response.data; // if(display_console || false) console.log(\"[Views] fetch_info response\",response);\n\n              requested_items = exists(response_data.data) ? response_data.data : [];\n              if (display_console || true) console.warn(\"[Views] fetch_info requested_items\", requested_items); // let new_list = list.concat(requested_items);\n              // setList(new_list);\n              // return_data_length.current = requested_items.length;\n              // this splits the response into an ids array and obj data\n\n              _context.next = 35;\n              return create_order({\n                result: requested_items\n              });\n\n            case 35:\n              _yield$create_order = _context.sent;\n              result_ids = _yield$create_order.result_ids;\n              result_data = _yield$create_order.result_data;\n\n              // this handles empty data and can return empty data\n              // GOTCHA - breaks if you turn setState into an async fn\n              if (views.state.setList) {\n                views.state.setList(function (prev) {\n                  // if flip, reverse the list id array data\n                  var list = views.state.flip ? [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(result_ids.reverse()), _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(prev.list)) : [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(prev.list), _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(result_ids));\n\n                  var data = _objectSpread(_objectSpread({}, prev.data), result_data);\n\n                  var change_data = {\n                    list: list,\n                    data: data\n                  };\n\n                  if (views.state.height_calc) {\n                    // if im taking the list in like this (which is the entire list) then there isn't a choice to add to the height\n                    // reprocess from scratch\n                    var height = views.state.height_calc({\n                      list: list,\n                      data: data\n                      /*, height: prev.height*/\n\n                    }); // returns a progressive height array\n\n                    change_data.height = height;\n                  } // if\n                  // if the request returns new list values, trigger a manual scroll in the VirtualScroll component\n\n\n                  if (state.flip && prev.list.length != 0) {\n                    // only do this if it previously had value\n                    views.force_scroll.current = true;\n                  } // if flip\n\n\n                  return change_data;\n                });\n              } // views.state.setList\n\n\n              me_seeks = \"none\";\n\n              if (views.state.internal_tracking) {\n                views.setState(function (prevState, props) {\n                  var change_obj = {};\n                  change_obj.return_data_length = requested_items.length; // let ready_list = prevState.list.concat(requested_items);\n                  // let ready_list = [...new Set(prevState.list.concat(requested_items))];// still getting duplicates - i need separate ids\n\n                  if (prevState.list_src == \"internal\") {\n                    var _ready_list = same_value ? _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(new Set([].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(prevState.list), _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(result_ids)))) : _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(result_ids);\n\n                    var ready_items = same_value ? _objectSpread(_objectSpread({}, prevState.items), result_data) : _objectSpread({}, result_data);\n                    change_obj.list = _ready_list;\n                    change_obj.items = ready_items; // if the request returns new list values, trigger a manual scroll in the VirtualScroll component\n\n                    if (state.flip && prevState.list.length != 0) {\n                      // only do this if it previously had value\n                      views.force_scroll.current = true;\n                    } // if flip\n\n                  } // if\n                  // return {return_data_length: requested_items.length, list: ready_list}\n\n\n                  var has_more;\n\n                  if (state.testing == true) {\n                    if (response_data.scroll_data) {\n                      var row_more = response_data.scroll_data.row_more;\n                      var pair_more = response_data.scroll_data.pair_more;\n                      has_more = row_more || pair_more ? true : false;\n                    } else {\n                      has_more = requested_items.length > prevState.limit - 1 ? true : false; // accounts for 20 and 21 - idk how im getting 21\n                    } // this is to manually advance the page - during forever scrolling i won't need this\n\n\n                    if (has_more && ready_list.length < prevState.failsafe) {\n                      // this process is for testing, this way won't give be a page past the failsafe # so it will continue\n                      // loading the same data over and over.\n                      change_obj.info_page = prevState.info_page + 1;\n                      change_obj.has_more = true;\n                    } else {\n                      change_obj.has_more = false;\n                    } //else\n\n                  } else {\n                    if (response_data.scroll_data) {\n                      var _row_more = response_data.scroll_data.row_more;\n                      var _pair_more = response_data.scroll_data.pair_more;\n                      has_more = _row_more || _pair_more ? true : false;\n                    } else {\n                      has_more = requested_items.length > prevState.limit - 1 ? true : false; // accounts for 20 and 21 - idk how im getting 21\n                    }\n\n                    if (has_more) {\n                      change_obj.has_more = true;\n                      change_obj.info_page = prevState.info_page + 1;\n                    } else {\n                      change_obj.has_more = false;\n                    } // else\n\n                  } // else\n\n\n                  if (exists(response_data.scroll_data)) {\n                    change_obj.scroll_data = response_data.scroll_data;\n                  }\n\n                  if (prevState.init == false) change_obj.init = true;\n                  change_obj.loading = false; // views.loading.current = false;\n\n                  return change_obj;\n                });\n              } // if internal_tracking\n              // running setState triggers component did update even though this fn and its old values aren't updated\n              // {running componentDidUpdate}\n              // setList(prev_list => {\n              //   // return prev_list.concat(requested_items)\n              //   let ready_list = prev_list.concat(requested_items);\n              //   // ready_list = switch_display({data: ready_list, sort_by: data_obj.filter},true);\n              //   return ready_list;\n              // });\n              // if(display_console || false) console.log('[list] length',state.list.length);\n              // this goes back in time still using the pre componentDidUpdate values\n              // if(requested_items.length == state.limit && state.list.length < state.failsafe){\n              //   //set new variables and fetch again\n              //   // info_page ++;\n              //   // setPage(info_page + 1);// info_page++ // incrementing with ++ changes the state directly but doesn't trigger a rerender - use + 1\n              //   views.setState((prevState, props) => {\n              //     return { info_page: prevState.info_page + 1}\n              //   });\n              //   // fetch_info();\n              // }// end if\n              // init.current = true;\n              // views.setState({init: true});\n\n\n              _context.next = 48;\n              break;\n\n            case 43:\n              _context.prev = 43;\n              _context.t0 = _context[\"catch\"](7);\n\n              if (!(typeof _context.t0 == \"undefined\" || _context.t0.message.includes(\"cancel\"))) {\n                _context.next = 47;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 47:\n              if (display_console || false) console.error(\"[Views] request error\", _context.t0);\n\n            case 48:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[7, 43]]);\n    })));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"add_to_height\", function (height_value) {\n      _this2.setState(function (prevState) {\n        var change_obj = {};\n        change_obj.dynamic_height = Math.ceil(prevState.dynamic_height + height_value);\n        return change_obj;\n      });\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"restock\", /*#__PURE__*/_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default.a.mark(function _callee2() {\n      var _this;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this = _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2);\n\n              _this2.setState({\n                loading: true\n              });\n\n              if (_this.props.data.callback) {\n                // meant for external data fetcher\n                _this.props.data.callback().then(function () {\n                  // this.setState({loading: false});\n                  if (display_console || false) if (display_console || false) console.warn(\"[restock] state set\", _this2.state);\n                });\n              } else {\n                _this.fetch_info();\n              } // else\n\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    })));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"refresh_callback\", function (e, obj) {\n      if (display_console || false) console.warn(\"[Views] iconwall obj\", obj);\n      if (display_console || false) console.warn(\"[Views] iconwall _this\", _this);\n\n      var state_update = _objectSpread({}, _this2.default_state); // how do i refresh the list externally? - send a refresh callback with the state and setter\n\n\n      if (_this2.state.list_src != \"internal\") {\n        // call the refresh callback\n        _this2.state.reset_list();\n      }\n\n      if (_this2.state.internal_tracking) {\n        // if obj exists this is being called from a modal - otherwise don't bother changing things\n        if (exists(obj)) state_update.active_filters = obj.active_options;\n        state_update.reset = true;\n        _this2.observer.current = null; // restarting the observer works in correctly restarting virtual scrolling\n\n        _this2.setState(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), state_update);\n        }); // this.fetch_info();// how do i start from scratch? (fetch_info runs in componentDidUpdate)\n\n      }\n\n      ;\n      if (exists(obj)) obj.close();\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"save_position\", function (position) {\n      // let s = this.state;\n      // let store = s.app_state;\n      //\n      // store.save_position({ancestor: s.binder, position})\n      _this2.position.current = position;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2), \"observerCallback\", function (node) {\n      // let fetch_me = this.fetch_info;\n      var has_more = exists(_this2.has_more) && exists(_this2.has_more.current) ? _this2.has_more.current : _this2.state.has_more;\n      var my_observer = observerSetupCallback.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2));\n      my_observer({\n        node: node,\n        observer: _this2.observer,\n        has_more: has_more,\n        childHeight: _this2.state.childHeight,\n        renderAhead: _this2.state.renderAhead,\n        last_rootMargin: _this2.last_rootMargin,\n        restock: _this2.restock,\n        next_restock: _this2.next_restock,\n        last_restock: _this2.last_restock\n      });\n    });\n\n    _this2.state = {\n      list: props.data.list || [],\n      items: props.data.items || {},\n      // this is not really used in Views - i may omit it\n      setList: props.data.setList,\n      reset_list: props.data.reset_list || function () {},\n      list_src: props.data.list_src || props.data.setList ? \"external\" : \"internal\",\n      request_src: props.data.request_src,\n\n      /* !internal_tracking important to stop rerenders when using external scroll_data */\n      internal_tracking: props.data.internal_tracking != undefined ? props.data.internal_tracking : true,\n      loading: true,\n      childHeight: props.data.childHeight || 100,\n      //255,\n      renderAhead: 3,\n      return_data_length: 0,\n      init: false,\n      info_page: 1,\n      name: exists(props.data.name) ? props.data.name : exists(props.data.mode) ? props.data.mode : \"default\",\n      title: props.data.title ? props.data.title : \"\",\n      icon: props.data.icon ? props.data.icon : \"none\",\n      iUN: props.data.iUN || Math.round(Math.random() * 10000),\n      limit: props.upload && props.upload.limit ? props.upload.limit : 20,\n      // this is stupid???\n      pair_page: 1,\n      failsafe: 50,\n      has_more: true,\n      testing: false,\n      flip: props.data.flip || false,\n      dir: props.data.flip ? \"reverse\" : \"forward\",\n      stats: props.data.stats || false,\n      dynamic_height: props.data.dynamic_height || [0],\n      // array of height calculations\n      height_calc: props.data.height_calc || false,\n      // dynamic_height callback\n      has_dynamic_height: typeof props.data.height_calc != \"undefined\" ? true : false,\n      render: props.data.render || \"auto\",\n      // \"auto\" causes the fetch_info or callback fn to run once during componentDidMount\n      render_double: props.data.render_double || false,\n      // reder_double causes a 2nd auto run to get another layer of list data\n      scroll_data: null,\n      reset: false,\n      active_filters: \"\",\n      main_loader: props.data.main_loader != undefined ? props.data.main_loader : true,\n      scroll_loader: props.data.scroll_loader != undefined ? props.data.scroll_loader : true,\n      processHeight: props.data.processHeight,\n      track_position: props.track_position || false,\n      visible: props.visible != undefined ? props.visible : true,\n      shortfall: props.data.shortfall || 0\n    }; // why did i add visible? i needed it for Segue's switch between views\n    // - if i set visible using the state its semi hard coded and doesn't change with prop changes. i have to call setState to change it\n    // when i call it in render use  - props.visible != undefined ? props.visible : true\n    // visible prop lets me hide Views and maintain its state internally - can't be done externally\n    // if(props != undefined && typeof props.visible == \"undefined\") throw \"[Views.js] prop.visible is required\";\n    // i can use this as a reset for thhe views list display\n    // - removes the list ids array and the list items object,\n    // - resets the page info for the request\n\n    _this2.default_state = {\n      return_data_length: 0,\n      info_page: 1,\n      // pair_page: 1,\n      has_more: true,\n      scroll_data: null\n    }; // do i need this?\n\n    if (_this2.state.list_src == \"internal\") {\n      // !props.data.list_src\n      // internal list_src\n      _this2.default_state.list = [];\n      _this2.default_state.items = {};\n    }\n    /*else{\r\n     this.default_state.list = props.data.list;\r\n    }*/\n    // no else needed - if external list reset using setList\n\n\n    _this2.observer = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.last_restock = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.next_restock = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.last_rootMargin = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.last_cancel = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.last_cancel.current = {};\n    _this2.double_init = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.double_init.current = false;\n    _this2.init = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.init.current = false;\n    _this2.default_height = 470;\n    _this2.height = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.height.current = _this2.default_height;\n    _this2.auto_height = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.auto_height.current = false;\n    _this2.payload_ref = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.payload_ref.current = {}; // this.render_nbr = createRef();\n    // this.render_nbr.current = 0;\n\n    _this2.vscroll_ref = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.vscroll_ref.current = {};\n    _this2.force_scroll = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.force_scroll.current = false;\n    _this2.save_scroll_pos = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.save_scroll_pos.current = 0;\n    _this2.position = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.position.current = props.data.position || 0;\n    _this2.loading = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.loading.current = true; // this.has_more = createRef();\n    // this.root_viewport = createRef();\n\n    _this2.cancel_obj = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])(); // used in unmounting\n\n    _this2.last_request_value = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_11__[\"createRef\"])();\n    _this2.last_request_value.current = \"\";\n    return _this2;\n  } // constructor\n\n  /*\r\n  88\"\"Yb 88\"\"Yb  dP\"Yb  88\"\"Yb 888888 88\"\"Yb 888888 88 888888 .dP\"Y8\r\n  88__dP 88__dP dP   Yb 88__dP 88__   88__dP   88   88 88__   `Ybo.\"\r\n  88\"\"\"  88\"Yb  Yb   dP 88\"\"\"  88\"\"   88\"Yb    88   88 88\"\"   o.`Y8b\r\n  88     88  Yb  YbodP  88     888888 88  Yb   88   88 888888 8bodP'\r\n  */\n  // let name = props.mode || \"default\";\n  // let iUN = Math.round(Math.random() * 10000);\n  // let limit = 20;\n  // let pair_page = 1;\n  // let failsafe = 50;\n  // let snapper = props.snapper;\n\n  /*\r\n  88  88  dP\"Yb   dP\"Yb  88  dP .dP\"Y8\r\n  88  88 dP   Yb dP   Yb 88odP  `Ybo.\"\r\n  888888 Yb   dP Yb   dP 88\"Yb  o.`Y8b\r\n  88  88  YbodP   YbodP  88  Yb 8bodP'\r\n  */\n  // useEffect(() => {\n  //   // get lazy list data (increments of 20)\n  //   if(init.current == false && props.snapper.current.state.current_section == 1){\n  //     fetch_info();\n  //   }\n  //     // window.snapper = props.snapper;\n  //     // if(display_console || false) console.log('[snapper] test', props.snapper);\n  //     // fetch_pairs();\n  // },[props.snap_section]);\n  //\n  // useEffect(() => {\n  //   // get lazy list data (increments of 20)\n  //   if(init.current == true && return_data_length.current == limit && list.length < failsafe){\n  //     //set new variables and fetch again\n  //     // info_page ++;\n  //     fetch_info();\n  //   }// end if\n  //     // fetch_pairs();\n  // },[info_page]);\n  // componentDidMount = () => {\n  //   let state = this.state;\n  //   let props = props;\n  //\n  //   if(state.init == false /*&& props.snapper.current.state.current_section == 0*/){\n  //     this.fetch_info();\n  //   }\n  // }\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(Views, [{\n    key: \"render\",\n    value: //observerSetupCallback\n    function render() {\n      var _this4 = this;\n\n      var state = this.state;\n      var props = this.props; // let list_length = props.list.length;\n\n      var renderAhead = state.renderAhead;\n      var loading = state.loading; // ISSUE: when is request_src ever external? it never is.\n\n      var request_src = state.request_src ? state.request_src : state.internal_tracking ? \"internal\" : state.list_src; // state.internal_tracking\n\n      var has_more = request_src == \"external\" ? props.data.has_more : state.has_more;\n      var iUN = state.iUN;\n      var visible = props.visible != undefined ? props.visible : true; // if (display_console || false) console.debug('[Views] RNDR render_nbr', this.render_nbr.current);\n\n      if (\n      /*typeof props != \"undefined\" &&*/\n      visible) {\n        // if(this.root_viewport) this.root_viewport.current = `.views_view_content_${iUN}`;\n        // if(state.list.length != 0){\n        //\n        //   // let Item = props.Item;\n        //\n        //   list_data = React.memo( ({index : ndx}) => {\n        //     // <li key={`${data_obj._id}_${item._id}`} >{item.title_data}</li>\n        //     let item_id = state.list[ndx];\n        //     let item = state.items[item_id];\n        //     let list_length = state.list.length;\n        //     let ukey = state.iUN;\n        //     // if(display_console || false) console.warn(\"[list_data] rerendering\", ndx);\n        //\n        //     // if(display_console || false) console.warn(\"[item]\",item);\n        //     // if(state.list.length == ndx + 1){\n        //     //   // if(display_console || false) console.warn(\"[Views] prepping elements\");// log on the last element\n        //     //   return (\n        //     //     <div className=\"views_item_wrapper\" key={`${item._id}_${ndx}`} ref={this.observerSetupCallback} data-ndx={ndx} >\n        //     //       <Item key={`${state.name}_view_${item._id}_${ndx}`} data={item} />\n        //     //     </div>\n        //     //   );\n        //     // }else {\n        //     return (\n        //       // (list_length == ndx + 1) ?\n        //       // <div className=\"views_item_wrapper\" key={ndx} data-ndx={ndx} ref={this.observerSetupCallback}  style={{border:\"1px solid green\"}}>\n        //       //   <Item data={item} />\n        //       // </div>\n        //       //  :\n        //       <div className=\"views_item_wrapper\" key={ndx} data-ndx={ndx}>\n        //         {/* <Item data={item} store={props.store}/> */}\n        //           <Clips data={{...item, state: props.store}} mode=\"core\" /*root={\"modal_cont\"}*/ />\n        //       </div>\n        //     );\n        //     // }\n        //\n        //   });\n        // }else{\n        //   list_data = null;\n        // }\n        // if(display_console || false) console.warn(\"[Views] rendering\",state);\n        if (exists(this.init.current && this.auto_height.current != true)) {\n          // make sure this height is only set once - fix - height set to zero after closing & reopening main core\n          // let ul_el = document.querySelector(`.views_view_content_${iUN}`);// doesn't exist yet\n          var ul_el = document.querySelector(\".\".concat(props.data.home)); // doesn't exist yet\n          // let ul_el = document.querySelector(\".fldr_display\");\n          // GOTCHA: home must have a css height (even height: 100%) for this to work properly\n\n          this.height.current = ul_el && ul_el.getBoundingClientRect().height ? Math.floor(ul_el.getBoundingClientRect().height) : height;\n          this.auto_height.current = true;\n        }\n\n        var height = exists(this.height.current) && !isNaN(this.height.current) ? this.height.current : this.default_height; // hack - helps ensure there will be a height\n        // it also helped to take the views_view_content element out of the display_contents condition and add it to the mostly present display_els\n\n        var title = exists(state.title) ? state.title : state.name; // name already conditions mode above\n\n        var icon = state.icon;\n        var view_list = props.data.list ? props.data.list : state.list;\n        var vScroll_data = {\n          name: \"views_scroll\",\n          // prefix:\"views\",\n          itemCount: view_list.length,\n          height: height,\n          childHeight: this.state.childHeight,\n          has_dynamic_height: this.state.has_dynamic_height,\n          // dynamic_height:this.state.dynamic_height, // failed\n          dynamic_height: props.data.dynamic_height,\n          Item: props.data.list_display,\n          renderAhead: renderAhead,\n          padding: 40,\n          hide_scroll: true,\n          observer: this.observerCallback,\n          loading: loading,\n          has_more: has_more,\n          iUN: iUN,\n          show_loader: this.state.scroll_loader,\n          dir: this.state.dir,\n          stats: this.state.stats,\n          refresh: {\n            callback: this.refresh_callback,\n            timer: 1000,\n            wait: false\n          },\n          // render_nbr:  this.render_nbr.current,\n          data_ref: this.vscroll_ref.current\n        }; // vScroll_data\n\n        if (this.props.data.flip && this.props.data.position) {\n          // this should be ok, it will only set once\n          vScroll_data.position = this.props.data.position;\n        } // if \n\n\n        if (this.state.track_position) {\n          vScroll_data.position = this.position.current;\n          vScroll_data.save_position = this.save_position;\n        } // if\n        // deprecated VirtualScroll prop structure\n        // name={\"views_scroll\"}\n        // // prefix={\"views\"}\n        // itemCount={props.data.list.length}\n        // height={height}\n        // childHeight={this.state.childHeight}\n        // has_dynamic_height={this.state.has_dynamic_height}\n        // // dynamic_height={this.state.dynamic_height}// failed\n        // dynamic_height={props.data.dynamic_height}\n        // Item={props.data.list_display}\n        // renderAhead={renderAhead}\n        // padding={40}\n        // hide_scroll={true}\n        // observer={this.observerCallback}\n        // loading={loading}\n        // has_more={has_more}\n        // position={this.position.current}\n        // iUN={iUN}\n        // show_loader={this.state.show_loader}\n        // refresh={{callback:this.refresh_callback, timer:1000, wait: false}}\n\n\n        var display_contents = props.data.list_display != null ? /*#__PURE__*/React.createElement(React.Fragment, null, exists(this.init.current) ? /*#__PURE__*/React.createElement(_VirtualScroll_VirtualScroll__WEBPACK_IMPORTED_MODULE_12__[\"default\"], vScroll_data) : null) : this.state.main_loader ?\n        /*#__PURE__*/\n        // <div className=\"views_loader_wrapper\" >\n        //   <div className=\"views_item_loader loader reset-top\"\n        //     onClick={() => {\n        //       if(display_console || false) console.warn(`[Views] loader was clicked`);\n        //       this.refresh_callback();\n        //     }} >\n        //     <div className=\"loader_refresh icon-spinner11 d3-ico d3-bloc\"></div>\n        //   </div>\n        // </div>\n        React.createElement(_Loader_Loader__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n          name: \"views\",\n          type: \"dots\",\n          inner: {\n            onClick: function onClick() {\n              if (display_console || false) console.warn(\"[Views] loader was clicked\");\n\n              _this4.refresh_callback();\n            },\n            variants: \"reset-top\"\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"loader_refresh icon-spinner11 d3-ico d3-bloc\"\n        })) : null; // previously null - add an empty message and refresh btn here\n        // let display_els = (\n        //   <div className={`views_view_wrapper ${state.name}`}>\n        //     <div className=\"views_view_header clamp-0\">\n        //       <div className={`views_view_icon icon-${icon} d3-ico d3-bloc`}></div>\n        //       <div className=\"views_view_title clamp-1\">{unescape(title)}</div>\n        //     </div>\n        //     <div className={`views_view_cont ${state.name}`}>\n        //       <div className={`views_view_content views_view_content_${iUN} ${state.name} plain hide-scroll`}>\n        //         {display_contents}\n        //       </div>\n        //     </div>\n        //   </div>);\n\n        return /*#__PURE__*/React.createElement(React.Fragment, null, display_contents,\n        /*this.state.loading && this.state.has_more &&*/\n        this.state.main_loader && !this.state.init && !display_contents\n        /*NOW:10 what if its empty? test for this*/\n        ?\n        /*#__PURE__*/\n        // <div className=\"views_loader_wrapper\" >\n        //   <div className=\"views_item_loader loader reset-mid\"\n        //     onClick={() => {\n        //       if(display_console || false) console.warn(`[Views] loader was clicked`);\n        //       this.refresh_callback();\n        //     }} >\n        //     <div className=\"loader_refresh icon-spinner11 d3-ico d3-bloc\"></div>\n        //   </div>\n        // </div>\n        React.createElement(_Loader_Loader__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n          name: \"views\",\n          type: \"dots\",\n          inner: {\n            onClick: function onClick() {\n              if (display_console || false) console.warn(\"[Views] loader was clicked\");\n\n              _this4.refresh_callback();\n            },\n            variants: \"reset-mid\"\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"loader_refresh icon-spinner11 d3-ico d3-bloc\"\n        })) : null);\n      } else {\n        return this.state.main_loader &&\n        /*props == undefined || props != undefined &&*/\n        visible ?\n        /*#__PURE__*/\n        // <div className=\"views_loader_wrapper hide-scroll\" >\n        //   <div className=\"views_item_loader loader reset-low\"\n        //     onClick={() => {\n        //       if(display_console || false) console.warn(`[Views] loader was clicked`);\n        //       this.refresh_callback();\n        //     }} >\n        //     <div className=\"loader_refresh icon-spinner11 d3-ico d3-bloc\"></div>\n        //   </div>\n        // </div>\n        React.createElement(_Loader_Loader__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n          name: \"views\",\n          variants: \"hide-scroll\",\n          type: \"dots\",\n          inner: {\n            onClick: function onClick() {\n              if (display_console || false) console.warn(\"[Views] loader was clicked\");\n\n              _this4.refresh_callback();\n            },\n            variants: \"reset-low\"\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"loader_refresh icon-spinner11 d3-ico d3-bloc\"\n        })) : null;\n      }\n    } // render\n\n  }]);\n\n  return Views;\n}(react__WEBPACK_IMPORTED_MODULE_11__[\"Component\"]); // Views\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Views); // style={{height: \"200px\", background: \"red\", width: \"100%\"}}\n\nvar request_tasks = {\n  recent: \"getRecent\",\n  bookmarks: \"getBookmarks\"\n};\n\nvar create_order = function create_order(_ref3) {\n  var result = _ref3.result;\n  var result_id_ary = [];\n  var result_id_obj = {};\n\n  if (Array.isArray(result) && result.length != 0) {\n    result.forEach(function (item) {\n      result_id_ary = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(result_id_ary), [item._id]); // this will help with ordering\n\n      result_id_obj[item._id] = item;\n    });\n  } //if\n\n\n  var result_ids = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(result_id_ary);\n\n  var result_data = _objectSpread({}, result_id_obj);\n\n  return {\n    result_ids: result_ids,\n    result_data: result_data\n  };\n}; // create_order//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVmlydHVhbFNjcm9sbC9WaWV3cy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9WaXJ0dWFsU2Nyb2xsL1ZpZXdzLmpzPzllNTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCB1c2VDYWxsYmFjaywgY3JlYXRlUmVmLCBtZW1vIH0gZnJvbSAncmVhY3QnO1xyXG4vLyBpbXBvcnQgSXRlbSBmcm9tICcuL2xpYi9JdGVtL0l0ZW0nOy8vIGRlcHJlY2F0ZWRcclxuLy8gaW1wb3J0IENsaXBzIGZyb20gJy4uL0NsaXBzL0NsaXBzJztcclxuaW1wb3J0IFZpcnR1YWxTY3JvbGwgZnJvbSAnLi4vVmlydHVhbFNjcm9sbC9WaXJ0dWFsU2Nyb2xsJztcclxuLy8gaW1wb3J0IEljb25XYWxsIGZyb20gJy4uL0ljb25XYWxsL0ljb25XYWxsJztcclxuaW1wb3J0IExvYWRlciBmcm9tICcuLi9Mb2FkZXIvTG9hZGVyJztcclxuXHJcbmNvbnN0IHtleGlzdHMsIG9ial9leGlzdHN9ID0gcmVxdWlyZSgnLi4vLi4vdG9vbHMvZXhpc3RzJyk7XHJcbi8vIGNvbnN0IHt3cmFwcn0gPSByZXF1aXJlKCcuLi8uLi90b29scy93cmFwcicpO1xyXG5jb25zdCB7b2JzZXJ2ZXJTZXR1cENhbGxiYWNrfSA9IHJlcXVpcmUoJy4uL1ZpcnR1YWxTY3JvbGwvb2JzZXJ2ZXInKTtcclxuLy8gaW1wb3J0IHtQYXBlclByb3ZpZGVyLCBQYXBlckNvbnRleHQgfSBmcm9tICcuLi9QYXBlci9saWIvcGFwZXJDb250ZXh0JztcclxuY29uc3QgZGlzcGxheV9jb25zb2xlID0gZmFsc2U7XHJcblxyXG5yZXF1aXJlKCcuL1ZpZXdzLnNjc3MnKTtcclxuLyoqXHJcbiAqIGEgZHVtYiBwb3J0YWJsZSBWaWV3cyBjb21wb25lbnQgdGhhdCB3b3JrcyBkaXJlY3RseSB3aXRoIHZTY3JvbGwgLSBpdCBkb2Vzbid0IGtub3cgdGhlIGNvbnRlbnQgdGVtcGxhdGVcclxuICogbW9kaWZpZWQgZnJvbSBBcmNcclxuICogQGNhdGVnb3J5IFBhcGVyXHJcbiAqIEBzdWJjYXRlZ29yeSB2aWV3c1xyXG4gKiBAbW9kdWxlIFZpZXdzXHJcbiAqIEBkZXNjIHZpZXdzIG1haW4gY2xhc3MgYmFzZWQgY29tcG9uZW50XHJcbiAqIEByZXF1aXJlcyBWaXJ0dWFsU2Nyb2xsXHJcbiAqIEBzZWUge0BsaW5rIG1vZHVsZTpNYWluQ29yZX1cclxuICovXHJcblxyXG4vKipcclxuICogQGZpbGVcclxuICovXHJcblxyXG4vKipcclxuICogW1ZpZXdzIGRlc2NyaXB0aW9uXVxyXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcclxuICovXHJcbmNsYXNzIFZpZXdzIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHJcbi8qXHJcbi5kUFwiWTggODg4ODg4ICAgIGRiICAgIDg4ODg4OCA4ODg4ODhcclxuYFliby5cIiAgIDg4ICAgICBkUFliICAgICA4OCAgIDg4X19cclxuby5gWThiICAgODggICAgZFBfX1liICAgIDg4ICAgODhcIlwiXHJcbjhib2RQJyAgIDg4ICAgZFBcIlwiXCJcIlliICAgODggICA4ODg4ODhcclxuXHJcbls0TUFYXShodHRwOi8vcGF0b3Jqay5jb20vc29mdHdhcmUvdGFhZy8jcD1kaXNwbGF5JmY9NE1heCZ0PXN0YXRlKVxyXG4qL1xyXG4vLyB0aGlzIHdpbGwgZ2V0IGFsbCBkYXRhIGV2ZW50dWFsbHkgdW5sZXNzIGkgcHV0IGEgdG90YWwgKGZhaWxzYWZlKVxyXG4vLyBvbmNlIGkgY3JlYXRlIGZvcmV2ZXIgc2Nyb2xsaW5nIHRoZSBmYWlsc2FmZSB3b250IGJlIG5lZWRlZFxyXG4vLyBsZXQgW2xpc3QsIHNldExpc3RdID0gdXNlU3RhdGUoW10pO1xyXG4vLyBsZXQgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbi8vIGxldCByZXR1cm5fZGF0YV9sZW5ndGggPSB1c2VSZWYoMCk7XHJcbi8vIGxldCBpbml0ID0gdXNlUmVmKGZhbHNlKTtcclxuLy8gbGV0IFtpbmZvX3BhZ2UsIHNldFBhZ2VdID0gdXNlU3RhdGUoMSk7XHJcbiAgY29uc3RydWN0b3IocHJvcHMpe1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgbGlzdDogcHJvcHMuZGF0YS5saXN0IHx8IFtdLFxyXG4gICAgICBpdGVtczogcHJvcHMuZGF0YS5pdGVtcyB8fCB7fSwvLyB0aGlzIGlzIG5vdCByZWFsbHkgdXNlZCBpbiBWaWV3cyAtIGkgbWF5IG9taXQgaXRcclxuICAgICAgc2V0TGlzdDogcHJvcHMuZGF0YS5zZXRMaXN0LFxyXG4gICAgICByZXNldF9saXN0OiBwcm9wcy5kYXRhLnJlc2V0X2xpc3QgfHwgZnVuY3Rpb24oKXt9LFxyXG4gICAgICBsaXN0X3NyYzogcHJvcHMuZGF0YS5saXN0X3NyYyB8fCBwcm9wcy5kYXRhLnNldExpc3QgPyBcImV4dGVybmFsXCIgOiBcImludGVybmFsXCIsXHJcbiAgICAgIHJlcXVlc3Rfc3JjOiBwcm9wcy5kYXRhLnJlcXVlc3Rfc3JjLFxyXG4gICAgICAvKiAhaW50ZXJuYWxfdHJhY2tpbmcgaW1wb3J0YW50IHRvIHN0b3AgcmVyZW5kZXJzIHdoZW4gdXNpbmcgZXh0ZXJuYWwgc2Nyb2xsX2RhdGEgKi9cclxuICAgICAgaW50ZXJuYWxfdHJhY2tpbmc6IHByb3BzLmRhdGEuaW50ZXJuYWxfdHJhY2tpbmcgICE9IHVuZGVmaW5lZCA/IHByb3BzLmRhdGEuaW50ZXJuYWxfdHJhY2tpbmcgOiB0cnVlLFxyXG4gICAgICBsb2FkaW5nOiB0cnVlLFxyXG4gICAgICBjaGlsZEhlaWdodDogcHJvcHMuZGF0YS5jaGlsZEhlaWdodCB8fCAxMDAsLy8yNTUsXHJcbiAgICAgIHJlbmRlckFoZWFkOiAzLFxyXG4gICAgICByZXR1cm5fZGF0YV9sZW5ndGg6IDAsXHJcbiAgICAgIGluaXQ6IGZhbHNlLFxyXG4gICAgICBpbmZvX3BhZ2U6IDEsXHJcbiAgICAgIG5hbWU6IChleGlzdHMocHJvcHMuZGF0YS5uYW1lKSkgPyBwcm9wcy5kYXRhLm5hbWUgOiAoZXhpc3RzKHByb3BzLmRhdGEubW9kZSkpID8gcHJvcHMuZGF0YS5tb2RlIDogXCJkZWZhdWx0XCIsXHJcbiAgICAgIHRpdGxlOiAocHJvcHMuZGF0YS50aXRsZSApPyBwcm9wcy5kYXRhLnRpdGxlIDogXCJcIixcclxuICAgICAgaWNvbjogcHJvcHMuZGF0YS5pY29uID8gcHJvcHMuZGF0YS5pY29uIDogXCJub25lXCIsXHJcbiAgICAgIGlVTjogcHJvcHMuZGF0YS5pVU4gfHwgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMDApLFxyXG4gICAgICBsaW1pdDogKHByb3BzLnVwbG9hZCAmJiBwcm9wcy51cGxvYWQubGltaXQpID8gcHJvcHMudXBsb2FkLmxpbWl0IDogMjAsLy8gdGhpcyBpcyBzdHVwaWQ/Pz9cclxuICAgICAgcGFpcl9wYWdlOiAxLFxyXG4gICAgICBmYWlsc2FmZTogNTAsXHJcbiAgICAgIGhhc19tb3JlOiB0cnVlLFxyXG4gICAgICB0ZXN0aW5nOiBmYWxzZSxcclxuICAgICAgZmxpcDogcHJvcHMuZGF0YS5mbGlwIHx8IGZhbHNlLFxyXG4gICAgICBkaXI6IHByb3BzLmRhdGEuZmxpcCA/IFwicmV2ZXJzZVwiIDogXCJmb3J3YXJkXCIsXHJcbiAgICAgIHN0YXRzOiBwcm9wcy5kYXRhLnN0YXRzIHx8IGZhbHNlLFxyXG4gICAgICBkeW5hbWljX2hlaWdodDogcHJvcHMuZGF0YS5keW5hbWljX2hlaWdodCB8fCBbMF0sLy8gYXJyYXkgb2YgaGVpZ2h0IGNhbGN1bGF0aW9uc1xyXG4gICAgICBoZWlnaHRfY2FsYzogcHJvcHMuZGF0YS5oZWlnaHRfY2FsYyB8fCBmYWxzZSwvLyBkeW5hbWljX2hlaWdodCBjYWxsYmFja1xyXG4gICAgICBoYXNfZHluYW1pY19oZWlnaHQgOiAodHlwZW9mIHByb3BzLmRhdGEuaGVpZ2h0X2NhbGMgIT0gXCJ1bmRlZmluZWRcIikgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgIHJlbmRlcjogcHJvcHMuZGF0YS5yZW5kZXIgfHwgXCJhdXRvXCIsLy8gXCJhdXRvXCIgY2F1c2VzIHRoZSBmZXRjaF9pbmZvIG9yIGNhbGxiYWNrIGZuIHRvIHJ1biBvbmNlIGR1cmluZyBjb21wb25lbnREaWRNb3VudFxyXG4gICAgICByZW5kZXJfZG91YmxlOiBwcm9wcy5kYXRhLnJlbmRlcl9kb3VibGUgfHwgZmFsc2UsLy8gcmVkZXJfZG91YmxlIGNhdXNlcyBhIDJuZCBhdXRvIHJ1biB0byBnZXQgYW5vdGhlciBsYXllciBvZiBsaXN0IGRhdGFcclxuICAgICAgc2Nyb2xsX2RhdGE6IG51bGwsXHJcbiAgICAgIHJlc2V0OiBmYWxzZSxcclxuICAgICAgYWN0aXZlX2ZpbHRlcnM6IFwiXCIsXHJcbiAgICAgIG1haW5fbG9hZGVyOiBwcm9wcy5kYXRhLm1haW5fbG9hZGVyICE9IHVuZGVmaW5lZCA/IHByb3BzLmRhdGEubWFpbl9sb2FkZXIgOiB0cnVlLFxyXG4gICAgICBzY3JvbGxfbG9hZGVyOiBwcm9wcy5kYXRhLnNjcm9sbF9sb2FkZXIgIT0gdW5kZWZpbmVkID8gcHJvcHMuZGF0YS5zY3JvbGxfbG9hZGVyIDogdHJ1ZSxcclxuICAgICAgcHJvY2Vzc0hlaWdodDogcHJvcHMuZGF0YS5wcm9jZXNzSGVpZ2h0LFxyXG4gICAgICB0cmFja19wb3NpdGlvbjogcHJvcHMudHJhY2tfcG9zaXRpb24gfHwgZmFsc2UsXHJcbiAgICAgIHZpc2libGU6IHByb3BzLnZpc2libGUgIT0gdW5kZWZpbmVkID8gcHJvcHMudmlzaWJsZSA6IHRydWUsXHJcbiAgICAgIHNob3J0ZmFsbDogcHJvcHMuZGF0YS5zaG9ydGZhbGwgfHwgMFxyXG4gICAgfVxyXG4gICAgLy8gd2h5IGRpZCBpIGFkZCB2aXNpYmxlPyBpIG5lZWRlZCBpdCBmb3IgU2VndWUncyBzd2l0Y2ggYmV0d2VlbiB2aWV3c1xyXG4gICAgLy8gLSBpZiBpIHNldCB2aXNpYmxlIHVzaW5nIHRoZSBzdGF0ZSBpdHMgc2VtaSBoYXJkIGNvZGVkIGFuZCBkb2Vzbid0IGNoYW5nZSB3aXRoIHByb3AgY2hhbmdlcy4gaSBoYXZlIHRvIGNhbGwgc2V0U3RhdGUgdG8gY2hhbmdlIGl0XHJcbiAgICAvLyB3aGVuIGkgY2FsbCBpdCBpbiByZW5kZXIgdXNlICAtIHByb3BzLnZpc2libGUgIT0gdW5kZWZpbmVkID8gcHJvcHMudmlzaWJsZSA6IHRydWVcclxuXHJcbiAgICAvLyB2aXNpYmxlIHByb3AgbGV0cyBtZSBoaWRlIFZpZXdzIGFuZCBtYWludGFpbiBpdHMgc3RhdGUgaW50ZXJuYWxseSAtIGNhbid0IGJlIGRvbmUgZXh0ZXJuYWxseVxyXG4gICAgLy8gaWYocHJvcHMgIT0gdW5kZWZpbmVkICYmIHR5cGVvZiBwcm9wcy52aXNpYmxlID09IFwidW5kZWZpbmVkXCIpIHRocm93IFwiW1ZpZXdzLmpzXSBwcm9wLnZpc2libGUgaXMgcmVxdWlyZWRcIjtcclxuXHJcbiAgICAvLyBpIGNhbiB1c2UgdGhpcyBhcyBhIHJlc2V0IGZvciB0aGhlIHZpZXdzIGxpc3QgZGlzcGxheVxyXG4gICAgLy8gLSByZW1vdmVzIHRoZSBsaXN0IGlkcyBhcnJheSBhbmQgdGhlIGxpc3QgaXRlbXMgb2JqZWN0LFxyXG4gICAgLy8gLSByZXNldHMgdGhlIHBhZ2UgaW5mbyBmb3IgdGhlIHJlcXVlc3RcclxuICAgIHRoaXMuZGVmYXVsdF9zdGF0ZSA9IHtcclxuICAgICAgcmV0dXJuX2RhdGFfbGVuZ3RoOjAsXHJcbiAgICAgIGluZm9fcGFnZTogMSxcclxuICAgICAgLy8gcGFpcl9wYWdlOiAxLFxyXG4gICAgICBoYXNfbW9yZTogdHJ1ZSxcclxuICAgICAgc2Nyb2xsX2RhdGE6IG51bGxcclxuICAgIH1cclxuXHJcbiAgICAvLyBkbyBpIG5lZWQgdGhpcz9cclxuICAgIGlmKHRoaXMuc3RhdGUubGlzdF9zcmMgPT0gXCJpbnRlcm5hbFwiKXtcclxuICAgICAgLy8gIXByb3BzLmRhdGEubGlzdF9zcmNcclxuICAgICAgLy8gaW50ZXJuYWwgbGlzdF9zcmNcclxuICAgICAgdGhpcy5kZWZhdWx0X3N0YXRlLmxpc3QgPSBbXTtcclxuICAgICAgdGhpcy5kZWZhdWx0X3N0YXRlLml0ZW1zID0ge307XHJcbiAgICB9LyplbHNle1xyXG4gICAgICB0aGlzLmRlZmF1bHRfc3RhdGUubGlzdCA9IHByb3BzLmRhdGEubGlzdDtcclxuICAgIH0qL1xyXG4gICAgLy8gbm8gZWxzZSBuZWVkZWQgLSBpZiBleHRlcm5hbCBsaXN0IHJlc2V0IHVzaW5nIHNldExpc3RcclxuXHJcbiAgICB0aGlzLm9ic2VydmVyID0gY3JlYXRlUmVmKCk7XHJcbiAgICB0aGlzLmxhc3RfcmVzdG9jayA9IGNyZWF0ZVJlZigpO1xyXG4gICAgdGhpcy5uZXh0X3Jlc3RvY2sgPSBjcmVhdGVSZWYoKTtcclxuICAgIHRoaXMubGFzdF9yb290TWFyZ2luID0gY3JlYXRlUmVmKCk7XHJcbiAgICB0aGlzLmxhc3RfY2FuY2VsID0gY3JlYXRlUmVmKCk7XHJcbiAgICB0aGlzLmxhc3RfY2FuY2VsLmN1cnJlbnQgPSB7fTtcclxuICAgIHRoaXMuZG91YmxlX2luaXQgPSBjcmVhdGVSZWYoKTtcclxuICAgIHRoaXMuZG91YmxlX2luaXQuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pbml0ID0gY3JlYXRlUmVmKCk7XHJcbiAgICB0aGlzLmluaXQuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgdGhpcy5kZWZhdWx0X2hlaWdodCA9IDQ3MDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gY3JlYXRlUmVmKCk7XHJcbiAgICB0aGlzLmhlaWdodC5jdXJyZW50ID0gdGhpcy5kZWZhdWx0X2hlaWdodDtcclxuICAgIHRoaXMuYXV0b19oZWlnaHQgPSBjcmVhdGVSZWYoKTtcclxuICAgIHRoaXMuYXV0b19oZWlnaHQuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgdGhpcy5wYXlsb2FkX3JlZiA9IGNyZWF0ZVJlZigpO1xyXG4gICAgdGhpcy5wYXlsb2FkX3JlZi5jdXJyZW50ID0ge307XHJcbiAgICAvLyB0aGlzLnJlbmRlcl9uYnIgPSBjcmVhdGVSZWYoKTtcclxuICAgIC8vIHRoaXMucmVuZGVyX25ici5jdXJyZW50ID0gMDtcclxuXHJcbiAgICB0aGlzLnZzY3JvbGxfcmVmID0gY3JlYXRlUmVmKCk7XHJcbiAgICB0aGlzLnZzY3JvbGxfcmVmLmN1cnJlbnQgPSB7fTtcclxuXHJcbiAgICB0aGlzLmZvcmNlX3Njcm9sbCA9IGNyZWF0ZVJlZigpO1xyXG4gICAgdGhpcy5mb3JjZV9zY3JvbGwuY3VycmVudCA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuc2F2ZV9zY3JvbGxfcG9zID0gY3JlYXRlUmVmKCk7XHJcbiAgICB0aGlzLnNhdmVfc2Nyb2xsX3Bvcy5jdXJyZW50ID0gMDtcclxuXHJcbiAgICB0aGlzLnBvc2l0aW9uID0gY3JlYXRlUmVmKCk7XHJcbiAgICB0aGlzLnBvc2l0aW9uLmN1cnJlbnQgPSBwcm9wcy5kYXRhLnBvc2l0aW9uIHx8IDA7XHJcbiAgICBcclxuXHJcbiAgICB0aGlzLmxvYWRpbmcgPSBjcmVhdGVSZWYoKTtcclxuICAgIHRoaXMubG9hZGluZy5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIC8vIHRoaXMuaGFzX21vcmUgPSBjcmVhdGVSZWYoKTtcclxuICAgIC8vIHRoaXMucm9vdF92aWV3cG9ydCA9IGNyZWF0ZVJlZigpO1xyXG4gICAgdGhpcy5jYW5jZWxfb2JqID0gY3JlYXRlUmVmKCk7Ly8gdXNlZCBpbiB1bm1vdW50aW5nXHJcblxyXG4gICAgdGhpcy5sYXN0X3JlcXVlc3RfdmFsdWUgPSBjcmVhdGVSZWYoKTtcclxuICAgIHRoaXMubGFzdF9yZXF1ZXN0X3ZhbHVlLmN1cnJlbnQgPSBcIlwiO1xyXG4gIH0vLyBjb25zdHJ1Y3RvclxyXG5cclxuLypcclxuODhcIlwiWWIgODhcIlwiWWIgIGRQXCJZYiAgODhcIlwiWWIgODg4ODg4IDg4XCJcIlliIDg4ODg4OCA4OCA4ODg4ODggLmRQXCJZOFxyXG44OF9fZFAgODhfX2RQIGRQICAgWWIgODhfX2RQIDg4X18gICA4OF9fZFAgICA4OCAgIDg4IDg4X18gICBgWWJvLlwiXHJcbjg4XCJcIlwiICA4OFwiWWIgIFliICAgZFAgODhcIlwiXCIgIDg4XCJcIiAgIDg4XCJZYiAgICA4OCAgIDg4IDg4XCJcIiAgIG8uYFk4YlxyXG44OCAgICAgODggIFliICBZYm9kUCAgODggICAgIDg4ODg4OCA4OCAgWWIgICA4OCAgIDg4IDg4ODg4OCA4Ym9kUCdcclxuKi9cclxuXHJcblxyXG5cclxuICAvLyBsZXQgbmFtZSA9IHByb3BzLm1vZGUgfHwgXCJkZWZhdWx0XCI7XHJcbiAgLy8gbGV0IGlVTiA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTtcclxuICAvLyBsZXQgbGltaXQgPSAyMDtcclxuICAvLyBsZXQgcGFpcl9wYWdlID0gMTtcclxuICAvLyBsZXQgZmFpbHNhZmUgPSA1MDtcclxuICAvLyBsZXQgc25hcHBlciA9IHByb3BzLnNuYXBwZXI7XHJcblxyXG4vKlxyXG44OCAgODggIGRQXCJZYiAgIGRQXCJZYiAgODggIGRQIC5kUFwiWThcclxuODggIDg4IGRQICAgWWIgZFAgICBZYiA4OG9kUCAgYFliby5cIlxyXG44ODg4ODggWWIgICBkUCBZYiAgIGRQIDg4XCJZYiAgby5gWThiXHJcbjg4ICA4OCAgWWJvZFAgICBZYm9kUCAgODggIFliIDhib2RQJ1xyXG4qL1xyXG5cclxuICAvLyB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gIC8vICAgLy8gZ2V0IGxhenkgbGlzdCBkYXRhIChpbmNyZW1lbnRzIG9mIDIwKVxyXG4gIC8vICAgaWYoaW5pdC5jdXJyZW50ID09IGZhbHNlICYmIHByb3BzLnNuYXBwZXIuY3VycmVudC5zdGF0ZS5jdXJyZW50X3NlY3Rpb24gPT0gMSl7XHJcbiAgLy8gICAgIGZldGNoX2luZm8oKTtcclxuICAvLyAgIH1cclxuICAvLyAgICAgLy8gd2luZG93LnNuYXBwZXIgPSBwcm9wcy5zbmFwcGVyO1xyXG4gIC8vICAgICAvLyBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUubG9nKCdbc25hcHBlcl0gdGVzdCcsIHByb3BzLnNuYXBwZXIpO1xyXG4gIC8vICAgICAvLyBmZXRjaF9wYWlycygpO1xyXG4gIC8vIH0sW3Byb3BzLnNuYXBfc2VjdGlvbl0pO1xyXG4gIC8vXHJcbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcclxuICAvLyAgIC8vIGdldCBsYXp5IGxpc3QgZGF0YSAoaW5jcmVtZW50cyBvZiAyMClcclxuICAvLyAgIGlmKGluaXQuY3VycmVudCA9PSB0cnVlICYmIHJldHVybl9kYXRhX2xlbmd0aC5jdXJyZW50ID09IGxpbWl0ICYmIGxpc3QubGVuZ3RoIDwgZmFpbHNhZmUpe1xyXG4gIC8vICAgICAvL3NldCBuZXcgdmFyaWFibGVzIGFuZCBmZXRjaCBhZ2FpblxyXG4gIC8vICAgICAvLyBpbmZvX3BhZ2UgKys7XHJcbiAgLy8gICAgIGZldGNoX2luZm8oKTtcclxuICAvLyAgIH0vLyBlbmQgaWZcclxuICAvLyAgICAgLy8gZmV0Y2hfcGFpcnMoKTtcclxuICAvLyB9LFtpbmZvX3BhZ2VdKTtcclxuXHJcbiAgLy8gY29tcG9uZW50RGlkTW91bnQgPSAoKSA9PiB7XHJcbiAgLy8gICBsZXQgc3RhdGUgPSB0aGlzLnN0YXRlO1xyXG4gIC8vICAgbGV0IHByb3BzID0gcHJvcHM7XHJcbiAgLy9cclxuICAvLyAgIGlmKHN0YXRlLmluaXQgPT0gZmFsc2UgLyomJiBwcm9wcy5zbmFwcGVyLmN1cnJlbnQuc3RhdGUuY3VycmVudF9zZWN0aW9uID09IDAqLyl7XHJcbiAgLy8gICAgIHRoaXMuZmV0Y2hfaW5mbygpO1xyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQgPSAoKSA9PiB7XHJcblxyXG4gICAgLy8gdGhpcy5yb290X3ZpZXdwb3J0LmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudmlld3Nfdmlld19jb250ZW50LiR7dGhpcy5zdGF0ZS5uYW1lfWApO1xyXG4gICAgLy8gdGhpcy5yb290X3ZpZXdwb3J0LmN1cnJlbnQgPSBgLnZpZXdzX3Njcm9sbF92aWV3cG9ydF8ke3RoaXMuc3RhdGUuaVVOfWA7Ly9sYXRlc3RcclxuICAgIC8vIHRoaXMucmVzdG9ja19uZHguY3VycmVudCA9IDEwOy8vIGkgbWF5IG5vdCBuZWVkIHRoaXNcclxuICAgIC8vIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKCdbVmlld3NdIGNvbXBvbmVudCB1cGRhdGVkJyk7XHJcbiAgICBsZXQgY2FuY2VsX29iaiA9IHt9O1xyXG4gICAgdGhpcy5jYW5jZWxfb2JqLmN1cnJlbnQgPSBjYW5jZWxfb2JqO1xyXG5cclxuICAgIGlmKHRoaXMuc3RhdGUucmVuZGVyICE9IFwiYXV0b1wiKSByZXR1cm47XHJcblxyXG4gICAgaWYodGhpcy5wcm9wcy5kYXRhLmNhbGxiYWNrICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgIHRoaXMucHJvcHMuZGF0YS5jYWxsYmFjayh7b2JqOmNhbmNlbF9vYmp9KTtcclxuICAgIH1lbHNle1xyXG4gICAgICB0aGlzLmZldGNoX2luZm8oe29iajpjYW5jZWxfb2JqfSk7XHJcbiAgICB9Ly8gZWxzZVxyXG5cclxuICAgIC8vIGlmIChkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoJ1tWaWV3c10gQ0RNIHJlbmRlcl9uYnInLCB0aGlzLnJlbmRlcl9uYnIuY3VycmVudCk7XHJcblxyXG4gIH0vLyBjb21wb25lbnREaWRNb3VudFxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCA9ICgpID0+IHtcclxuICAgIGlmKHRoaXMuY2FuY2VsX29iai5jdXJyZW50LmNhbmNlbFRva2VuKXtcclxuICAgICAgdGhpcy5jYW5jZWxfb2JqLmN1cnJlbnQuY2FuY2VsVG9rZW4uY2FuY2VsKCdPcGVyYXRpb24gY2FuY2VsZWQgZHVlIHRvIG5ldyByZXF1ZXN0LicpO1xyXG4gICAgfS8vIGlmXHJcbiAgfS8vIGNvbXBvbmVudFdpbGxVbm1vdW50XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSA9ICgpID0+IHtcclxuICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgaWYoc3RhdGUuaW5pdCA9PSB0cnVlICYmIHN0YXRlLmhhc19tb3JlICYmIHN0YXRlLnJlbmRlcl9kb3VibGUgJiYgdGhpcy5kb3VibGVfaW5pdC5jdXJyZW50ID09IGZhbHNlKXtcclxuICAgICAgLy9zZXQgbmV3IHZhcmlhYmxlcyBhbmQgZmV0Y2ggYWdhaW5cclxuICAgICAgLy8gaW5mb19wYWdlICsrO1xyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1ZpZXdzXSByZW5kZXJpbmcgZG91YmxlYCk7XHJcbiAgICAgIHRoaXMucHJvcHMuZGF0YS5jYWxsYmFjaygpO1xyXG4gICAgfS8vIGVuZCBpZlxyXG5cclxuICAgIGlmKHRoaXMuaW5pdC5jdXJyZW50ID09IGZhbHNlKXtcclxuICAgICAgdGhpcy5pbml0LmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoc3RhdGUucmVzZXQpe1xyXG4gICAgICAvLyBpIG1heSBuZWVkIGEgcmVzZXRfZG91YmxlXHJcbiAgICAgIC8vIGNvbnNvbGUuZXJyb3IoYFtWaWV3cy5qc10gc3RhdGUucmVzZXQgd2FzIGNhbGxlZC4uLmApO1xyXG4gICAgICBpZih0aGlzLnByb3BzLmRhdGEgJiYgdGhpcy5wcm9wcy5kYXRhLmNhbGxiYWNrKXtcclxuICAgICAgICB0aGlzLnByb3BzLmRhdGEuY2FsbGJhY2soKTsvLyBpIGRpZCB0aGlzIGlmIHRoZSByZXF1ZXN0IHdhcyBleHRlcm5hbFxyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICB0aGlzLmZldGNoX2luZm8oKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBzdGF0ZS5yZXNldCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtyZXNldDogZmFsc2V9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBsZXQgdWxfZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudmlld3Nfdmlld19jb250ZW50XyR7dGhpcy5zdGF0ZS5pVU59YCk7XHJcbiAgICBsZXQgdWxfZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLnByb3BzLmRhdGEuaG9tZX1gKTtcclxuICAgIC8vIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKFwiW3ZpZXdzXSB2aWV3c192aWV3X2NvbnRlbnRcIix1bF9lbCk7XHJcblxyXG4gICAgaWYodGhpcy5oZWlnaHQuY3VycmVudCA9PSAwICYmIHVsX2VsKXtcclxuICAgICAgLy8gcmVzaXplIGZpeCBoYWNrXHJcbiAgICAgIC8vIHRoZSBkZWZhdWx0IGZvciB0aGlzLmhlaWdodC5jdXJyZW50IGlzIDQ3MCAtIGFmdGVyIDIgcmVuZGVycyBpdCBjYW4gYmVjb21lIHNldCB0byB6ZXJvIHVzaW5nIHRoZSB1bF9lbCdzIGdldEJvdW5kaW5nQ2xpZW50UmVjdFxyXG4gICAgICAvLyBpZiBpdCBnZXRzIHNldCB0byB6ZXJvIGl0IHdvdWxkIG5vcm1hbGx5IGJlIHRoZSBlbmQgb2YgdGhlIGxpbmUuIGJ1dCB3ZSB1c2UgdGhpcyBoYWNrIHRvIGNyZWF0ZSBvbmUgbW9yZSByZW5kZXIgYXQgYVxyXG4gICAgICAvLyBzcGVjaWZpYyB0aW1lLiAgc28gaWYgaXQgaXMgemVybyAoZHVlIHRvIGNzcyBkaXNwbGF5OiBub25lKSwgY29tZSBpbiBoZXJlIGFuZCBjcmVhdGUgYSByZXNpemUgb2JzZXJ2ZXJcclxuICAgICAgLy8gb24gcmVzaXplIGFuZCB3aXRoIF90aGlzLmhlaWdodC5jdXJyZW50IHN0aWxsIGF0IHplcm8gYXMgYSBwcmVjYXV0aW9uIHJlc2V0IHRoZSBhdXRvX2hlaWdodCB2YXJpYWJsZSB0byBmYWxzZSB0b1xyXG4gICAgICAvLyBhbGxvdyB0aGUgaGVpZ2h0IHRvIGJlIHNldCBvbmUgbW9yZSB0aW1lIC0gb3IgcmVwZWF0IHRoaXMgcHJvY2VzcyBhdCB0aGUgbmV4dCByZXNpemUgLSBvdGhlcndpc2UgdW5vYnNlcnZlXHJcbiAgICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICBsZXQgcmVzaXplciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xyXG5cclxuICAgICAgICAvLyBfdGhpcy5mb3JjZV9zY3JvbGwuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgIGlmKF90aGlzLmhlaWdodC5jdXJyZW50ID09IDApe1xyXG4gICAgICAgICAgdGhpcy5hdXRvX2hlaWdodC5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihcIltWaWV3c10gdXBkYXRpbmcgaGVpZ2h0XCIpXHJcbiAgICAgICAgICBfdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgICAgICAgcmVzaXplci51bm9ic2VydmUoZW50cmllc1swXS50YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBsb2FkSXRlbXMoMTApO1xyXG4gICAgICAgIC8vIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5sb2coJ0xvYWRlZCBuZXcgaXRlbXMnKTtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIHN0YXJ0IG9ic2VydmluZ1xyXG4gICAgICByZXNpemVyLm9ic2VydmUodWxfZWwpO1xyXG4gICAgfS8vIGlmIHRoaXMuZm9yY2Vfc2Nyb2xsXHJcblxyXG4gICAgLy8gaWYgKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZygnW1ZpZXdzXSBDRFUgcmVuZGVyX25icicsIHRoaXMucmVuZGVyX25ici5jdXJyZW50KTtcclxuXHJcbiAgICBpZih0aGlzLnN0YXRlLmZsaXAgJiYgdGhpcy5mb3JjZV9zY3JvbGwuY3VycmVudCA9PSB0cnVlKXtcclxuICAgICAgbGV0IHNjcm9sbF9wb3MgPSBOdW1iZXIodGhpcy5zYXZlX3Njcm9sbF9wb3MuY3VycmVudCkgKyB0aGlzLnN0YXRlLnNob3J0ZmFsbDtcclxuICAgICAgdGhpcy52c2Nyb2xsX3JlZi5jdXJyZW50LmZvcmNlX3Njcm9sbChzY3JvbGxfcG9zKTtcclxuICAgICAgdGhpcy5mb3JjZV9zY3JvbGwuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfS8vIGlmXHJcblxyXG4gIH0vLyBjb21wb25lbnREaWRVcGRhdGVcclxuXHJcbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcclxuICAvLyAgIGlmKHN0YXRlLnJlbmRlciAhPSBcImF1dG9cIikgcmV0dXJuO1xyXG4gIC8vICAgdGhpcy5mZXRjaF9pbmZvKCk7XHJcbiAgLy8gfSxbXSlcclxuXHJcbi8qXHJcbjhiICAgIGQ4IDg4ODg4OCA4ODg4ODggODggIDg4ICBkUFwiWWIgIDg4ODhiLiAgLmRQXCJZOFxyXG44OGIgIGQ4OCA4OF9fICAgICA4OCAgIDg4ICA4OCBkUCAgIFliICA4SSAgWWIgYFliby5cIlxyXG44OFliZFA4OCA4OFwiXCIgICAgIDg4ICAgODg4ODg4IFliICAgZFAgIDhJICBkWSBvLmBZOGJcclxuODggWVkgODggODg4ODg4ICAgODggICA4OCAgODggIFlib2RQICA4ODg4WVwiICA4Ym9kUCdcclxuKi9cclxuICBfdGhpcyA9IHRoaXM7XHJcblxyXG4gIGZldGNoX2luZm8gPSBhc3luYyAob2JqID0ge30pID0+IHtcclxuXHJcbiAgICBsZXQgdmlld3MgPSB0aGlzO1xyXG4gICAgbGV0IHN0YXRlID0gdGhpcy5zdGF0ZTtcclxuICAgIGxldCBmb3JjZV9yZXF1ZXN0ID0gb2JqLmZvcmNlX3JlcXVlc3QgfHwgZmFsc2U7Ly8gaGVscHMgZXh0ZXJuYWwgdHJpZ2dlcnMgcmVuZXcgd2l0aG91dCB1cGRhdGluZyBzdGF0ZS5oYXNfbW9yZTtcclxuICAgIGlmKCFmb3JjZV9yZXF1ZXN0ICYmIHN0YXRlLmhhc19tb3JlID09IGZhbHNlKSByZXR1cm47XHJcblxyXG4gICAgLy8gdGhpcy5yZW5kZXJfbmJyLmN1cnJlbnQgPSB0aGlzLnJlbmRlcl9uYnIuY3VycmVudCArIDE7XHJcbiAgICAvLyBpZiAoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmRlYnVnKCdbVmlld3NdIG5ldyByZW5kZXJfbmJyJywgdGhpcy5yZW5kZXJfbmJyLmN1cnJlbnQpO1xyXG5cclxuICAgIC8vc2F2ZSB0aGUgY3VycmVudCBzY3JvbGxCb3R0b21cclxuICAgIGlmIChzdGF0ZS5mbGlwICYmIG9ial9leGlzdHModmlld3MudnNjcm9sbF9yZWYsXCJjdXJyZW50LmZvcmNlX3Njcm9sbFwiKSl7XHJcbiAgICAgIC8vIHNhdmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIGNhbGN1bGF0aW5nIHNjcm9sbFRvcCBkaXN0YW5jZSBmcm9tIHRoZSBib3R0b21cclxuICAgICAgdmlld3Muc2F2ZV9zY3JvbGxfcG9zLmN1cnJlbnQgPSB2aWV3cy52c2Nyb2xsX3JlZi5jdXJyZW50LmdldFNjcm9sbEJvdHRvbSh2aWV3cy52c2Nyb2xsX3JlZi5jdXJyZW50LnZpZXdwb3J0LmN1cnJlbnQsdHJ1ZSk7XHJcbiAgICB9Ly8gaWZcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBsZXQgZGF0YV9pZCA9IGRhdGFfb2JqLl9pZDtcclxuICAgICAgdmlld3M7XHJcbiAgICAgIGxldCB1cGxvYWREYXRhID0ge307XHJcbiAgICAgIC8vIGNvbnN0IGN0cmxfVXJsID0gYCR7bG9jYXRpb24ub3JpZ2lufS9hcGkvYWxpZ2h0L3ZpZXdzLyR7cmVxdWVzdF90YXNrc1t2aWV3cy5wcm9wcy5tb2RlXX1gO1xyXG4gICAgICBjb25zdCBjdHJsX1VybCA9IGAke2xvY2F0aW9uLm9yaWdpbn0vJHt2aWV3cy5wcm9wcy5wYXRofS8ke3ZpZXdzLnByb3BzLnRhc2t9YDsvLyBhcGkvYWxpZ2h0L3ZpZXdzXHJcbiAgICAgIC8vIGNvbnN0IGN0cmxfVXJsID0gYCR7bG9jYXRpb24ub3JpZ2lufS9hcGkvZGV0YWlscy9pdGVtcy9nZXRJdGVtSW5mb2A7Ly8gaXQgZG9lc24ndCBoYXZlIHRvIGJlIGEgcHVibGljIGFwaVxyXG4gICAgICAvLyBjb25zdCBjdHJsX1VybCA9IGAke2xvY2F0aW9uLm9yaWdpbn0vYXBpL2FsaWdodC91c2Vycy8ke3VybE1vZH1gOy8vIHVzZWQgdG8gZ2V0IHJlY2VudCBkdXJpbmcgdXNlcl9wcmVmcyByZXF1ZXN0IHZhciB1cmxNb2QgPSBcImdldFVzZXJQcmVmc1wiO1xyXG4gICAgICAvLyBjb25zdCByZWNlbnQgPSByZXF1aXJlKCcuL2xpYi9nZXREYXRhL3JlY2VudCcpOy8vIGxvY2F0aW9uIG9mIHJvdXRlcnMgcmVjZW50IHF1ZXJ5XHJcblxyXG4gICAgICAvLyB1cGxvYWREYXRhLml0ZW1fZGF0YSA9IGRhdGFfb2JqO1xyXG4gICAgICB1cGxvYWREYXRhLm1vZGUgPSBcInBhZ2VcIjtcclxuICAgICAgdXBsb2FkRGF0YS5wYWdlID0gc3RhdGUuaW5mb19wYWdlO1xyXG4gICAgICB1cGxvYWREYXRhLnByb2plY3RfaWQgPSB2aWV3cy5wcm9wcy5wcm9qZWN0X2lkO1xyXG4gICAgICB1cGxvYWREYXRhLmxpbWl0ID0gc3RhdGUubGltaXQ7XHJcbiAgICAgIHVwbG9hZERhdGEucGF5bG9hZCA9IHZpZXdzLnByb3BzLnBheWxvYWQgfHwge307Ly8gcGF5bG9hZCB2cyB1cGxvYWQgLSBwYXlsb2FkIHdpbGwgYmUgYSBwcm9wZXJ0eSBvZiBib2R5IGllLiByZXEuYm9keS5wYXlsb2FkXHJcbiAgICAgIC8vIHVwbG9hZERhdGEuaG9zdF9pZCA9IHN0YXRlLmhvc3RfaWQ7XHJcbiAgICAgIHVwbG9hZERhdGEuYWN0aXZlX2ZpbHRlcnMgPSBzdGF0ZS5hY3RpdmVfZmlsdGVycztcclxuXHJcbiAgICAgIGlmKGV4aXN0cyh2aWV3cy5wcm9wcy51cGxvYWQpKSB1cGxvYWREYXRhID0geyAuLi51cGxvYWREYXRhLCAuLi52aWV3cy5wcm9wcy51cGxvYWR9Oy8vIHVwbG9hZCBpcyBhbnkgY3VzdG9tIGRhdGEgdGhhdCBuZWVkcyB0byBiZSBhZGRlZFxyXG5cclxuICAgICAgaWYoZXhpc3RzKHN0YXRlLnNjcm9sbF9kYXRhKSkgdXBsb2FkRGF0YS5zY3JvbGxfZGF0YSA9IHsuLi5zdGF0ZS5zY3JvbGxfZGF0YX07XHJcblxyXG4gICAgICAvLyBOT1RFOiBsb29rcyBkZXByZWNhdGVkIC0gaWRrIHRob3VnaFxyXG4gICAgICBpZihleGlzdHMob2JqLnNjcm9sbF9kYXRhKSkgdXBsb2FkRGF0YS5zY3JvbGxfZGF0YSA9IHsuLi5vYmouc2Nyb2xsX2RhdGF9Oy8vIG92ZXJ3cml0ZXMgc3RhdGUuc2Nyb2xsX2RhdGEgLSBzaG91bGQgb25seSBiZSB1c2VkIHdoZW4gcmVzZXR0aW5nXHJcblxyXG4gICAgICBpZih0eXBlb2Ygdmlld3MucGF5bG9hZF9yZWYuY3VycmVudCA9PSBcIm9iamVjdFwiKSB1cGxvYWREYXRhID0geyAuLi51cGxvYWREYXRhLCAuLi52aWV3cy5wYXlsb2FkX3JlZi5jdXJyZW50fTsvLyBhbnl0aGluZyBlbHNlIHRoZSBpcyBhZGRlZCBkeW5hbWljYWxseVxyXG5cclxuICAgICAgLy8gbGV0IGlzX2xpc3RfaW50ZXJuYWwgPSB2aWV3cy5saXN0X3NyYyA9PSBcImludGVybmFsXCI7Ly8hb2JqX2V4aXN0cyh2aWV3cyxcInN0YXRlLnNldExpc3RcIik7Ly8gY291bGQgYWxzbyB1c2Ugdmlld3MubGlzdF9zcmMgPT0gXCJpbnRlcm5hbFwiXHJcbiAgICAgIC8vIGRvZXMgdGhlIHJlcXVlc3QgaGF2ZSBhIHZhbHVlP1xyXG5cclxuICAgICAgLy8gdGhpcyBzZWN0aW9uIGVuc3VyZXMgbmV3IHNlYXJjaCByZXF1ZXN0IHZhbHVlcyAoZm9yIGludGVybmFsIGxpc3Rfc3JjKSBkb24ndCBhZGQgdG8gdGhlIGxhc3QgdmFsdWVzIGxpc3QgYXJyYXkgYW5kIGl0ZW1zXHJcbiAgICAgIGxldCBoYXNfdmFsdWUgPSBleGlzdHModXBsb2FkRGF0YS52YWx1ZSk7XHJcblxyXG4gICAgICBsZXQgc2FtZV92YWx1ZSA9IHRydWU7XHJcbiAgICAgIGlmKGhhc192YWx1ZSl7XHJcbiAgICAgICAgc2FtZV92YWx1ZSA9IHZpZXdzLmxhc3RfcmVxdWVzdF92YWx1ZS5jdXJyZW50ID09IHVwbG9hZERhdGEudmFsdWU7XHJcbiAgICAgICAgdmlld3MubGFzdF9yZXF1ZXN0X3ZhbHVlLmN1cnJlbnQgPSB1cGxvYWREYXRhLnZhbHVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgbWVzZWVrcyA9IFwid2hhdD9cIjtcclxuICAgICAgbGV0IGNhbmNlbF9vYmogPSBvYmouY2FuY2VsX29iaiA/IG9iai5jYW5jZWxfb2JqIDogb2JqLm9iaiA/IG9iai5vYmogOiB7fTtcclxuICAgICAgY2FuY2VsX29iai5jYW5jZWxUb2tlbiA9IGF4aW9zLkNhbmNlbFRva2VuLnNvdXJjZSgpO1xyXG4gICAgICAvLyB7XHJcbiAgICAgIC8vICAgY2FuY2VsVG9rZW46IGNhbmNlbF9vYmouY2FuY2VsVG9rZW4udG9rZW5cclxuICAgICAgLy8gfVxyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KGN0cmxfVXJsLCB1cGxvYWREYXRhLCB7Y2FuY2VsVG9rZW46IGNhbmNlbF9vYmouY2FuY2VsVG9rZW4udG9rZW59KTtcclxuXHJcbiAgICAgIGxldCByZXNwb25zZV9kYXRhID0gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgIC8vIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5sb2coXCJbVmlld3NdIGZldGNoX2luZm8gcmVzcG9uc2VcIixyZXNwb25zZSk7XHJcblxyXG4gICAgICBsZXQgcmVxdWVzdGVkX2l0ZW1zID0gKGV4aXN0cyhyZXNwb25zZV9kYXRhLmRhdGEpKSA/IHJlc3BvbnNlX2RhdGEuZGF0YSA6IFtdO1xyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgdHJ1ZSkgY29uc29sZS53YXJuKFwiW1ZpZXdzXSBmZXRjaF9pbmZvIHJlcXVlc3RlZF9pdGVtc1wiLHJlcXVlc3RlZF9pdGVtcyk7XHJcbiAgICAgIC8vIGxldCBuZXdfbGlzdCA9IGxpc3QuY29uY2F0KHJlcXVlc3RlZF9pdGVtcyk7XHJcbiAgICAgIC8vIHNldExpc3QobmV3X2xpc3QpO1xyXG4gICAgICAvLyByZXR1cm5fZGF0YV9sZW5ndGguY3VycmVudCA9IHJlcXVlc3RlZF9pdGVtcy5sZW5ndGg7XHJcbiAgICAgIC8vIHRoaXMgc3BsaXRzIHRoZSByZXNwb25zZSBpbnRvIGFuIGlkcyBhcnJheSBhbmQgb2JqIGRhdGFcclxuICAgICAgY29uc3Qge3Jlc3VsdF9pZHMsIHJlc3VsdF9kYXRhfSA9IGF3YWl0IGNyZWF0ZV9vcmRlcih7cmVzdWx0OiByZXF1ZXN0ZWRfaXRlbXN9KTsvLyB0aGlzIGhhbmRsZXMgZW1wdHkgZGF0YSBhbmQgY2FuIHJldHVybiBlbXB0eSBkYXRhXHJcblxyXG4gICAgICAvLyBHT1RDSEEgLSBicmVha3MgaWYgeW91IHR1cm4gc2V0U3RhdGUgaW50byBhbiBhc3luYyBmblxyXG4gICAgICBpZih2aWV3cy5zdGF0ZS5zZXRMaXN0KXtcclxuICAgICAgICB2aWV3cy5zdGF0ZS5zZXRMaXN0KChwcmV2KSA9PiB7XHJcblxyXG4gICAgICAgICAgLy8gaWYgZmxpcCwgcmV2ZXJzZSB0aGUgbGlzdCBpZCBhcnJheSBkYXRhXHJcbiAgICAgICAgICBsZXQgbGlzdCA9IHZpZXdzLnN0YXRlLmZsaXAgPyBbLi4ucmVzdWx0X2lkcy5yZXZlcnNlKCksIC4uLnByZXYubGlzdF0gOiBbLi4ucHJldi5saXN0LCAuLi5yZXN1bHRfaWRzXTtcclxuICAgICAgICAgIGxldCBkYXRhID0gey4uLnByZXYuZGF0YSwgLi4ucmVzdWx0X2RhdGF9O1xyXG4gICAgICAgICAgbGV0IGNoYW5nZV9kYXRhID0ge2xpc3QsIGRhdGF9O1xyXG5cclxuICAgICAgICAgIGlmKHZpZXdzLnN0YXRlLmhlaWdodF9jYWxjKXtcclxuICAgICAgICAgICAgLy8gaWYgaW0gdGFraW5nIHRoZSBsaXN0IGluIGxpa2UgdGhpcyAod2hpY2ggaXMgdGhlIGVudGlyZSBsaXN0KSB0aGVuIHRoZXJlIGlzbid0IGEgY2hvaWNlIHRvIGFkZCB0byB0aGUgaGVpZ2h0XHJcbiAgICAgICAgICAgIC8vIHJlcHJvY2VzcyBmcm9tIHNjcmF0Y2hcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHZpZXdzLnN0YXRlLmhlaWdodF9jYWxjKHtsaXN0LCBkYXRhLyosIGhlaWdodDogcHJldi5oZWlnaHQqL30pOy8vIHJldHVybnMgYSBwcm9ncmVzc2l2ZSBoZWlnaHQgYXJyYXlcclxuICAgICAgICAgICAgY2hhbmdlX2RhdGEuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgfS8vIGlmXHJcblxyXG4gICAgICAgICAgLy8gaWYgdGhlIHJlcXVlc3QgcmV0dXJucyBuZXcgbGlzdCB2YWx1ZXMsIHRyaWdnZXIgYSBtYW51YWwgc2Nyb2xsIGluIHRoZSBWaXJ0dWFsU2Nyb2xsIGNvbXBvbmVudFxyXG4gICAgICAgICAgaWYgKHN0YXRlLmZsaXAgJiYgcHJldi5saXN0Lmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgIC8vIG9ubHkgZG8gdGhpcyBpZiBpdCBwcmV2aW91c2x5IGhhZCB2YWx1ZVxyXG4gICAgICAgICAgICB2aWV3cy5mb3JjZV9zY3JvbGwuY3VycmVudCA9IHRydWU7XHJcbiAgICAgICAgICB9Ly8gaWYgZmxpcFxyXG5cclxuICAgICAgICAgIHJldHVybiBjaGFuZ2VfZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgICAgfS8vIHZpZXdzLnN0YXRlLnNldExpc3RcclxuXHJcbiAgICAgICAgbGV0IG1lX3NlZWtzID0gXCJub25lXCI7XHJcblxyXG4gICAgICBpZiAodmlld3Muc3RhdGUuaW50ZXJuYWxfdHJhY2tpbmcpe1xyXG5cclxuICAgICAgICB2aWV3cy5zZXRTdGF0ZSgocHJldlN0YXRlLCBwcm9wcykgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGNoYW5nZV9vYmogPSB7fVxyXG4gICAgICAgICAgICBjaGFuZ2Vfb2JqLnJldHVybl9kYXRhX2xlbmd0aCA9IHJlcXVlc3RlZF9pdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIC8vIGxldCByZWFkeV9saXN0ID0gcHJldlN0YXRlLmxpc3QuY29uY2F0KHJlcXVlc3RlZF9pdGVtcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBsZXQgcmVhZHlfbGlzdCA9IFsuLi5uZXcgU2V0KHByZXZTdGF0ZS5saXN0LmNvbmNhdChyZXF1ZXN0ZWRfaXRlbXMpKV07Ly8gc3RpbGwgZ2V0dGluZyBkdXBsaWNhdGVzIC0gaSBuZWVkIHNlcGFyYXRlIGlkc1xyXG5cclxuICAgICAgICAgICAgaWYocHJldlN0YXRlLmxpc3Rfc3JjID09IFwiaW50ZXJuYWxcIil7XHJcblxyXG4gICAgICAgICAgICAgIGxldCByZWFkeV9saXN0ID0gc2FtZV92YWx1ZSA/IFsuLi5uZXcgU2V0KFsuLi5wcmV2U3RhdGUubGlzdCwuLi5yZXN1bHRfaWRzXSldIDogWy4uLnJlc3VsdF9pZHNdO1xyXG5cclxuICAgICAgICAgICAgICBsZXQgcmVhZHlfaXRlbXMgPSBzYW1lX3ZhbHVlID8gey4uLnByZXZTdGF0ZS5pdGVtcywuLi5yZXN1bHRfZGF0YX0gOiB7Li4ucmVzdWx0X2RhdGF9O1xyXG5cclxuICAgICAgICAgICAgICBjaGFuZ2Vfb2JqLmxpc3QgPSByZWFkeV9saXN0O1xyXG4gICAgICAgICAgICAgIGNoYW5nZV9vYmouaXRlbXMgPSByZWFkeV9pdGVtcztcclxuXHJcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIHJlcXVlc3QgcmV0dXJucyBuZXcgbGlzdCB2YWx1ZXMsIHRyaWdnZXIgYSBtYW51YWwgc2Nyb2xsIGluIHRoZSBWaXJ0dWFsU2Nyb2xsIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgIGlmIChzdGF0ZS5mbGlwICYmIHByZXZTdGF0ZS5saXN0Lmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBvbmx5IGRvIHRoaXMgaWYgaXQgcHJldmlvdXNseSBoYWQgdmFsdWVcclxuICAgICAgICAgICAgICAgIHZpZXdzLmZvcmNlX3Njcm9sbC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9Ly8gaWYgZmxpcFxyXG4gICAgICAgICAgICB9Ly8gaWZcclxuICAgICAgICAgICAgLy8gcmV0dXJuIHtyZXR1cm5fZGF0YV9sZW5ndGg6IHJlcXVlc3RlZF9pdGVtcy5sZW5ndGgsIGxpc3Q6IHJlYWR5X2xpc3R9XHJcblxyXG4gICAgICAgICAgICBsZXQgaGFzX21vcmU7XHJcblxyXG4gICAgICAgICAgICBpZihzdGF0ZS50ZXN0aW5nID09IHRydWUpe1xyXG5cclxuICAgICAgICAgICAgICBpZihyZXNwb25zZV9kYXRhLnNjcm9sbF9kYXRhKXtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcm93X21vcmUgPSByZXNwb25zZV9kYXRhLnNjcm9sbF9kYXRhLnJvd19tb3JlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhaXJfbW9yZSA9IHJlc3BvbnNlX2RhdGEuc2Nyb2xsX2RhdGEucGFpcl9tb3JlO1xyXG5cclxuICAgICAgICAgICAgICAgIGhhc19tb3JlID0gKChyb3dfbW9yZSB8fCBwYWlyX21vcmUpKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGhhc19tb3JlID0gKHJlcXVlc3RlZF9pdGVtcy5sZW5ndGggPiBwcmV2U3RhdGUubGltaXQgLTEpID8gdHJ1ZSA6IGZhbHNlOy8vIGFjY291bnRzIGZvciAyMCBhbmQgMjEgLSBpZGsgaG93IGltIGdldHRpbmcgMjFcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRoaXMgaXMgdG8gbWFudWFsbHkgYWR2YW5jZSB0aGUgcGFnZSAtIGR1cmluZyBmb3JldmVyIHNjcm9sbGluZyBpIHdvbid0IG5lZWQgdGhpc1xyXG4gICAgICAgICAgICAgIGlmKGhhc19tb3JlICYmIHJlYWR5X2xpc3QubGVuZ3RoIDwgcHJldlN0YXRlLmZhaWxzYWZlKXtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgcHJvY2VzcyBpcyBmb3IgdGVzdGluZywgdGhpcyB3YXkgd29uJ3QgZ2l2ZSBiZSBhIHBhZ2UgcGFzdCB0aGUgZmFpbHNhZmUgIyBzbyBpdCB3aWxsIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICAvLyBsb2FkaW5nIHRoZSBzYW1lIGRhdGEgb3ZlciBhbmQgb3Zlci5cclxuICAgICAgICAgICAgICAgIGNoYW5nZV9vYmouaW5mb19wYWdlID0gcHJldlN0YXRlLmluZm9fcGFnZSArIDE7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2Vfb2JqLmhhc19tb3JlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNoYW5nZV9vYmouaGFzX21vcmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB9Ly9lbHNlXHJcblxyXG5cclxuICAgICAgICAgICAgfWVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICBpZihyZXNwb25zZV9kYXRhLnNjcm9sbF9kYXRhKXtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcm93X21vcmUgPSByZXNwb25zZV9kYXRhLnNjcm9sbF9kYXRhLnJvd19tb3JlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhaXJfbW9yZSA9IHJlc3BvbnNlX2RhdGEuc2Nyb2xsX2RhdGEucGFpcl9tb3JlO1xyXG5cclxuICAgICAgICAgICAgICAgIGhhc19tb3JlID0gKChyb3dfbW9yZSB8fCBwYWlyX21vcmUpKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGhhc19tb3JlID0gKHJlcXVlc3RlZF9pdGVtcy5sZW5ndGggPiBwcmV2U3RhdGUubGltaXQgLTEpID8gdHJ1ZSA6IGZhbHNlOy8vIGFjY291bnRzIGZvciAyMCBhbmQgMjEgLSBpZGsgaG93IGltIGdldHRpbmcgMjFcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmKGhhc19tb3JlKXtcclxuICAgICAgICAgICAgICAgIGNoYW5nZV9vYmouaGFzX21vcmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlX29iai5pbmZvX3BhZ2UgPSBwcmV2U3RhdGUuaW5mb19wYWdlICsgMTtcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNoYW5nZV9vYmouaGFzX21vcmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB9Ly8gZWxzZVxyXG5cclxuICAgICAgICAgICAgfS8vIGVsc2VcclxuXHJcbiAgICAgICAgICAgIGlmKGV4aXN0cyhyZXNwb25zZV9kYXRhLnNjcm9sbF9kYXRhKSl7XHJcbiAgICAgICAgICAgICAgY2hhbmdlX29iai5zY3JvbGxfZGF0YSA9IHJlc3BvbnNlX2RhdGEuc2Nyb2xsX2RhdGE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBpZihwcmV2U3RhdGUuaW5pdCA9PSBmYWxzZSkgY2hhbmdlX29iai5pbml0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY2hhbmdlX29iai5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIHZpZXdzLmxvYWRpbmcuY3VycmVudCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZV9vYmo7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0vLyBpZiBpbnRlcm5hbF90cmFja2luZ1xyXG5cclxuXHJcbiAgICAgIC8vIHJ1bm5pbmcgc2V0U3RhdGUgdHJpZ2dlcnMgY29tcG9uZW50IGRpZCB1cGRhdGUgZXZlbiB0aG91Z2ggdGhpcyBmbiBhbmQgaXRzIG9sZCB2YWx1ZXMgYXJlbid0IHVwZGF0ZWRcclxuICAgICAgLy8ge3J1bm5pbmcgY29tcG9uZW50RGlkVXBkYXRlfVxyXG5cclxuICAgICAgLy8gc2V0TGlzdChwcmV2X2xpc3QgPT4ge1xyXG4gICAgICAvLyAgIC8vIHJldHVybiBwcmV2X2xpc3QuY29uY2F0KHJlcXVlc3RlZF9pdGVtcylcclxuICAgICAgLy8gICBsZXQgcmVhZHlfbGlzdCA9IHByZXZfbGlzdC5jb25jYXQocmVxdWVzdGVkX2l0ZW1zKTtcclxuICAgICAgLy8gICAvLyByZWFkeV9saXN0ID0gc3dpdGNoX2Rpc3BsYXkoe2RhdGE6IHJlYWR5X2xpc3QsIHNvcnRfYnk6IGRhdGFfb2JqLmZpbHRlcn0sdHJ1ZSk7XHJcbiAgICAgIC8vICAgcmV0dXJuIHJlYWR5X2xpc3Q7XHJcbiAgICAgIC8vIH0pO1xyXG5cclxuICAgICAgLy8gaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmxvZygnW2xpc3RdIGxlbmd0aCcsc3RhdGUubGlzdC5sZW5ndGgpO1xyXG5cclxuICAgICAgLy8gdGhpcyBnb2VzIGJhY2sgaW4gdGltZSBzdGlsbCB1c2luZyB0aGUgcHJlIGNvbXBvbmVudERpZFVwZGF0ZSB2YWx1ZXNcclxuICAgICAgLy8gaWYocmVxdWVzdGVkX2l0ZW1zLmxlbmd0aCA9PSBzdGF0ZS5saW1pdCAmJiBzdGF0ZS5saXN0Lmxlbmd0aCA8IHN0YXRlLmZhaWxzYWZlKXtcclxuICAgICAgLy8gICAvL3NldCBuZXcgdmFyaWFibGVzIGFuZCBmZXRjaCBhZ2FpblxyXG4gICAgICAvLyAgIC8vIGluZm9fcGFnZSArKztcclxuICAgICAgLy8gICAvLyBzZXRQYWdlKGluZm9fcGFnZSArIDEpOy8vIGluZm9fcGFnZSsrIC8vIGluY3JlbWVudGluZyB3aXRoICsrIGNoYW5nZXMgdGhlIHN0YXRlIGRpcmVjdGx5IGJ1dCBkb2Vzbid0IHRyaWdnZXIgYSByZXJlbmRlciAtIHVzZSArIDFcclxuICAgICAgLy8gICB2aWV3cy5zZXRTdGF0ZSgocHJldlN0YXRlLCBwcm9wcykgPT4ge1xyXG4gICAgICAvLyAgICAgcmV0dXJuIHsgaW5mb19wYWdlOiBwcmV2U3RhdGUuaW5mb19wYWdlICsgMX1cclxuICAgICAgLy8gICB9KTtcclxuICAgICAgLy8gICAvLyBmZXRjaF9pbmZvKCk7XHJcbiAgICAgIC8vIH0vLyBlbmQgaWZcclxuXHJcbiAgICAgIC8vIGluaXQuY3VycmVudCA9IHRydWU7XHJcbiAgICAgIC8vIHZpZXdzLnNldFN0YXRlKHtpbml0OiB0cnVlfSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBpZih0eXBlb2YgZSA9PSBcInVuZGVmaW5lZFwiIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcImNhbmNlbFwiKSkgcmV0dXJuO1xyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZXJyb3IoYFtWaWV3c10gcmVxdWVzdCBlcnJvcmAsZSlcclxuICAgIH0vLyBjYXRjaFxyXG5cclxuXHJcbiAgfS8vIGZldGNoX2luZm9cclxuXHJcblxyXG4gIGFkZF90b19oZWlnaHQgPSAoaGVpZ2h0X3ZhbHVlKSA9PiB7XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiB7XHJcbiAgICAgIGxldCBjaGFuZ2Vfb2JqID0ge307XHJcbiAgICAgIGNoYW5nZV9vYmouZHluYW1pY19oZWlnaHQgPSBNYXRoLmNlaWwocHJldlN0YXRlLmR5bmFtaWNfaGVpZ2h0ICsgaGVpZ2h0X3ZhbHVlKTtcclxuICAgICAgcmV0dXJuIGNoYW5nZV9vYmo7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmVzdG9jayA9IGFzeW5jICgpID0+IHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7bG9hZGluZzogdHJ1ZX0pO1xyXG4gICAgaWYoX3RoaXMucHJvcHMuZGF0YS5jYWxsYmFjayl7XHJcbiAgICAgIC8vIG1lYW50IGZvciBleHRlcm5hbCBkYXRhIGZldGNoZXJcclxuICAgICAgX3RoaXMucHJvcHMuZGF0YS5jYWxsYmFjaygpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAvLyB0aGlzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pO1xyXG4gICAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtyZXN0b2NrXSBzdGF0ZSBzZXRgLHRoaXMuc3RhdGUpO1xyXG4gICAgICB9KTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgX3RoaXMuZmV0Y2hfaW5mbygpO1xyXG4gICAgfS8vIGVsc2VcclxuXHJcbiAgfS8vXHJcblxyXG4gIC8vIHVzZWQgYnkgcHVsbCB0byByZWZyZXNoPyAtIGZldGNoX2luZm8gcnVucyBpbiBjb21wb25lbnREaWRVcGRhdGVcclxuICByZWZyZXNoX2NhbGxiYWNrID0gKGUsIG9iaikgPT4ge1xyXG5cclxuICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKFwiW1ZpZXdzXSBpY29ud2FsbCBvYmpcIiwgb2JqKTtcclxuICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKFwiW1ZpZXdzXSBpY29ud2FsbCBfdGhpc1wiLCBfdGhpcyk7XHJcblxyXG4gICAgbGV0IHN0YXRlX3VwZGF0ZSA9IHsuLi50aGlzLmRlZmF1bHRfc3RhdGV9O1xyXG5cclxuICAgIC8vIGhvdyBkbyBpIHJlZnJlc2ggdGhlIGxpc3QgZXh0ZXJuYWxseT8gLSBzZW5kIGEgcmVmcmVzaCBjYWxsYmFjayB3aXRoIHRoZSBzdGF0ZSBhbmQgc2V0dGVyXHJcbiAgICBpZih0aGlzLnN0YXRlLmxpc3Rfc3JjICE9IFwiaW50ZXJuYWxcIil7XHJcbiAgICAgIC8vIGNhbGwgdGhlIHJlZnJlc2ggY2FsbGJhY2tcclxuICAgICAgdGhpcy5zdGF0ZS5yZXNldF9saXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5zdGF0ZS5pbnRlcm5hbF90cmFja2luZyl7XHJcbiAgICAgIC8vIGlmIG9iaiBleGlzdHMgdGhpcyBpcyBiZWluZyBjYWxsZWQgZnJvbSBhIG1vZGFsIC0gb3RoZXJ3aXNlIGRvbid0IGJvdGhlciBjaGFuZ2luZyB0aGluZ3NcclxuICAgICAgaWYoZXhpc3RzKG9iaikpIHN0YXRlX3VwZGF0ZS5hY3RpdmVfZmlsdGVycyA9IG9iai5hY3RpdmVfb3B0aW9ucztcclxuICAgICAgc3RhdGVfdXBkYXRlLnJlc2V0ID0gdHJ1ZTtcclxuXHJcbiAgICAgIHRoaXMub2JzZXJ2ZXIuY3VycmVudCA9IG51bGw7Ly8gcmVzdGFydGluZyB0aGUgb2JzZXJ2ZXIgd29ya3MgaW4gY29ycmVjdGx5IHJlc3RhcnRpbmcgdmlydHVhbCBzY3JvbGxpbmdcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHsuLi5wcmV2U3RhdGUsLi4uc3RhdGVfdXBkYXRlfVxyXG4gICAgICB9KTtcclxuICAgICAgLy8gdGhpcy5mZXRjaF9pbmZvKCk7Ly8gaG93IGRvIGkgc3RhcnQgZnJvbSBzY3JhdGNoPyAoZmV0Y2hfaW5mbyBydW5zIGluIGNvbXBvbmVudERpZFVwZGF0ZSlcclxuICAgIH07XHJcblxyXG4gICAgaWYoZXhpc3RzKG9iaikpIG9iai5jbG9zZSgpO1xyXG4gIH0vLyByZWZyZXNoX2NhbGxiYWNrXHJcblxyXG4gIHNhdmVfcG9zaXRpb24gPSAocG9zaXRpb24pID0+IHtcclxuICAgIC8vIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgIC8vIGxldCBzdG9yZSA9IHMuYXBwX3N0YXRlO1xyXG4gICAgLy9cclxuICAgIC8vIHN0b3JlLnNhdmVfcG9zaXRpb24oe2FuY2VzdG9yOiBzLmJpbmRlciwgcG9zaXRpb259KVxyXG4gICAgdGhpcy5wb3NpdGlvbi5jdXJyZW50ID0gcG9zaXRpb247XHJcbiAgfS8vIHNhdmVfcG9zaXRpb25cclxuXHJcblxyXG5cclxuLypcclxuODhcIlwiWWIgODg4ODg4IDg4YiA4OCA4ODg4Yi4gIDg4ODg4OCA4OFwiXCJZYlxyXG44OF9fZFAgODhfXyAgIDg4WWI4OCAgOEkgIFliIDg4X18gICA4OF9fZFBcclxuODhcIlliICA4OFwiXCIgICA4OCBZODggIDhJICBkWSA4OFwiXCIgICA4OFwiWWJcclxuODggIFliIDg4ODg4OCA4OCAgWTggODg4OFlcIiAgODg4ODg4IDg4ICBZYlxyXG4qL1xyXG5cclxuICAvLyBsZXQgbGlzdF9kYXRhID0gbGlzdC5sZW5ndGggPiAwID9cclxuICAvLyBsaXN0Lm1hcCgoaXRlbSwgbmR4KSA9PiB7XHJcbiAgLy8gICByZXR1cm4gKFxyXG4gIC8vICAgICAvLyA8bGkga2V5PXtgJHtkYXRhX29iai5faWR9XyR7aXRlbS5faWR9YH0gPntpdGVtLnRpdGxlX2RhdGF9PC9saT5cclxuICAvLyAgICAgPEl0ZW0ga2V5PXtgJHtuYW1lfV92aWV3XyR7aXRlbS5faWR9XyR7bmR4fWB9IGRhdGE9e2l0ZW19IC8+XHJcbiAgLy8gICApO1xyXG4gIC8vIH0pIDogbnVsbDtcclxuXHJcbiAgb2JzZXJ2ZXJDYWxsYmFjayA9IChub2RlKSA9PiB7XHJcbiAgICAvLyBsZXQgZmV0Y2hfbWUgPSB0aGlzLmZldGNoX2luZm87XHJcblxyXG4gICAgbGV0IGhhc19tb3JlID0gKGV4aXN0cyh0aGlzLmhhc19tb3JlKSAmJiBleGlzdHModGhpcy5oYXNfbW9yZS5jdXJyZW50KSkgPyB0aGlzLmhhc19tb3JlLmN1cnJlbnQgOiB0aGlzLnN0YXRlLmhhc19tb3JlIDtcclxuXHJcbiAgICBjb25zdCBteV9vYnNlcnZlciA9IG9ic2VydmVyU2V0dXBDYWxsYmFjay5iaW5kKHRoaXMpO1xyXG4gICAgbXlfb2JzZXJ2ZXIoe1xyXG4gICAgICBub2RlLFxyXG4gICAgICBvYnNlcnZlcjogdGhpcy5vYnNlcnZlcixcclxuICAgICAgaGFzX21vcmUsXHJcbiAgICAgIGNoaWxkSGVpZ2h0OiB0aGlzLnN0YXRlLmNoaWxkSGVpZ2h0LFxyXG4gICAgICByZW5kZXJBaGVhZDogdGhpcy5zdGF0ZS5yZW5kZXJBaGVhZCxcclxuICAgICAgbGFzdF9yb290TWFyZ2luOiB0aGlzLmxhc3Rfcm9vdE1hcmdpbixcclxuICAgICAgcmVzdG9jazogdGhpcy5yZXN0b2NrLFxyXG4gICAgICBuZXh0X3Jlc3RvY2s6dGhpcy5uZXh0X3Jlc3RvY2ssXHJcbiAgICAgIGxhc3RfcmVzdG9jazp0aGlzLmxhc3RfcmVzdG9ja1xyXG4gICAgfSk7XHJcblxyXG4gIH0vL29ic2VydmVyU2V0dXBDYWxsYmFja1xyXG5cclxuICByZW5kZXIoKXtcclxuXHJcbiAgICBsZXQgc3RhdGUgPSB0aGlzLnN0YXRlO1xyXG4gICAgbGV0IHByb3BzID0gdGhpcy5wcm9wcztcclxuICAgIC8vIGxldCBsaXN0X2xlbmd0aCA9IHByb3BzLmxpc3QubGVuZ3RoO1xyXG4gICAgbGV0IHJlbmRlckFoZWFkID0gc3RhdGUucmVuZGVyQWhlYWQ7XHJcbiAgICBsZXQgbG9hZGluZyA9IHN0YXRlLmxvYWRpbmc7XHJcbiAgICAvLyBJU1NVRTogd2hlbiBpcyByZXF1ZXN0X3NyYyBldmVyIGV4dGVybmFsPyBpdCBuZXZlciBpcy5cclxuICAgIGxldCByZXF1ZXN0X3NyYyA9IHN0YXRlLnJlcXVlc3Rfc3JjID8gc3RhdGUucmVxdWVzdF9zcmMgOiBzdGF0ZS5pbnRlcm5hbF90cmFja2luZyA/IFwiaW50ZXJuYWxcIiA6IHN0YXRlLmxpc3Rfc3JjOy8vIHN0YXRlLmludGVybmFsX3RyYWNraW5nXHJcbiAgICBsZXQgaGFzX21vcmUgPSAocmVxdWVzdF9zcmMgPT0gXCJleHRlcm5hbFwiKSA/IHByb3BzLmRhdGEuaGFzX21vcmUgOiBzdGF0ZS5oYXNfbW9yZTtcclxuICAgIGxldCBpVU4gPSBzdGF0ZS5pVU47XHJcbiAgICBsZXQgdmlzaWJsZSA9IHByb3BzLnZpc2libGUgIT0gdW5kZWZpbmVkID8gcHJvcHMudmlzaWJsZSA6IHRydWU7XHJcblxyXG4gICAgLy8gaWYgKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZygnW1ZpZXdzXSBSTkRSIHJlbmRlcl9uYnInLCB0aGlzLnJlbmRlcl9uYnIuY3VycmVudCk7XHJcblxyXG4gICAgaWYoLyp0eXBlb2YgcHJvcHMgIT0gXCJ1bmRlZmluZWRcIiAmJiovIHZpc2libGUpe1xyXG5cclxuXHJcbiAgICAgIC8vIGlmKHRoaXMucm9vdF92aWV3cG9ydCkgdGhpcy5yb290X3ZpZXdwb3J0LmN1cnJlbnQgPSBgLnZpZXdzX3ZpZXdfY29udGVudF8ke2lVTn1gO1xyXG5cclxuICAgICAgLy8gaWYoc3RhdGUubGlzdC5sZW5ndGggIT0gMCl7XHJcbiAgICAgIC8vXHJcbiAgICAgIC8vICAgLy8gbGV0IEl0ZW0gPSBwcm9wcy5JdGVtO1xyXG4gICAgICAvL1xyXG4gICAgICAvLyAgIGxpc3RfZGF0YSA9IFJlYWN0Lm1lbW8oICh7aW5kZXggOiBuZHh9KSA9PiB7XHJcbiAgICAgIC8vICAgICAvLyA8bGkga2V5PXtgJHtkYXRhX29iai5faWR9XyR7aXRlbS5faWR9YH0gPntpdGVtLnRpdGxlX2RhdGF9PC9saT5cclxuICAgICAgLy8gICAgIGxldCBpdGVtX2lkID0gc3RhdGUubGlzdFtuZHhdO1xyXG4gICAgICAvLyAgICAgbGV0IGl0ZW0gPSBzdGF0ZS5pdGVtc1tpdGVtX2lkXTtcclxuICAgICAgLy8gICAgIGxldCBsaXN0X2xlbmd0aCA9IHN0YXRlLmxpc3QubGVuZ3RoO1xyXG4gICAgICAvLyAgICAgbGV0IHVrZXkgPSBzdGF0ZS5pVU47XHJcbiAgICAgIC8vICAgICAvLyBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihcIltsaXN0X2RhdGFdIHJlcmVuZGVyaW5nXCIsIG5keCk7XHJcbiAgICAgIC8vXHJcbiAgICAgIC8vICAgICAvLyBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihcIltpdGVtXVwiLGl0ZW0pO1xyXG4gICAgICAvLyAgICAgLy8gaWYoc3RhdGUubGlzdC5sZW5ndGggPT0gbmR4ICsgMSl7XHJcbiAgICAgIC8vICAgICAvLyAgIC8vIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKFwiW1ZpZXdzXSBwcmVwcGluZyBlbGVtZW50c1wiKTsvLyBsb2cgb24gdGhlIGxhc3QgZWxlbWVudFxyXG4gICAgICAvLyAgICAgLy8gICByZXR1cm4gKFxyXG4gICAgICAvLyAgICAgLy8gICAgIDxkaXYgY2xhc3NOYW1lPVwidmlld3NfaXRlbV93cmFwcGVyXCIga2V5PXtgJHtpdGVtLl9pZH1fJHtuZHh9YH0gcmVmPXt0aGlzLm9ic2VydmVyU2V0dXBDYWxsYmFja30gZGF0YS1uZHg9e25keH0gPlxyXG4gICAgICAvLyAgICAgLy8gICAgICAgPEl0ZW0ga2V5PXtgJHtzdGF0ZS5uYW1lfV92aWV3XyR7aXRlbS5faWR9XyR7bmR4fWB9IGRhdGE9e2l0ZW19IC8+XHJcbiAgICAgIC8vICAgICAvLyAgICAgPC9kaXY+XHJcbiAgICAgIC8vICAgICAvLyAgICk7XHJcbiAgICAgIC8vICAgICAvLyB9ZWxzZSB7XHJcbiAgICAgIC8vICAgICByZXR1cm4gKFxyXG4gICAgICAvLyAgICAgICAvLyAobGlzdF9sZW5ndGggPT0gbmR4ICsgMSkgP1xyXG4gICAgICAvLyAgICAgICAvLyA8ZGl2IGNsYXNzTmFtZT1cInZpZXdzX2l0ZW1fd3JhcHBlclwiIGtleT17bmR4fSBkYXRhLW5keD17bmR4fSByZWY9e3RoaXMub2JzZXJ2ZXJTZXR1cENhbGxiYWNrfSAgc3R5bGU9e3tib3JkZXI6XCIxcHggc29saWQgZ3JlZW5cIn19PlxyXG4gICAgICAvLyAgICAgICAvLyAgIDxJdGVtIGRhdGE9e2l0ZW19IC8+XHJcbiAgICAgIC8vICAgICAgIC8vIDwvZGl2PlxyXG4gICAgICAvLyAgICAgICAvLyAgOlxyXG4gICAgICAvLyAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZXdzX2l0ZW1fd3JhcHBlclwiIGtleT17bmR4fSBkYXRhLW5keD17bmR4fT5cclxuICAgICAgLy8gICAgICAgICB7LyogPEl0ZW0gZGF0YT17aXRlbX0gc3RvcmU9e3Byb3BzLnN0b3JlfS8+ICovfVxyXG4gICAgICAvLyAgICAgICAgICAgPENsaXBzIGRhdGE9e3suLi5pdGVtLCBzdGF0ZTogcHJvcHMuc3RvcmV9fSBtb2RlPVwiY29yZVwiIC8qcm9vdD17XCJtb2RhbF9jb250XCJ9Ki8gLz5cclxuICAgICAgLy8gICAgICAgPC9kaXY+XHJcbiAgICAgIC8vICAgICApO1xyXG4gICAgICAvLyAgICAgLy8gfVxyXG4gICAgICAvL1xyXG4gICAgICAvLyAgIH0pO1xyXG4gICAgICAvLyB9ZWxzZXtcclxuICAgICAgLy8gICBsaXN0X2RhdGEgPSBudWxsO1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgICAvLyBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihcIltWaWV3c10gcmVuZGVyaW5nXCIsc3RhdGUpO1xyXG5cclxuICAgICAgaWYoKGV4aXN0cyh0aGlzLmluaXQuY3VycmVudCAmJiB0aGlzLmF1dG9faGVpZ2h0LmN1cnJlbnQgIT0gdHJ1ZSkpKXtcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhpcyBoZWlnaHQgaXMgb25seSBzZXQgb25jZSAtIGZpeCAtIGhlaWdodCBzZXQgdG8gemVybyBhZnRlciBjbG9zaW5nICYgcmVvcGVuaW5nIG1haW4gY29yZVxyXG4gICAgICAgIC8vIGxldCB1bF9lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC52aWV3c192aWV3X2NvbnRlbnRfJHtpVU59YCk7Ly8gZG9lc24ndCBleGlzdCB5ZXRcclxuICAgICAgICBsZXQgdWxfZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwcm9wcy5kYXRhLmhvbWV9YCk7Ly8gZG9lc24ndCBleGlzdCB5ZXRcclxuICAgICAgICAvLyBsZXQgdWxfZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZsZHJfZGlzcGxheVwiKTtcclxuICAgICAgICAvLyBHT1RDSEE6IGhvbWUgbXVzdCBoYXZlIGEgY3NzIGhlaWdodCAoZXZlbiBoZWlnaHQ6IDEwMCUpIGZvciB0aGlzIHRvIHdvcmsgcHJvcGVybHlcclxuICAgICAgICB0aGlzLmhlaWdodC5jdXJyZW50ID0gKHVsX2VsICYmIHVsX2VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCkgPyBNYXRoLmZsb29yKHVsX2VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCkgOiBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5hdXRvX2hlaWdodC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGhlaWdodCA9IChleGlzdHModGhpcy5oZWlnaHQuY3VycmVudCkgJiYgIWlzTmFOKHRoaXMuaGVpZ2h0LmN1cnJlbnQpKSA/IHRoaXMuaGVpZ2h0LmN1cnJlbnQgOiB0aGlzLmRlZmF1bHRfaGVpZ2h0Oy8vIGhhY2sgLSBoZWxwcyBlbnN1cmUgdGhlcmUgd2lsbCBiZSBhIGhlaWdodFxyXG4gICAgICAvLyBpdCBhbHNvIGhlbHBlZCB0byB0YWtlIHRoZSB2aWV3c192aWV3X2NvbnRlbnQgZWxlbWVudCBvdXQgb2YgdGhlIGRpc3BsYXlfY29udGVudHMgY29uZGl0aW9uIGFuZCBhZGQgaXQgdG8gdGhlIG1vc3RseSBwcmVzZW50IGRpc3BsYXlfZWxzXHJcblxyXG4gICAgICBsZXQgdGl0bGUgPSAoZXhpc3RzKHN0YXRlLnRpdGxlKSkgPyBzdGF0ZS50aXRsZSA6IHN0YXRlLm5hbWU7Ly8gbmFtZSBhbHJlYWR5IGNvbmRpdGlvbnMgbW9kZSBhYm92ZVxyXG4gICAgICBsZXQgaWNvbiA9IHN0YXRlLmljb247XHJcbiAgICAgIGxldCB2aWV3X2xpc3QgPSBwcm9wcy5kYXRhLmxpc3QgPyBwcm9wcy5kYXRhLmxpc3QgOiBzdGF0ZS5saXN0O1xyXG5cclxuICAgICAgbGV0IHZTY3JvbGxfZGF0YSA9IHtcclxuICAgICAgICBuYW1lOlwidmlld3Nfc2Nyb2xsXCIsXHJcbiAgICAgICAgLy8gcHJlZml4Olwidmlld3NcIixcclxuICAgICAgICBpdGVtQ291bnQ6dmlld19saXN0Lmxlbmd0aCxcclxuICAgICAgICBoZWlnaHQ6aGVpZ2h0LFxyXG4gICAgICAgIGNoaWxkSGVpZ2h0OnRoaXMuc3RhdGUuY2hpbGRIZWlnaHQsXHJcbiAgICAgICAgaGFzX2R5bmFtaWNfaGVpZ2h0OnRoaXMuc3RhdGUuaGFzX2R5bmFtaWNfaGVpZ2h0LFxyXG4gICAgICAgIC8vIGR5bmFtaWNfaGVpZ2h0OnRoaXMuc3RhdGUuZHluYW1pY19oZWlnaHQsIC8vIGZhaWxlZFxyXG4gICAgICAgIGR5bmFtaWNfaGVpZ2h0OnByb3BzLmRhdGEuZHluYW1pY19oZWlnaHQsXHJcbiAgICAgICAgSXRlbTpwcm9wcy5kYXRhLmxpc3RfZGlzcGxheSxcclxuICAgICAgICByZW5kZXJBaGVhZDpyZW5kZXJBaGVhZCxcclxuICAgICAgICBwYWRkaW5nOjQwLFxyXG4gICAgICAgIGhpZGVfc2Nyb2xsOnRydWUsXHJcbiAgICAgICAgb2JzZXJ2ZXI6dGhpcy5vYnNlcnZlckNhbGxiYWNrLFxyXG4gICAgICAgIGxvYWRpbmc6bG9hZGluZyxcclxuICAgICAgICBoYXNfbW9yZTpoYXNfbW9yZSxcclxuICAgICAgICBpVU46aVVOLFxyXG4gICAgICAgIHNob3dfbG9hZGVyOiB0aGlzLnN0YXRlLnNjcm9sbF9sb2FkZXIsXHJcbiAgICAgICAgZGlyOiB0aGlzLnN0YXRlLmRpcixcclxuICAgICAgICBzdGF0czogdGhpcy5zdGF0ZS5zdGF0cyxcclxuICAgICAgICByZWZyZXNoOntjYWxsYmFjazp0aGlzLnJlZnJlc2hfY2FsbGJhY2ssIHRpbWVyOjEwMDAsIHdhaXQ6IGZhbHNlfSxcclxuICAgICAgICAvLyByZW5kZXJfbmJyOiAgdGhpcy5yZW5kZXJfbmJyLmN1cnJlbnQsXHJcbiAgICAgICAgZGF0YV9yZWY6IHRoaXMudnNjcm9sbF9yZWYuY3VycmVudFxyXG4gICAgICB9Ly8gdlNjcm9sbF9kYXRhXHJcblxyXG4gICAgICBpZih0aGlzLnByb3BzLmRhdGEuZmxpcCAmJiB0aGlzLnByb3BzLmRhdGEucG9zaXRpb24pe1xyXG4gICAgICAgIC8vIHRoaXMgc2hvdWxkIGJlIG9rLCBpdCB3aWxsIG9ubHkgc2V0IG9uY2VcclxuICAgICAgICB2U2Nyb2xsX2RhdGEucG9zaXRpb24gPSB0aGlzLnByb3BzLmRhdGEucG9zaXRpb247XHJcbiAgICAgIH0vLyBpZiBcclxuXHJcbiAgICAgIGlmKHRoaXMuc3RhdGUudHJhY2tfcG9zaXRpb24pe1xyXG4gICAgICAgIHZTY3JvbGxfZGF0YS5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uY3VycmVudFxyXG4gICAgICAgIHZTY3JvbGxfZGF0YS5zYXZlX3Bvc2l0aW9uID0gdGhpcy5zYXZlX3Bvc2l0aW9uO1xyXG4gICAgICB9Ly8gaWZcclxuXHJcbiAgICAgIC8vIGRlcHJlY2F0ZWQgVmlydHVhbFNjcm9sbCBwcm9wIHN0cnVjdHVyZVxyXG4gICAgICAvLyBuYW1lPXtcInZpZXdzX3Njcm9sbFwifVxyXG4gICAgICAvLyAvLyBwcmVmaXg9e1widmlld3NcIn1cclxuICAgICAgLy8gaXRlbUNvdW50PXtwcm9wcy5kYXRhLmxpc3QubGVuZ3RofVxyXG4gICAgICAvLyBoZWlnaHQ9e2hlaWdodH1cclxuICAgICAgLy8gY2hpbGRIZWlnaHQ9e3RoaXMuc3RhdGUuY2hpbGRIZWlnaHR9XHJcbiAgICAgIC8vIGhhc19keW5hbWljX2hlaWdodD17dGhpcy5zdGF0ZS5oYXNfZHluYW1pY19oZWlnaHR9XHJcbiAgICAgIC8vIC8vIGR5bmFtaWNfaGVpZ2h0PXt0aGlzLnN0YXRlLmR5bmFtaWNfaGVpZ2h0fS8vIGZhaWxlZFxyXG4gICAgICAvLyBkeW5hbWljX2hlaWdodD17cHJvcHMuZGF0YS5keW5hbWljX2hlaWdodH1cclxuICAgICAgLy8gSXRlbT17cHJvcHMuZGF0YS5saXN0X2Rpc3BsYXl9XHJcbiAgICAgIC8vIHJlbmRlckFoZWFkPXtyZW5kZXJBaGVhZH1cclxuICAgICAgLy8gcGFkZGluZz17NDB9XHJcbiAgICAgIC8vIGhpZGVfc2Nyb2xsPXt0cnVlfVxyXG4gICAgICAvLyBvYnNlcnZlcj17dGhpcy5vYnNlcnZlckNhbGxiYWNrfVxyXG4gICAgICAvLyBsb2FkaW5nPXtsb2FkaW5nfVxyXG4gICAgICAvLyBoYXNfbW9yZT17aGFzX21vcmV9XHJcbiAgICAgIC8vIHBvc2l0aW9uPXt0aGlzLnBvc2l0aW9uLmN1cnJlbnR9XHJcbiAgICAgIC8vIGlVTj17aVVOfVxyXG4gICAgICAvLyBzaG93X2xvYWRlcj17dGhpcy5zdGF0ZS5zaG93X2xvYWRlcn1cclxuICAgICAgLy8gcmVmcmVzaD17e2NhbGxiYWNrOnRoaXMucmVmcmVzaF9jYWxsYmFjaywgdGltZXI6MTAwMCwgd2FpdDogZmFsc2V9fVxyXG5cclxuICAgICAgbGV0IGRpc3BsYXlfY29udGVudHMgPSAocHJvcHMuZGF0YS5saXN0X2Rpc3BsYXkgIT0gbnVsbCkgPyAoXHJcbiAgICAgICAgICA8PlxyXG4gICAgICAgICAgeyhleGlzdHModGhpcy5pbml0LmN1cnJlbnQpKSA/IDxWaXJ0dWFsU2Nyb2xsIHsuLi52U2Nyb2xsX2RhdGF9IC8+IDogbnVsbH1cclxuICAgICAgICAgIDwvPlxyXG4gICAgICAgICkgOiAodGhpcy5zdGF0ZS5tYWluX2xvYWRlcikgPyAgKFxyXG4gICAgICAgICAgLy8gPGRpdiBjbGFzc05hbWU9XCJ2aWV3c19sb2FkZXJfd3JhcHBlclwiID5cclxuICAgICAgICAgIC8vICAgPGRpdiBjbGFzc05hbWU9XCJ2aWV3c19pdGVtX2xvYWRlciBsb2FkZXIgcmVzZXQtdG9wXCJcclxuICAgICAgICAgIC8vICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAvLyAgICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1ZpZXdzXSBsb2FkZXIgd2FzIGNsaWNrZWRgKTtcclxuICAgICAgICAgIC8vICAgICAgIHRoaXMucmVmcmVzaF9jYWxsYmFjaygpO1xyXG4gICAgICAgICAgLy8gICAgIH19ID5cclxuICAgICAgICAgIC8vICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRlcl9yZWZyZXNoIGljb24tc3Bpbm5lcjExIGQzLWljbyBkMy1ibG9jXCI+PC9kaXY+XHJcbiAgICAgICAgICAvLyAgIDwvZGl2PlxyXG4gICAgICAgICAgLy8gPC9kaXY+XHJcbiAgICAgICAgICA8TG9hZGVyIG5hbWU9e1widmlld3NcIn0gdHlwZT17XCJkb3RzXCJ9IGlubmVyPXt7XHJcbiAgICAgICAgICAgIG9uQ2xpY2s6KCkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKGBbVmlld3NdIGxvYWRlciB3YXMgY2xpY2tlZGApO1xyXG4gICAgICAgICAgICAgIHRoaXMucmVmcmVzaF9jYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9LCB2YXJpYW50czpcInJlc2V0LXRvcFwiXHJcbiAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkZXJfcmVmcmVzaCBpY29uLXNwaW5uZXIxMSBkMy1pY28gZDMtYmxvY1wiPjwvZGl2PlxyXG4gICAgICAgICAgPC9Mb2FkZXI+XHJcbiAgICAgICAgKSA6IG51bGw7Ly8gcHJldmlvdXNseSBudWxsIC0gYWRkIGFuIGVtcHR5IG1lc3NhZ2UgYW5kIHJlZnJlc2ggYnRuIGhlcmVcclxuXHJcbiAgICAgIC8vIGxldCBkaXNwbGF5X2VscyA9IChcclxuICAgICAgLy8gICA8ZGl2IGNsYXNzTmFtZT17YHZpZXdzX3ZpZXdfd3JhcHBlciAke3N0YXRlLm5hbWV9YH0+XHJcbiAgICAgIC8vICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZXdzX3ZpZXdfaGVhZGVyIGNsYW1wLTBcIj5cclxuICAgICAgLy8gICAgICAgPGRpdiBjbGFzc05hbWU9e2B2aWV3c192aWV3X2ljb24gaWNvbi0ke2ljb259IGQzLWljbyBkMy1ibG9jYH0+PC9kaXY+XHJcbiAgICAgIC8vICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmlld3Nfdmlld190aXRsZSBjbGFtcC0xXCI+e3VuZXNjYXBlKHRpdGxlKX08L2Rpdj5cclxuICAgICAgLy8gICAgIDwvZGl2PlxyXG4gICAgICAvLyAgICAgPGRpdiBjbGFzc05hbWU9e2B2aWV3c192aWV3X2NvbnQgJHtzdGF0ZS5uYW1lfWB9PlxyXG4gICAgICAvLyAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHZpZXdzX3ZpZXdfY29udGVudCB2aWV3c192aWV3X2NvbnRlbnRfJHtpVU59ICR7c3RhdGUubmFtZX0gcGxhaW4gaGlkZS1zY3JvbGxgfT5cclxuICAgICAgLy8gICAgICAgICB7ZGlzcGxheV9jb250ZW50c31cclxuICAgICAgLy8gICAgICAgPC9kaXY+XHJcbiAgICAgIC8vICAgICA8L2Rpdj5cclxuICAgICAgLy8gICA8L2Rpdj4pO1xyXG5cclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8PlxyXG4gICAgICAgIHtkaXNwbGF5X2NvbnRlbnRzfVxyXG4gICAgICAgIHsoLyp0aGlzLnN0YXRlLmxvYWRpbmcgJiYgdGhpcy5zdGF0ZS5oYXNfbW9yZSAmJiovdGhpcy5zdGF0ZS5tYWluX2xvYWRlciAmJiAhdGhpcy5zdGF0ZS5pbml0ICAmJiAhZGlzcGxheV9jb250ZW50cyAvKk5PVzoxMCB3aGF0IGlmIGl0cyBlbXB0eT8gdGVzdCBmb3IgdGhpcyovKSA/IChcclxuICAgICAgICAgIC8vIDxkaXYgY2xhc3NOYW1lPVwidmlld3NfbG9hZGVyX3dyYXBwZXJcIiA+XHJcbiAgICAgICAgICAvLyAgIDxkaXYgY2xhc3NOYW1lPVwidmlld3NfaXRlbV9sb2FkZXIgbG9hZGVyIHJlc2V0LW1pZFwiXHJcbiAgICAgICAgICAvLyAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgLy8gICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtWaWV3c10gbG9hZGVyIHdhcyBjbGlja2VkYCk7XHJcbiAgICAgICAgICAvLyAgICAgICB0aGlzLnJlZnJlc2hfY2FsbGJhY2soKTtcclxuICAgICAgICAgIC8vICAgICB9fSA+XHJcbiAgICAgICAgICAvLyAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkZXJfcmVmcmVzaCBpY29uLXNwaW5uZXIxMSBkMy1pY28gZDMtYmxvY1wiPjwvZGl2PlxyXG4gICAgICAgICAgLy8gICA8L2Rpdj5cclxuICAgICAgICAgIC8vIDwvZGl2PlxyXG4gICAgICAgICAgPExvYWRlciBuYW1lPXtcInZpZXdzXCJ9IHR5cGU9e1wiZG90c1wifSBpbm5lcj17e1xyXG4gICAgICAgICAgICBvbkNsaWNrOigpID0+IHtcclxuICAgICAgICAgICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1ZpZXdzXSBsb2FkZXIgd2FzIGNsaWNrZWRgKTtcclxuICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hfY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSwgdmFyaWFudHM6XCJyZXNldC1taWRcIlxyXG4gICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGVyX3JlZnJlc2ggaWNvbi1zcGlubmVyMTEgZDMtaWNvIGQzLWJsb2NcIj48L2Rpdj5cclxuICAgICAgICAgIDwvTG9hZGVyPlxyXG4gICAgICAgICAgKSA6IG51bGwgfVxyXG4gICAgICA8Lz5cclxuICAgICAgKTtcclxuXHJcbiAgICB9ZWxzZXtcclxuICAgICAgcmV0dXJuICh0aGlzLnN0YXRlLm1haW5fbG9hZGVyICYmICgvKnByb3BzID09IHVuZGVmaW5lZCB8fCBwcm9wcyAhPSB1bmRlZmluZWQgJiYqLyB2aXNpYmxlKSkgPyAoXHJcbiAgICAgICAgLy8gPGRpdiBjbGFzc05hbWU9XCJ2aWV3c19sb2FkZXJfd3JhcHBlciBoaWRlLXNjcm9sbFwiID5cclxuICAgICAgICAvLyAgIDxkaXYgY2xhc3NOYW1lPVwidmlld3NfaXRlbV9sb2FkZXIgbG9hZGVyIHJlc2V0LWxvd1wiXHJcbiAgICAgICAgLy8gICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAvLyAgICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihgW1ZpZXdzXSBsb2FkZXIgd2FzIGNsaWNrZWRgKTtcclxuICAgICAgICAvLyAgICAgICB0aGlzLnJlZnJlc2hfY2FsbGJhY2soKTtcclxuICAgICAgICAvLyAgICAgfX0gPlxyXG4gICAgICAgIC8vICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRlcl9yZWZyZXNoIGljb24tc3Bpbm5lcjExIGQzLWljbyBkMy1ibG9jXCI+PC9kaXY+XHJcbiAgICAgICAgLy8gICA8L2Rpdj5cclxuICAgICAgICAvLyA8L2Rpdj5cclxuICAgICAgICA8TG9hZGVyIG5hbWU9e1widmlld3NcIn0gdmFyaWFudHM9e1wiaGlkZS1zY3JvbGxcIn0gdHlwZT17XCJkb3RzXCJ9IGlubmVyPXt7XHJcbiAgICAgICAgICBvbkNsaWNrOigpID0+IHtcclxuICAgICAgICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oYFtWaWV3c10gbG9hZGVyIHdhcyBjbGlja2VkYCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaF9jYWxsYmFjaygpO1xyXG4gICAgICAgICAgfSwgdmFyaWFudHM6XCJyZXNldC1sb3dcIlxyXG4gICAgICAgIH19PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkZXJfcmVmcmVzaCBpY29uLXNwaW5uZXIxMSBkMy1pY28gZDMtYmxvY1wiPjwvZGl2PlxyXG4gICAgICAgIDwvTG9hZGVyPlxyXG4gICAgICApIDogbnVsbDtcclxuICAgIH1cclxuICB9Ly8gcmVuZGVyXHJcbn0vLyBWaWV3c1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZpZXdzO1xyXG5cclxuLy8gc3R5bGU9e3toZWlnaHQ6IFwiMjAwcHhcIiwgYmFja2dyb3VuZDogXCJyZWRcIiwgd2lkdGg6IFwiMTAwJVwifX1cclxubGV0IHJlcXVlc3RfdGFza3MgPSB7XHJcbiAgcmVjZW50OiBcImdldFJlY2VudFwiLFxyXG4gIGJvb2ttYXJrczogXCJnZXRCb29rbWFya3NcIlxyXG59XHJcblxyXG5jb25zdCBjcmVhdGVfb3JkZXIgPSAoe3Jlc3VsdH0pID0+IHtcclxuXHJcbiAgbGV0IHJlc3VsdF9pZF9hcnkgPSBbXTtcclxuICBsZXQgcmVzdWx0X2lkX29iaiA9IHt9O1xyXG5cclxuICBpZihBcnJheS5pc0FycmF5KHJlc3VsdCkgJiYgcmVzdWx0Lmxlbmd0aCAhPSAwKXtcclxuICAgIHJlc3VsdC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHJlc3VsdF9pZF9hcnkgPSBbLi4ucmVzdWx0X2lkX2FyeSwgaXRlbS5faWRdOy8vIHRoaXMgd2lsbCBoZWxwIHdpdGggb3JkZXJpbmdcclxuICAgICAgcmVzdWx0X2lkX29ialtpdGVtLl9pZF0gPSBpdGVtO1xyXG4gICAgfSk7XHJcbiAgfS8vaWZcclxuXHJcbiAgbGV0IHJlc3VsdF9pZHMgPSBbLi4ucmVzdWx0X2lkX2FyeV07XHJcbiAgbGV0IHJlc3VsdF9kYXRhID0gey4uLnJlc3VsdF9pZF9vYmp9O1xyXG4gIHJldHVybiB7cmVzdWx0X2lkcywgcmVzdWx0X2RhdGF9O1xyXG5cclxufS8vIGNyZWF0ZV9vcmRlclxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBMEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTVMQTtBQThMQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFsTUE7QUFvTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBRQTtBQUNBO0FBREE7QUFrUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEJBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBOURBO0FBQUE7QUErREE7QUFBQTtBQUNBO0FBaEVBO0FBK0RBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTNFQTtBQUFBO0FBMkVBO0FBQUE7QUFDQTtBQTVFQTtBQUFBO0FBMkVBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUExTkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBNE5BO0FBQ0E7QUE3TkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQW5SQTtBQXVmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdmQTtBQThmQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQS9mQTtBQWtoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBM2lCQTtBQTZpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuakJBO0FBc2tCQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBWUE7QUFDQTtBQXRsQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4Q0E7QUEyQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBakhBO0FBa0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQSthQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBdEJBO0FBQ0E7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUpBO0FBQUE7QUFNQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUpBO0FBQUE7QUFNQTtBQUFBO0FBTUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFKQTtBQUFBO0FBTUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTs7OztBQXAwQkE7QUFDQTtBQUNBO0FBcTBCQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/VirtualScroll/Views.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/VirtualScroll/Views.scss":
/*!********************************************************************!*\
  !*** ./js/components/Narrator/components/VirtualScroll/Views.scss ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVmlydHVhbFNjcm9sbC9WaWV3cy5zY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci9jb21wb25lbnRzL1ZpcnR1YWxTY3JvbGwvVmlld3Muc2Nzcz9hMzZmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/VirtualScroll/Views.scss\n");

/***/ }),

/***/ "./js/components/Narrator/components/VirtualScroll/VirtualScroll.js":
/*!**************************************************************************!*\
  !*** ./js/components/Narrator/components/VirtualScroll/VirtualScroll.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Pully__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Pully */ \"./js/components/Narrator/components/VirtualScroll/Pully.js\");\n/* harmony import */ var _Loader_Loader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Loader/Loader */ \"./js/components/Narrator/components/Loader/Loader.js\");\n/* harmony import */ var _tools_exists__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../tools/exists */ \"./js/components/Narrator/tools/exists.js\");\n/* harmony import */ var _tools_exists__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_tools_exists__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\nvar _require = __webpack_require__(/*! ../../tools/class_maker */ \"./js/components/Narrator/tools/class_maker.js\"),\n    class_maker = _require.class_maker;\n\n__webpack_require__(/*! ./VirtualScroll.scss */ \"./js/components/Narrator/components/VirtualScroll/VirtualScroll.scss\");\n\nvar display_console = false;\n\nvar useScrollAware = function useScrollAware(_ref) {\n  var has_dynamic_height = _ref.has_dynamic_height,\n      dynamic_height = _ref.dynamic_height,\n      _ref$flip = _ref.flip,\n      flip = _ref$flip === void 0 ? false : _ref$flip;\n\n  // custom hook\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(0),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useState, 2),\n      scrollTop = _useState2[0],\n      setScrollTop = _useState2[1];\n\n  var viewport_ref = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])();\n  var last_fixed_top = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(0);\n  var last_top = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(0);\n  var dynamic_node = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(0);\n  var scrollBottom = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(0);\n  var last_dir = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(\"bottom\");\n  var dh_ref = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])([0]); //0\n\n  dh_ref.current = dynamic_height;\n  if (display_console || false) console.debug(\"[useScrollAware] dynamic_height =\", dynamic_height);\n\n  var find_position = function find_position(dH, fxd) {\n    // binary search for the node's position index\n    return binarySearch(dH, fxd);\n  }; // find_position\n\n\n  var binarySearch = function binarySearch(array, target) {\n    var startIndex = 0;\n    var endIndex = array.length - 1;\n    var middleIndex;\n    var test_console = false;\n    var iterations = 0;\n    var limit = 200;\n    if (display_console || test_console || false) console.debug(\"\\narray = \" + array);\n    if (array.length < 2 || target == 0) return 0; // avoid an infinite loop with a zero array\n\n    while (startIndex <= endIndex && iterations < limit) {\n      // there is an iteration limit that can limit item detection to a lesser index\n      middleIndex = Math.floor((startIndex + endIndex) / 2);\n\n      if (target == array[middleIndex]) {\n        if (display_console || test_console || false) console.debug(\"\\nTarget was found at index \" + middleIndex);\n        middleIndex;\n        break;\n      } else if (target > array[middleIndex]) {\n        if (display_console || test_console || false) console.debug(\"\\nSearching the right side of Array of middleIndex \".concat(middleIndex, \" \\n target \").concat(target, \" > \").concat(array[middleIndex]));\n        startIndex = middleIndex + 1;\n      } else if (target < array[middleIndex]) {\n        if (display_console || test_console || false) console.debug(\"\\nSearching the left side of array of middleIndex \".concat(middleIndex, \" \\n target \").concat(target, \" < \").concat(array[middleIndex]));\n        endIndex = middleIndex - 1;\n      } else if (startIndex == endIndex) {\n        // nothing to see here\n        break;\n      } else {\n        if (display_console || test_console || false) console.debug(\"Not Found this loop iteration. Looping another iteration.\");\n      }\n\n      iterations++;\n    } // while\n\n\n    if (display_console || test_console || false) console.debug(\"[VirtualScroll] binarySearch: iterations = \", iterations);\n\n    if (iterations >= limit) {\n      console.error(\"[VirtualScroll] binarySearch: while was stuck in an infinite loop\");\n\n      if (display_console || test_console || false) {\n        console.debug([\"[VirtualScroll] binarySearch: \\n \", \"Target = \".concat(target, \" \\n\"), \"middleIndex = \".concat(middleIndex, \" \\n\"), \"startIndex = \".concat(startIndex, \" \\n\"), \"endIndex = \".concat(endIndex), \"array = \".concat(array)].join());\n      }\n    } // if\n\n\n    var final_index = target < 0 || middleIndex <= 0 ? 0 : target >= array[middleIndex] ? middleIndex : middleIndex - 1;\n    if (display_console || test_console || false) console.debug(\"Target \".concat(target, \" value not found in array \").concat(array, \". middleIndex is \").concat(final_index, \" \\n iterations = \").concat(iterations)); // fix for -1 NaN problem in find_visible\n\n    return final_index;\n  }; // binarySearch\n  // if startIndex is 1 and endIndex is 10 then middleIndex will be 5. if target is less than 5 then startIndex \n  // remains 1 and endIndex will then change to 4 and middle index will be 2 and then the checks continue\n\n\n  var onScroll = function onScroll(e, _ref2) {\n    var flip = _ref2.flip;\n    return requestAnimationFrame(function () {\n      // why use requestAnimationFrame? what are the benefits?\n      // most of this code is unnecessary - the requestAnimationFrame runs at 60fps and isn't limited by any offset\n      // i try to use to limit the number of calculations\n      if (display_console || false) console.debug(\"[scrollAware] onScroll flip\", flip);\n      var num = e.target.scrollTop; // the amount of pixels the overflow is over the visible top threshold\n\n      var fixed = num.toFixed(); // shaves off all the decimal places\n\n      var offset = has_dynamic_height ? 0 : 10; //??? - this looks like it limits the rerender increment to every 10 px instead of every pixel change\n\n      var last = last_top.current; // helps determine the scroll direction based on the number +/- since last scroll\n\n      var last_fixed = Number(last_fixed_top.current); // shows change of top dir every 10 pxs (offset)\n\n      var adding_to = fixed > last ? \"bottom\" : \"top\"; // last shows change of dir down to the px\n\n      last_top.current = fixed; // console.warn(`[onScroll] adding_to ${adding_to}`)\n\n      if (\n      /*fixed > last + offset*/\n      adding_to == \"bottom\" || fixed < last_fixed - offset) {\n        // i wonder why im not doing increments of 10 (offset) for scrolling down?\n        // console.warn(`[onScroll] scrollTop = ${last}`)\n        // console.warn(`[onScroll] lf + o ${last_fixed + offset} < f ${fixed} > lf - o  ${last_fixed - offset} \\n lf = last_fixed o = offset and f = fixed`);\n        if (flip) scrollBottom.current = getScrollBottom(e.target, true);\n        if (display_console || false) console.debug(\"[scrollAware] scrollBottom = \".concat(scrollBottom.current));\n\n        if (has_dynamic_height) {\n          if (dh_ref.current.length < 2) {\n            dynamic_node.current = 0;\n          } else {\n            var test_height = flip ? scrollBottom.current : fixed;\n            dynamic_node.current = find_position(dh_ref.current, fixed); // test_height\n          }\n        } // if\n\n\n        if (adding_to != last_dir.current && false) {\n          // added to help find the src of the jank in the scroll - ill keep it though\n          if (display_console || false) console.debug(\"[scrollAware] dir: \".concat(adding_to));\n          last_dir.current = adding_to;\n        } // if\n\n\n        last_fixed_top.current = fixed;\n        if (display_console || false) console.debug(\"[scrollAware] scrollTop = \".concat(fixed));\n        setScrollTop(fixed);\n      } // scroll top tells how far the scrollable content container is\n      // from the top of the scrolling viewport so when items 0 and 1 are out of sight scrollTop is 60\n\n    });\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    var scrollContainer = viewport_ref.current;\n    setScrollTop(scrollContainer.scrollTop);\n    scrollContainer.addEventListener(\"scroll\", function (e) {\n      onScroll(e, {\n        flip: flip\n      });\n    }); // cleanup fn\n\n    return function () {\n      return scrollContainer.removeEventListener(\"scroll\", onScroll);\n    };\n  }, []);\n  return [scrollTop, viewport_ref, dynamic_node.current, scrollBottom.current];\n}; // useScrollAware\n\n/**\r\n * @module VirtualScroll\r\n * @category List\r\n * @subcategory scroll\r\n * @desc VirtualScroll component\r\n * @param {string} name,\r\n * @param {string} [prefix = \"\"]\r\n * @param {number} [iUN = Math.round(Math.random() * 10000)]\r\n * @param {object} Item, this is the mapping template for the list items\r\n * @param {number} itemCount the list item data array count - used to populate visible_area height\r\n * @param {number} height scrollcontainer height - this height comes out to 300,000px 30 * 10,000\r\n * @param {number} childHeight, item height\r\n * @param {number} [renderAhead = 3] i believe i have seen this labeled as padding - this will render 20 items above * below\r\n * @param {number} [padding = 0] padding between each item\r\n * @param {boolean} [hide_scroll = false]\r\n * @param {object} observer useRef\r\n * @param {boolean} [loading = false]\r\n * @param {boolean} [has_more = false]\r\n * @param {boolean} [position = 0]\r\n * @param {callback} save_position stores and references the lists scroll position in the store\r\n * @param {boolean} [stats = true] ? dev var used to show stats during renders\r\n * @param {callback} refresh pull to refresh callback that triggers the Pully component\r\n * @requires Pully\r\n * @see [ReactListItems]{@link module:ReactListItems~refresh_binder}\r\n * @see [Arc iconWall_callback]{@link module:Arc~iconWall_callback}\r\n */\n\n/**\r\n * @file\r\n */\n\n\nvar VirtualScroll = React.memo(function (_ref3) {\n  var props_iUN = _ref3.iUN,\n      name = _ref3.name,\n      _ref3$prefix = _ref3.prefix,\n      prefix = _ref3$prefix === void 0 ? \"\" : _ref3$prefix,\n      Item = _ref3.Item,\n      itemCount = _ref3.itemCount,\n      childHeight = _ref3.childHeight,\n      height = _ref3.height,\n      _ref3$renderAhead = _ref3.renderAhead,\n      renderAhead = _ref3$renderAhead === void 0 ? 3 : _ref3$renderAhead,\n      _ref3$padding = _ref3.padding,\n      padding = _ref3$padding === void 0 ? 0 : _ref3$padding,\n      _ref3$hide_scroll = _ref3.hide_scroll,\n      hide_scroll = _ref3$hide_scroll === void 0 ? false : _ref3$hide_scroll,\n      observer = _ref3.observer,\n      _ref3$loading = _ref3.loading,\n      loading = _ref3$loading === void 0 ? false : _ref3$loading,\n      _ref3$has_more = _ref3.has_more,\n      has_more = _ref3$has_more === void 0 ? false : _ref3$has_more,\n      _ref3$position = _ref3.position,\n      position = _ref3$position === void 0 ? 0 : _ref3$position,\n      save_position = _ref3.save_position,\n      _ref3$stats = _ref3.stats,\n      stats = _ref3$stats === void 0 ? false : _ref3$stats,\n      refresh = _ref3.refresh,\n      _ref3$show_loader = _ref3.show_loader,\n      show_loader = _ref3$show_loader === void 0 ? true : _ref3$show_loader,\n      _ref3$has_dynamic_hei = _ref3.has_dynamic_height,\n      has_dynamic_height = _ref3$has_dynamic_hei === void 0 ? false : _ref3$has_dynamic_hei,\n      _ref3$dynamic_height = _ref3.dynamic_height,\n      dynamic_height = _ref3$dynamic_height === void 0 ? [0] : _ref3$dynamic_height,\n      _ref3$dir = _ref3.dir,\n      dir = _ref3$dir === void 0 ? \"forward\" : _ref3$dir,\n      _ref3$skip_position = _ref3.skip_position,\n      skip_position = _ref3$skip_position === void 0 ? false : _ref3$skip_position,\n      _ref3$data_ref = _ref3.data_ref,\n      data_ref = _ref3$data_ref === void 0 ? {} : _ref3$data_ref;\n  var iUN_ref = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(Math.round(Math.random() * 10000));\n  var iUN = props_iUN || iUN_ref.current;\n  /**\r\n   * @callback useScrollAware\r\n   * @desc\r\n   * idk what the significance of scrollTop - top of what? <br>\r\n   * - scrollTop is how far the top of the internal <br>\r\n   * scroll element is from the scroll viewport <br>\r\n   * @return {object} scrolltop, ref\r\n   */\n\n  var flip = dir != \"forward\" ? true : false;\n\n  var _useScrollAware = useScrollAware({\n    has_dynamic_height: has_dynamic_height,\n    dynamic_height: dynamic_height,\n    flip: flip\n  }),\n      _useScrollAware2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useScrollAware, 4),\n      scrollTop = _useScrollAware2[0],\n      viewport_ref = _useScrollAware2[1],\n      dynamic_node = _useScrollAware2[2],\n      scrollBottom = _useScrollAware2[3]; // preps scroll height and sends a ref to use in scroll event listener\n\n\n  var container = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])();\n\n  if (typeof save_position == \"function\") {\n    save_position(scrollTop);\n  } //if\n\n\n  var hideScroll = hide_scroll ? \"hide-scroll\" : \"\";\n  var last_request_section = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(0); // i get this - how to set the content containers\n  //childHeight = childHeight + padding;// WARN: this is causing the jank!!!!!!\n\n  if (Object(_tools_exists__WEBPACK_IMPORTED_MODULE_4__[\"obj_exists\"])(viewport_ref, \"current\")) {\n    data_ref.viewport = viewport_ref;\n  } // if\n\n\n  var use_height = has_dynamic_height ? dynamic_height[dynamic_height.length - 1] : itemCount * childHeight;\n  var totalHeight = use_height + padding; // can i give it padding?\n\n  var viewport_height = Math.min(height, totalHeight); //(totalHeight < height) ? totalHeight : height;\n  // Math.floor keeps the decimal places out of the calculation\n  // what does startNode do?\n  // let startNode = Math.floor(scrollTop / childHeight) - renderAhead;// how will i do this dynamically?\n  // this will be my dynamic setup\n\n  var startNode = has_dynamic_height ? dynamic_node - renderAhead : Math.floor(scrollTop / childHeight) - renderAhead;\n\n  if (display_console || false) {\n    var toov = has_dynamic_height ? dynamic_node : Math.floor(scrollTop / childHeight);\n    var sn_calc = [\"[startNode] calc 1 \\n \", \"top out-of-view indexes  \".concat(has_dynamic_height ? \"\" : \"= Math.floor(scrollTop (\".concat(scrollTop, \") / childHeight (\").concat(childHeight, \"))\"), \" = \").concat(toov, \"\\n\"), \"\\ntop out-of-view indexes (\".concat(toov, \") - renderAhead (\").concat(renderAhead, \") = startNode (\").concat(startNode, \")\")].join(\"\");\n    console.warn(sn_calc);\n  } // if\n\n\n  if (display_console || false) {\n    var _toov = Math.floor(scrollTop / childHeight);\n\n    var vis_ndx = startNode + renderAhead + 1;\n    var sn_stats = [\"[startNode] stats \\n \", \"startNode = \".concat(startNode, \" \").concat(startNode < 0 ? \"or \".concat(Math.max(0, startNode - 1)) : \"\"), \"\\n\".concat(_toov, \" total top out-of-view indexes \\n\"), \"\".concat(Math.max(0, startNode), \" indexes not being rendered\\n\"), startNode - 1 < 0 ? \"\" : startNode - 1 == 0 ? \"index 0 not being rendered\\n\" : \"index 0 - \".concat(Math.max(0, startNode - 1), \" not being rendered\\n\"), startNode < 0 ? \"\" : \"index \".concat(startNode, \" - \").concat(startNode + renderAhead - 1, \" being top rendered ahead\\n\"), \"visible index = \".concat(startNode + renderAhead + 1 - 1, \"\\n\"), \"indexes \".concat(vis_ndx - 1, \" - \").concat(vis_ndx - 1 + 3, \" are potentially visible\\n\"), \"\\n(note: more accurate padding creates a more accurate stat line)\\n\"].join(\"\");\n    console.debug(sn_stats);\n  } // if\n\n\n  var topNode = startNode; //Math.floor(scrollTop / childHeight);\n\n  if (display_console || false) console.debug(\"[topNode] calc \", topNode);\n  /**\r\n   * @member startNode\r\n   * @desc\r\n   * this math max keeps the first x (renderAhead || 20) set as a zero (instead of negative nbrs) startNode because there isn't more to put overhead\r\n   * than the 20 initial items. once the (renderAhead || 20) gets overhead the count starts to move.\r\n   * if renderAhead hasn't been reached this number by subracting renderAhead could become a negative number\r\n   */\n\n  startNode = Math.max(0, startNode);\n  if (display_console || false) console.debug(\"[startNode] calc 2\", startNode); // calculates how many nodes can fit into the viewport + doubles renderAhead\n  // let visibleNodeCount = Math.ceil(viewport_height / childHeight) + 2 * renderAhead;/* 300 / 30 = 10 + 2*20 = 50 */\n\n  var visibleNodeCount = has_dynamic_height ? find_visible({\n    viewport_height: viewport_height,\n    dynamic_node: dynamic_node,\n    dynamic_height: dynamic_height\n  }) + 2 * renderAhead : Math.ceil(viewport_height / childHeight) + 2 * renderAhead; // console.log(\"[visible node count] calc 1\",visibleNodeCount);\n\n  /**\r\n   * @member visibleNodeCount\r\n   * @desc\r\n   * this will return the lowest number passed to it. which effectly means that it will stop when the nbr\r\n   * reaches a certain limit (by the calculation countdown that is happening). <br>\r\n   * what happens when the calculation countdown goes under the set nbr? <br>\r\n   * eventually the visible node count will fall below the staic number, coupled with the start node\r\n   * it will force no more nodes to be created\r\n   *\r\n   * if itemCount is less than the startNode maybe the data has started over. go with the numbers we have. (do we reset the scrollTop?)\r\n   */\n\n  visibleNodeCount = itemCount < startNode ? itemCount : Math.min(itemCount - startNode, visibleNodeCount);\n\n  if (itemCount < startNode) {\n    // protects agains restarting without the proper restarting processes\n    // this happens when itemCount is a negative #\n    startNode = 0;\n  } // console.log(`[itemCount ${itemCount} - startNode ${startNode}]`,itemCount - startNode);\n  // console.log(\"[visible node count] calc 2\",visibleNodeCount);\n  // const offsetY = startNode * childHeight;// startNode/topNode // pre dynamic offset\n  // in dynamic_height the offset would be the progressive increase in height already in the dynamic_height array\n\n\n  var offsetY = has_dynamic_height ? dynamic_height[startNode] : startNode * childHeight; // startNode/topNode\n\n  if (display_console || false) console.debug(\"[offsetY] startNode \".concat(startNode, \" * childHeight \").concat(childHeight, \" = offsetY\"), offsetY);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // NOTE: in most cases the list_display in Views isn't active unless the list has data (no empty) \n    // so this will be safe to run once at the start because there will be a value\n    if (skip_position) return;\n    if (display_console || false) console.debug(\"[VirtualScroll] position = \", position);\n    viewport_ref.current.scrollTo(0, position); // this works (otherwise i would use an init boolean in its own useEffect)\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // stats no longer needed, im no longer using this to trigger restocking\n    if (!stats) return; // console.warn(\"[viewport] in viewport\",viewport_height / childHeight);\n    // console.warn(\"[hidden count]\",2 * renderAhead);\n\n    var vh_str = [\"[visible node count] calc \\n\", \" \\n viewport_height (\".concat(viewport_height, \") / \"), \"childHeight (\".concat(childHeight, \")) + 2 * renderAhead (\").concat(renderAhead, \") = \"), \"\".concat(Math.ceil(viewport_height / childHeight) + 2 * renderAhead, \" \\n or \\n \"), \"itemCount (\".concat(itemCount, \") - startNode/topNode (\").concat(startNode, \") = \").concat(itemCount - startNode, \" (possible remaining nodes) \\n\"), \"\\n actual visible node count = \".concat(visibleNodeCount, \" (the min #)\\n \"), \"(# needs to be below first render #) \\n\", \"\\n after scrolltop reaches the height of \".concat(renderAhead, \" (renderAhead) items,\"), \" \\n the startNode/topNode index (\".concat(startNode, \") will change and items will start to be removed \\n\")].join(\"\");\n    if (display_console || false) console.debug(vh_str);\n    var fRender = [\"[first render] \".concat(itemCount - renderAhead), \" render ahead by \".concat(renderAhead, \" \"), \" \\n (observer triggers at this index)\"].join(\"\");\n    if (display_console || false) console.warn(fRender);\n    if (display_console || false) console.warn(\"[vScroll] viewport ref = \", viewport_ref.current); // i want to set this to a scroll position\n    // get the scroll top\n  }, []); // to see stats, change stat var to true and remove the useEffect empty array ,[] and change display_console to true\n  // useEffect((params) => {\n  //   if (display_console || false) console.debug('[VirtualScroll] UEF render_nbr', render_nbr);\n  // })\n  // GOTCHA: Error - VirtualScroll.js Uncaught RangeError: Invalid array length\n  // im going to try to fix this error.\n\n  if (visibleNodeCount < 1 || isNaN(visibleNodeCount)) {\n    if (display_console || false) console.warn('[VirtualScroll] WARNING: visibleNodeCount.length', visibleNodeCount); // return null;\n\n    visibleNodeCount = 0;\n  }\n\n  ;\n  /**\r\n   * @member visibleChildren\r\n   * @desc\r\n   * why use memo here? - oh yeah, this will only change when the properties in the array below change <br>\r\n   * item changes when its index changes. its index property changes if its index is changed its alright\r\n   * for it to be changed here - i think it will be disgarded i don't think it is reused and sent to top/bottom\r\n   */\n\n  var visibleChildren = React.useMemo(function () {\n    if (display_console || false) console.debug(\"[VirtualScroll] visibleNodeCount\", visibleNodeCount);\n    return new Array(visibleNodeCount).fill(null).map(function (_, index) {\n      // do something\n      // the startNode is the 1st index that should be visibly rendered - scrollTop ndx - renderahead\n      // the tru_ndx is the actual index to render counted from the \"startNode\" index\n      var tru_ndx = index + startNode; // console.warn(\"[map] index\",index);\n      // if (display_console || false) console.debug(`[map] index (${index}) startNode (${startNode})  tru_index`,tru_ndx);\n\n      if (display_console || false) console.debug(\"[map] tru_index\", tru_ndx); // while scrolling the tru_ndx stays the same until it eats up the render ahead distance\n      // if(restock && tru_ndx > itemCount - renderAhead && tru_ndx > last_request_section.current){\n      //   // run this request once per section\n      //   last_request_section.current = itemCount;\n      //   // console.warn(`[rendered at] itemCount ${itemCount} - renderAhead ${renderAhead}`, itemCount - renderAhead);\n      //   // console.warn(\"running mock request callout\");\n      //   // console.warn(\"[visibleChildren] itemCount\",itemCount);\n      //   restock();\n      // }\n\n      return /*#__PURE__*/React.createElement(Item, {\n        key: tru_ndx,\n        index: tru_ndx\n      });\n    });\n  }, [startNode, visibleNodeCount, Item]); // keep researching the behind the scenes to the magic or dom-recycling 'supposedly' being used here\n  // (my assumption, maybe it isn't)\n\n  var pully = null;\n\n  if (typeof refresh != \"undefined\") {\n    /**\r\n     * @var pully-data\r\n     * @desc pully data object\r\n     * @prop {object} container useRef\r\n     * @prop {callback} refresh refresh callback\r\n     * @requires Pully\r\n     * @see [ReactListItems]{@link module:ReactListItems~refresh_binder}\r\n     * @see [Arc iconWall_callback]{@link module:Arc~iconWall_callback}\r\n     * @type {Object}\r\n     */\n    var pully_data = {\n      container: viewport_ref,\n      refresh: refresh\n    };\n    pully = /*#__PURE__*/React.createElement(_Pully__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      data: pully_data\n    });\n  }\n\n  var loader_display = /*#__PURE__*/React.createElement(_Loader_Loader__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    name: name,\n    prefix: prefix,\n    iUN: iUN,\n    ref: observer,\n    type: \"dots\",\n    onClick: function onClick(e) {\n      if (display_console || true) console.warn(\"[VirtualScroll] Loader clicked!\");\n      observer(e.target, true);\n    },\n    \"data-observer\": \"loader\",\n    variants: \"vScroll2\"\n  });\n\n  var force_scroll = function force_scroll(botPos) {\n    var new_scroll_top = viewport_ref.current.scrollHeight - botPos;\n    if (display_console || false) console.debug(\"[VirtualScroll] new_scroll_top\", new_scroll_top);\n    viewport_ref.current.scrollTo(0, new_scroll_top);\n  }; // force_scroll\n\n\n  data_ref.force_scroll = force_scroll;\n  data_ref.getScrollBottom = getScrollBottom;\n  if (display_console || false) console.warn(\"[VirtualScroll] rerendering...\"); // if (display_console || false) console.debug('[VirtualScroll] RNDR render_nbr', render_nbr);\n  // if((display_console || true) && has_dynamic_height) console.warn(`[VirtualScroll] dynamic_height = `, dynamic_height);\n  // if((display_console || true) && has_dynamic_height) console.warn(`[VirtualScroll] totalHeight = `, totalHeight);\n  // how does it know to move the item to the bottom?\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, pully, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(class_maker({\n      prefix: prefix,\n      name: name,\n      main: \"viewport\",\n      iUN: iUN\n    }), \" VirtualScroll \").concat(hideScroll, \" \"),\n    style: {\n      height: height,\n      overflow: \"auto\"\n    },\n    \"data-comp\": \"VirtualScroll\",\n    ref: viewport_ref\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: class_maker({\n      prefix: prefix,\n      name: name,\n      main: \"visible_area\",\n      iUN: iUN\n    })\n    /*the former viewport*/\n    ,\n    style: {\n      overflow: \"hidden\",\n      willChange: \"transform\",\n      height: totalHeight,\n      position: \"relative\",\n      minHeight: height\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: class_maker({\n      prefix: prefix,\n      name: name,\n      main: \"inner_content\",\n      iUN: iUN\n    }),\n    style: {\n      willChange: \"transform\",\n      transform: \"translateY(\".concat(offsetY, \"px)\")\n    }\n  }, has_more && show_loader && dir == \"reverse\" ? loader_display : null, visibleChildren, has_more && show_loader && dir == \"forward\" ? loader_display : null))));\n}); // };\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (VirtualScroll);\n\nvar find_visible = function find_visible(_ref4) {\n  var viewport_height = _ref4.viewport_height,\n      dynamic_node = _ref4.dynamic_node,\n      dynamic_height = _ref4.dynamic_height;\n  var iterator = 0;\n  var node_height = 0;\n  var ndx = 1;\n  var static_value = dynamic_height[dynamic_node]; // the height at the position we are at\n  // what if were at the end of the dynamic_height array?\n\n  while (node_height < viewport_height && dynamic_node + ndx < dynamic_height.length && iterator <= 50) {\n    // this takes the top visible node and starts adding indexes and adding the height of that index until the \n    // viewport is height is reached\n    node_height = dynamic_height[dynamic_node + ndx] - static_value;\n    if (display_console || false) console.debug(\"[VirtualScroll] find_visible \\n viewport_height = \".concat(viewport_height, \" \\nnode_height = \").concat(node_height));\n    ndx++;\n    iterator++;\n  } // while\n\n\n  if (iterator > 50) {\n    console.error(\"[VirtualScroll] find_visible iterator saves an infinite loop\");\n  }\n\n  var visible_nodes = ndx - 1;\n  if (display_console || false) console.debug(\"[VirtualScroll] find_visible start = \".concat(dynamic_node, \" visible nodes = \").concat(visible_nodes));\n  return visible_nodes;\n}; // find_visible\n\n\nvar getScrollBottom = function getScrollBottom(el) {\n  var omit_viewport = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var sT = el.scrollTop;\n  var sH = el.scrollHeight;\n  var vph = omit_viewport ? 0 : el.getBoundingClientRect().height;\n  var sB = sH - (sT + vph);\n  return sB.toFixed();\n}; // getScrollBottom\n\n/*\r\n// [article build your own virtual scroller](https://dev.to/adamklein/build-your-own-virtual-scroll-part-i-11ib)\r\n// [code sandbox](https://codesandbox.io/s/214p1911yn?from-embed=&file=/src/VirtualScroll.js)\r\n// wrap the item template in a memo fn, i want to do some things before i add the data to the elements\r\nconst Item = React.memo(({ index }) => (\r\n  <div\r\n    style={{\r\n      height: 30,\r\n      lineHeight: \"30px\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      padding: \"0 10px\"\r\n    }}\r\n    className=\"row\"\r\n    key={index}\r\n  >\r\n    <img\r\n      alt={index}\r\n      src={`http://lorempixel.com/30/30/animals/${(index % 10) + 1}`}\r\n    />\r\n    row index {index}\r\n  </div>\r\n));\r\n  const App = () => {\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>Virtual Scroll</h1>\r\n      <VirtualScroll\r\n        itemCount={100}\r\n        height={300}\r\n        childHeight={30}\r\n        Item={Item}\r\n      />\r\n      <hr />\r\n      <h1>Hooks are awesome!</h1>\r\n      <a\r\n        rel=\"noopener noreferrer\"\r\n        target=\"_blank\"\r\n        href=\"https://github.com/500tech/hook-cook-book\"\r\n      >\r\n        Explore more examples\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n  ReactDOM.render(\r\n<App />,\r\ndocument.querySelector('.root')\r\n);\r\n  //sample component setup\r\n<VirtualScroll\r\n  itemCount={100}\r\n  height={300}\r\n  childHeight={30}\r\n  Item={Item}\r\n/>\r\n*///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVmlydHVhbFNjcm9sbC9WaXJ0dWFsU2Nyb2xsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci9jb21wb25lbnRzL1ZpcnR1YWxTY3JvbGwvVmlydHVhbFNjcm9sbC5qcz8yZDYwIl0sInNvdXJjZXNDb250ZW50IjpbIiAgaW1wb3J0IC8qUmVhY3QsKi8ge21lbW8sIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlTWVtb30gZnJvbSAncmVhY3QnO1xyXG4gIGltcG9ydCBQdWxseSBmcm9tICcuL1B1bGx5JztcclxuICBpbXBvcnQgTG9hZGVyIGZyb20gJy4uL0xvYWRlci9Mb2FkZXInO1xyXG4gIGltcG9ydCB7IG9ial9leGlzdHMgfSBmcm9tICcuLi8uLi90b29scy9leGlzdHMnO1xyXG4gIGNvbnN0IHtjbGFzc19tYWtlcn0gPSByZXF1aXJlKCcuLi8uLi90b29scy9jbGFzc19tYWtlcicpO1xyXG4gIHJlcXVpcmUoXCIuL1ZpcnR1YWxTY3JvbGwuc2Nzc1wiKTtcclxuXHJcbiAgY29uc3QgZGlzcGxheV9jb25zb2xlID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0IHVzZVNjcm9sbEF3YXJlID0gKHtoYXNfZHluYW1pY19oZWlnaHQsIGR5bmFtaWNfaGVpZ2h0LCBmbGlwID0gZmFsc2V9KSA9PiB7XHJcbiAgICAvLyBjdXN0b20gaG9va1xyXG4gICAgY29uc3QgW3Njcm9sbFRvcCwgc2V0U2Nyb2xsVG9wXSA9IHVzZVN0YXRlKDApO1xyXG4gICAgY29uc3Qgdmlld3BvcnRfcmVmID0gdXNlUmVmKCk7XHJcbiAgICBjb25zdCBsYXN0X2ZpeGVkX3RvcCA9IHVzZVJlZigwKTtcclxuICAgIGNvbnN0IGxhc3RfdG9wID0gdXNlUmVmKDApO1xyXG4gICAgY29uc3QgZHluYW1pY19ub2RlID0gdXNlUmVmKDApO1xyXG4gICAgY29uc3Qgc2Nyb2xsQm90dG9tID0gdXNlUmVmKDApO1xyXG4gICAgY29uc3QgbGFzdF9kaXIgPSB1c2VSZWYoXCJib3R0b21cIik7XHJcbiAgICBjb25zdCBkaF9yZWYgPSB1c2VSZWYoWzBdKTsvLzBcclxuICAgIGRoX3JlZi5jdXJyZW50ID0gZHluYW1pY19oZWlnaHQ7XHJcblxyXG4gICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmRlYnVnKGBbdXNlU2Nyb2xsQXdhcmVdIGR5bmFtaWNfaGVpZ2h0ID1gLGR5bmFtaWNfaGVpZ2h0KTtcclxuXHJcbiAgICBjb25zdCBmaW5kX3Bvc2l0aW9uID0gKGRILGZ4ZCkgPT4ge1xyXG4gICAgICAvLyBiaW5hcnkgc2VhcmNoIGZvciB0aGUgbm9kZSdzIHBvc2l0aW9uIGluZGV4XHJcbiAgICAgIHJldHVybiBiaW5hcnlTZWFyY2goZEgsIGZ4ZClcclxuICAgIH0vLyBmaW5kX3Bvc2l0aW9uXHJcblxyXG4gICAgY29uc3QgYmluYXJ5U2VhcmNoID0gKGFycmF5LCB0YXJnZXQpID0+IHtcclxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAwO1xyXG4gICAgICBsZXQgZW5kSW5kZXggPSBhcnJheS5sZW5ndGggLSAxO1xyXG4gICAgICBsZXQgbWlkZGxlSW5kZXg7XHJcbiAgICAgIGxldCB0ZXN0X2NvbnNvbGUgPSBmYWxzZTtcclxuICAgICAgbGV0IGl0ZXJhdGlvbnMgPSAwO1xyXG4gICAgICBsZXQgbGltaXQgPSAyMDA7XHJcblxyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgdGVzdF9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmRlYnVnKGBcXG5hcnJheSA9IGAgKyBhcnJheSk7XHJcblxyXG4gICAgICBpZihhcnJheS5sZW5ndGggPCAyIHx8IHRhcmdldCA9PSAwKSByZXR1cm4gMDsvLyBhdm9pZCBhbiBpbmZpbml0ZSBsb29wIHdpdGggYSB6ZXJvIGFycmF5XHJcblxyXG4gICAgICB3aGlsZSAoc3RhcnRJbmRleCA8PSBlbmRJbmRleCAmJiBpdGVyYXRpb25zIDwgbGltaXQpIHtcclxuICAgICAgICAvLyB0aGVyZSBpcyBhbiBpdGVyYXRpb24gbGltaXQgdGhhdCBjYW4gbGltaXQgaXRlbSBkZXRlY3Rpb24gdG8gYSBsZXNzZXIgaW5kZXhcclxuICAgICAgICBtaWRkbGVJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0SW5kZXggKyBlbmRJbmRleCkgLyAyKTtcclxuXHJcbiAgICAgICAgaWYodGFyZ2V0ID09IGFycmF5W21pZGRsZUluZGV4XSkge1xyXG4gICAgICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IHRlc3RfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZyhgXFxuVGFyZ2V0IHdhcyBmb3VuZCBhdCBpbmRleCBgICsgbWlkZGxlSW5kZXgpO1xyXG4gICAgICAgICAgbWlkZGxlSW5kZXg7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0YXJnZXQgPiBhcnJheVttaWRkbGVJbmRleF0pIHtcclxuICAgICAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCB0ZXN0X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoYFxcblNlYXJjaGluZyB0aGUgcmlnaHQgc2lkZSBvZiBBcnJheSBvZiBtaWRkbGVJbmRleCAke21pZGRsZUluZGV4fSBcXG4gdGFyZ2V0ICR7dGFyZ2V0fSA+ICR7YXJyYXlbbWlkZGxlSW5kZXhdfWApXHJcbiAgICAgICAgICBzdGFydEluZGV4ID0gbWlkZGxlSW5kZXggKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRhcmdldCA8IGFycmF5W21pZGRsZUluZGV4XSkge1xyXG4gICAgICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IHRlc3RfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZyhgXFxuU2VhcmNoaW5nIHRoZSBsZWZ0IHNpZGUgb2YgYXJyYXkgb2YgbWlkZGxlSW5kZXggJHttaWRkbGVJbmRleH0gXFxuIHRhcmdldCAke3RhcmdldH0gPCAke2FycmF5W21pZGRsZUluZGV4XX1gKVxyXG4gICAgICAgICAgZW5kSW5kZXggPSBtaWRkbGVJbmRleCAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXJ0SW5kZXggPT0gZW5kSW5kZXgpe1xyXG4gICAgICAgICAgLy8gbm90aGluZyB0byBzZWUgaGVyZVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IHRlc3RfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZyhcIk5vdCBGb3VuZCB0aGlzIGxvb3AgaXRlcmF0aW9uLiBMb29waW5nIGFub3RoZXIgaXRlcmF0aW9uLlwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXRlcmF0aW9ucysrO1xyXG4gICAgICB9Ly8gd2hpbGVcclxuXHJcbiAgICAgIGlmIChkaXNwbGF5X2NvbnNvbGUgfHwgdGVzdF9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmRlYnVnKFwiW1ZpcnR1YWxTY3JvbGxdIGJpbmFyeVNlYXJjaDogaXRlcmF0aW9ucyA9IFwiLCBpdGVyYXRpb25zKTtcclxuXHJcbiAgICAgIGlmIChpdGVyYXRpb25zID49IGxpbWl0KXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBbVmlydHVhbFNjcm9sbF0gYmluYXJ5U2VhcmNoOiB3aGlsZSB3YXMgc3R1Y2sgaW4gYW4gaW5maW5pdGUgbG9vcGApO1xyXG4gICAgICAgIGlmIChkaXNwbGF5X2NvbnNvbGUgfHwgdGVzdF9jb25zb2xlIHx8IGZhbHNlKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKFtgW1ZpcnR1YWxTY3JvbGxdIGJpbmFyeVNlYXJjaDogXFxuIGAsIFxyXG4gICAgICAgICAgYFRhcmdldCA9ICR7dGFyZ2V0fSBcXG5gLCBcclxuICAgICAgICAgICAgYG1pZGRsZUluZGV4ID0gJHttaWRkbGVJbmRleH0gXFxuYCwgXHJcbiAgICAgICAgICAgIGBzdGFydEluZGV4ID0gJHtzdGFydEluZGV4fSBcXG5gLFxyXG4gICAgICAgICAgICBgZW5kSW5kZXggPSAke2VuZEluZGV4fWAsXHJcbiAgICAgICAgICAgIGBhcnJheSA9ICR7YXJyYXl9YFxyXG4gICAgICAgICAgXS5qb2luKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0vLyBpZlxyXG5cclxuICAgICAgbGV0IGZpbmFsX2luZGV4ID0gKHRhcmdldCA8IDAgfHwgbWlkZGxlSW5kZXggPD0gMCkgPyAwIDogKHRhcmdldCA+PSBhcnJheVttaWRkbGVJbmRleF0pID8gbWlkZGxlSW5kZXggOiBtaWRkbGVJbmRleCAtIDE7XHJcbiAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCB0ZXN0X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoYFRhcmdldCAke3RhcmdldH0gdmFsdWUgbm90IGZvdW5kIGluIGFycmF5ICR7YXJyYXl9LiBtaWRkbGVJbmRleCBpcyAke2ZpbmFsX2luZGV4fSBcXG4gaXRlcmF0aW9ucyA9ICR7aXRlcmF0aW9uc31gKTtcclxuXHJcbiAgICAgIC8vIGZpeCBmb3IgLTEgTmFOIHByb2JsZW0gaW4gZmluZF92aXNpYmxlXHJcbiAgICAgIHJldHVybiBmaW5hbF9pbmRleDtcclxuICAgIH0vLyBiaW5hcnlTZWFyY2hcclxuICAgIC8vIGlmIHN0YXJ0SW5kZXggaXMgMSBhbmQgZW5kSW5kZXggaXMgMTAgdGhlbiBtaWRkbGVJbmRleCB3aWxsIGJlIDUuIGlmIHRhcmdldCBpcyBsZXNzIHRoYW4gNSB0aGVuIHN0YXJ0SW5kZXggXHJcbiAgICAvLyByZW1haW5zIDEgYW5kIGVuZEluZGV4IHdpbGwgdGhlbiBjaGFuZ2UgdG8gNCBhbmQgbWlkZGxlIGluZGV4IHdpbGwgYmUgMiBhbmQgdGhlbiB0aGUgY2hlY2tzIGNvbnRpbnVlXHJcblxyXG4gICAgY29uc3Qgb25TY3JvbGwgPSAoZSx7ZmxpcH0pID0+XHJcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgLy8gd2h5IHVzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWU/IHdoYXQgYXJlIHRoZSBiZW5lZml0cz9cclxuXHJcbiAgICAgICAgLy8gbW9zdCBvZiB0aGlzIGNvZGUgaXMgdW5uZWNlc3NhcnkgLSB0aGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHJ1bnMgYXQgNjBmcHMgYW5kIGlzbid0IGxpbWl0ZWQgYnkgYW55IG9mZnNldFxyXG4gICAgICAgIC8vIGkgdHJ5IHRvIHVzZSB0byBsaW1pdCB0aGUgbnVtYmVyIG9mIGNhbGN1bGF0aW9uc1xyXG4gICAgICAgIGlmIChkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoYFtzY3JvbGxBd2FyZV0gb25TY3JvbGwgZmxpcGAsIGZsaXApO1xyXG5cclxuXHJcbiAgICAgICAgbGV0IG51bSA9IGUudGFyZ2V0LnNjcm9sbFRvcDsvLyB0aGUgYW1vdW50IG9mIHBpeGVscyB0aGUgb3ZlcmZsb3cgaXMgb3ZlciB0aGUgdmlzaWJsZSB0b3AgdGhyZXNob2xkXHJcbiAgICAgICAgbGV0IGZpeGVkID0gbnVtLnRvRml4ZWQoKTsvLyBzaGF2ZXMgb2ZmIGFsbCB0aGUgZGVjaW1hbCBwbGFjZXNcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gaGFzX2R5bmFtaWNfaGVpZ2h0ID8gMCA6IDEwOy8vPz8/IC0gdGhpcyBsb29rcyBsaWtlIGl0IGxpbWl0cyB0aGUgcmVyZW5kZXIgaW5jcmVtZW50IHRvIGV2ZXJ5IDEwIHB4IGluc3RlYWQgb2YgZXZlcnkgcGl4ZWwgY2hhbmdlXHJcbiAgICAgICAgbGV0IGxhc3QgPSBsYXN0X3RvcC5jdXJyZW50Oy8vIGhlbHBzIGRldGVybWluZSB0aGUgc2Nyb2xsIGRpcmVjdGlvbiBiYXNlZCBvbiB0aGUgbnVtYmVyICsvLSBzaW5jZSBsYXN0IHNjcm9sbFxyXG4gICAgICAgIGxldCBsYXN0X2ZpeGVkID0gTnVtYmVyKGxhc3RfZml4ZWRfdG9wLmN1cnJlbnQpOy8vIHNob3dzIGNoYW5nZSBvZiB0b3AgZGlyIGV2ZXJ5IDEwIHB4cyAob2Zmc2V0KVxyXG4gICAgICAgIGxldCBhZGRpbmdfdG8gPSAoZml4ZWQgPiBsYXN0KSA/IFwiYm90dG9tXCIgOiBcInRvcFwiOy8vIGxhc3Qgc2hvd3MgY2hhbmdlIG9mIGRpciBkb3duIHRvIHRoZSBweFxyXG5cclxuICAgICAgICBsYXN0X3RvcC5jdXJyZW50ID0gZml4ZWQ7XHJcbiAgICAgICAgLy8gY29uc29sZS53YXJuKGBbb25TY3JvbGxdIGFkZGluZ190byAke2FkZGluZ190b31gKVxyXG4gICAgICAgIGlmKC8qZml4ZWQgPiBsYXN0ICsgb2Zmc2V0Ki8gYWRkaW5nX3RvID09IFwiYm90dG9tXCIgfHwgZml4ZWQgPCBsYXN0X2ZpeGVkIC0gb2Zmc2V0KXtcclxuICAgICAgICAgIC8vIGkgd29uZGVyIHdoeSBpbSBub3QgZG9pbmcgaW5jcmVtZW50cyBvZiAxMCAob2Zmc2V0KSBmb3Igc2Nyb2xsaW5nIGRvd24/XHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oYFtvblNjcm9sbF0gc2Nyb2xsVG9wID0gJHtsYXN0fWApXHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oYFtvblNjcm9sbF0gbGYgKyBvICR7bGFzdF9maXhlZCArIG9mZnNldH0gPCBmICR7Zml4ZWR9ID4gbGYgLSBvICAke2xhc3RfZml4ZWQgLSBvZmZzZXR9IFxcbiBsZiA9IGxhc3RfZml4ZWQgbyA9IG9mZnNldCBhbmQgZiA9IGZpeGVkYCk7XHJcbiAgICAgICAgICBpZihmbGlwKSBzY3JvbGxCb3R0b20uY3VycmVudCA9IGdldFNjcm9sbEJvdHRvbShlLnRhcmdldCx0cnVlKTtcclxuICAgICAgICAgIGlmIChkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoYFtzY3JvbGxBd2FyZV0gc2Nyb2xsQm90dG9tID0gJHtzY3JvbGxCb3R0b20uY3VycmVudH1gKTtcclxuXHJcbiAgICAgICAgICBpZihoYXNfZHluYW1pY19oZWlnaHQpe1xyXG4gICAgICAgICAgICBpZihkaF9yZWYuY3VycmVudC5sZW5ndGggPCAyKXtcclxuICAgICAgICAgICAgICBkeW5hbWljX25vZGUuY3VycmVudCA9IDA7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgIGxldCB0ZXN0X2hlaWdodCA9IGZsaXAgPyBzY3JvbGxCb3R0b20uY3VycmVudCA6IGZpeGVkO1xyXG4gICAgICAgICAgICAgIGR5bmFtaWNfbm9kZS5jdXJyZW50ID0gZmluZF9wb3NpdGlvbihkaF9yZWYuY3VycmVudCwgZml4ZWQpOy8vIHRlc3RfaGVpZ2h0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0vLyBpZlxyXG5cclxuICAgICAgICAgIGlmKGFkZGluZ190byAhPSBsYXN0X2Rpci5jdXJyZW50ICYmIGZhbHNlKXtcclxuICAgICAgICAgICAgLy8gYWRkZWQgdG8gaGVscCBmaW5kIHRoZSBzcmMgb2YgdGhlIGphbmsgaW4gdGhlIHNjcm9sbCAtIGlsbCBrZWVwIGl0IHRob3VnaFxyXG4gICAgICAgICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoYFtzY3JvbGxBd2FyZV0gZGlyOiAke2FkZGluZ190b31gKTtcclxuICAgICAgICAgICAgbGFzdF9kaXIuY3VycmVudCA9IGFkZGluZ190bztcclxuICAgICAgICAgIH0vLyBpZlxyXG5cclxuXHJcbiAgICAgICAgICBsYXN0X2ZpeGVkX3RvcC5jdXJyZW50ID0gZml4ZWQ7XHJcblxyXG4gICAgICAgICAgaWYgKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZyhgW3Njcm9sbEF3YXJlXSBzY3JvbGxUb3AgPSAke2ZpeGVkfWApO1xyXG4gICAgICAgICAgc2V0U2Nyb2xsVG9wKGZpeGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2Nyb2xsIHRvcCB0ZWxscyBob3cgZmFyIHRoZSBzY3JvbGxhYmxlIGNvbnRlbnQgY29udGFpbmVyIGlzXHJcbiAgICAgICAgLy8gZnJvbSB0aGUgdG9wIG9mIHRoZSBzY3JvbGxpbmcgdmlld3BvcnQgc28gd2hlbiBpdGVtcyAwIGFuZCAxIGFyZSBvdXQgb2Ygc2lnaHQgc2Nyb2xsVG9wIGlzIDYwXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IHZpZXdwb3J0X3JlZi5jdXJyZW50O1xyXG5cclxuICAgICAgc2V0U2Nyb2xsVG9wKHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3ApO1xyXG4gICAgICBzY3JvbGxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIG9uU2Nyb2xsKGUse2ZsaXB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGNsZWFudXAgZm5cclxuICAgICAgcmV0dXJuICgpID0+IHNjcm9sbENvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uU2Nyb2xsKTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICByZXR1cm4gW3Njcm9sbFRvcCwgdmlld3BvcnRfcmVmLCBkeW5hbWljX25vZGUuY3VycmVudCwgc2Nyb2xsQm90dG9tLmN1cnJlbnRdO1xyXG4gIH07Ly8gdXNlU2Nyb2xsQXdhcmVcclxuXHJcbiAgLyoqXHJcbiAgICogQG1vZHVsZSBWaXJ0dWFsU2Nyb2xsXHJcbiAgICogQGNhdGVnb3J5IExpc3RcclxuICAgKiBAc3ViY2F0ZWdvcnkgc2Nyb2xsXHJcbiAgICogQGRlc2MgVmlydHVhbFNjcm9sbCBjb21wb25lbnRcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3ByZWZpeCA9IFwiXCJdXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtpVU4gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMCldXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IEl0ZW0sIHRoaXMgaXMgdGhlIG1hcHBpbmcgdGVtcGxhdGUgZm9yIHRoZSBsaXN0IGl0ZW1zXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGl0ZW1Db3VudCB0aGUgbGlzdCBpdGVtIGRhdGEgYXJyYXkgY291bnQgLSB1c2VkIHRvIHBvcHVsYXRlIHZpc2libGVfYXJlYSBoZWlnaHRcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IHNjcm9sbGNvbnRhaW5lciBoZWlnaHQgLSB0aGlzIGhlaWdodCBjb21lcyBvdXQgdG8gMzAwLDAwMHB4IDMwICogMTAsMDAwXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNoaWxkSGVpZ2h0LCBpdGVtIGhlaWdodFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcmVuZGVyQWhlYWQgPSAzXSBpIGJlbGlldmUgaSBoYXZlIHNlZW4gdGhpcyBsYWJlbGVkIGFzIHBhZGRpbmcgLSB0aGlzIHdpbGwgcmVuZGVyIDIwIGl0ZW1zIGFib3ZlICogYmVsb3dcclxuICAgKiBAcGFyYW0ge251bWJlcn0gW3BhZGRpbmcgPSAwXSBwYWRkaW5nIGJldHdlZW4gZWFjaCBpdGVtXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbaGlkZV9zY3JvbGwgPSBmYWxzZV1cclxuICAgKiBAcGFyYW0ge29iamVjdH0gb2JzZXJ2ZXIgdXNlUmVmXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbbG9hZGluZyA9IGZhbHNlXVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2hhc19tb3JlID0gZmFsc2VdXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbcG9zaXRpb24gPSAwXVxyXG4gICAqIEBwYXJhbSB7Y2FsbGJhY2t9IHNhdmVfcG9zaXRpb24gc3RvcmVzIGFuZCByZWZlcmVuY2VzIHRoZSBsaXN0cyBzY3JvbGwgcG9zaXRpb24gaW4gdGhlIHN0b3JlXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbc3RhdHMgPSB0cnVlXSA/IGRldiB2YXIgdXNlZCB0byBzaG93IHN0YXRzIGR1cmluZyByZW5kZXJzXHJcbiAgICogQHBhcmFtIHtjYWxsYmFja30gcmVmcmVzaCBwdWxsIHRvIHJlZnJlc2ggY2FsbGJhY2sgdGhhdCB0cmlnZ2VycyB0aGUgUHVsbHkgY29tcG9uZW50XHJcbiAgICogQHJlcXVpcmVzIFB1bGx5XHJcbiAgICogQHNlZSBbUmVhY3RMaXN0SXRlbXNde0BsaW5rIG1vZHVsZTpSZWFjdExpc3RJdGVtc35yZWZyZXNoX2JpbmRlcn1cclxuICAgKiBAc2VlIFtBcmMgaWNvbldhbGxfY2FsbGJhY2tde0BsaW5rIG1vZHVsZTpBcmN+aWNvbldhbGxfY2FsbGJhY2t9XHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmaWxlXHJcbiAgICovXHJcblxyXG4gIGNvbnN0IFZpcnR1YWxTY3JvbGwgPSBSZWFjdC5tZW1vKCh7XHJcbiAgLy8gY29uc3QgVmlydHVhbFNjcm9sbCA9ICh7XHJcbiAgICBpVU46cHJvcHNfaVVOLFxyXG4gICAgbmFtZSxcclxuICAgIHByZWZpeCA9IFwiXCIsXHJcbiAgICBJdGVtLC8qdGhpcyBpcyB0aGUgbWFwcGluZyB0ZW1wbGF0ZSBmb3IgdGhlIGxpc3QgaXRlbXMqL1xyXG4gICAgaXRlbUNvdW50LFxyXG4gICAgY2hpbGRIZWlnaHQsLyppdGVtIGhlaWdodCovXHJcbiAgICBoZWlnaHQsLypzY3JvbGxjb250YWluZXIgaGVpZ2h0IC0gdGhpcyBoZWlnaHQgY29tZXMgb3V0IHRvIDMwMCwwMDBweCAzMCAqIDEwLDAwMCovXHJcbiAgICByZW5kZXJBaGVhZCA9IDMsLyppIGJlbGlldmUgaSBoYXZlIHNlZW4gdGhpcyBsYWJlbGVkIGFzIHBhZGRpbmcgLSB0aGlzIHdpbGwgcmVuZGVyIDIwIGl0ZW1zIGFib3ZlICYvb3IgYmVsb3cqL1xyXG4gICAgcGFkZGluZyA9IDAsLypwYWRkaW5nIGhhcyBhbiBvcHBvc2l0ZSBlZmZlY3QuICBtb3JlIG1ha2VzIHRoZSBzZW5zb3IgdHJpZ2dlciBmdXJ0aGVyIGludG8gdGhlIG5leHQgaXRlbSovXHJcbiAgICAvLyB0b28gbXVjaCBuZWdhdGl2ZSBwYWRkaW5nIG1ha2VzIGl0ZW1zIGN1dCBvZmYgYXQgdGhlIGJvdHRvbSBvZiB0aGUgbGlzdFxyXG4gICAgaGlkZV9zY3JvbGwgPSBmYWxzZSxcclxuICAgIG9ic2VydmVyLFxyXG4gICAgbG9hZGluZyA9IGZhbHNlLFxyXG4gICAgaGFzX21vcmUgPSBmYWxzZSxcclxuICAgIHBvc2l0aW9uID0gMCxcclxuICAgIHNhdmVfcG9zaXRpb24sXHJcbiAgICBzdGF0cyA9IGZhbHNlLC8vYWxsb3dzIGNlcnRhaW4gY29uc29sZS4gdG8gYmUgZGlzcGxheWVkXHJcbiAgICByZWZyZXNoLFxyXG4gICAgc2hvd19sb2FkZXIgPSB0cnVlLFxyXG4gICAgaGFzX2R5bmFtaWNfaGVpZ2h0ID0gZmFsc2UsXHJcbiAgICBkeW5hbWljX2hlaWdodCA9IFswXSxcclxuICAgIGRpciA9IFwiZm9yd2FyZFwiLFxyXG4gICAgc2tpcF9wb3NpdGlvbiA9IGZhbHNlLFxyXG4gICAgLy8gcmVuZGVyX25icixcclxuICAgIGRhdGFfcmVmID0ge31cclxuICB9KSA9PiB7XHJcblxyXG4gIGNvbnN0IGlVTl9yZWYgPSB1c2VSZWYoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMDApKTtcclxuICBjb25zdCBpVU4gPSBwcm9wc19pVU4gfHwgaVVOX3JlZi5jdXJyZW50O1xyXG5cclxuICAgICAvKipcclxuICAgICAgKiBAY2FsbGJhY2sgdXNlU2Nyb2xsQXdhcmVcclxuICAgICAgKiBAZGVzY1xyXG4gICAgICAqIGlkayB3aGF0IHRoZSBzaWduaWZpY2FuY2Ugb2Ygc2Nyb2xsVG9wIC0gdG9wIG9mIHdoYXQ/IDxicj5cclxuICAgICAgKiAtIHNjcm9sbFRvcCBpcyBob3cgZmFyIHRoZSB0b3Agb2YgdGhlIGludGVybmFsIDxicj5cclxuICAgICAgKiBzY3JvbGwgZWxlbWVudCBpcyBmcm9tIHRoZSBzY3JvbGwgdmlld3BvcnQgPGJyPlxyXG4gICAgICAqIEByZXR1cm4ge29iamVjdH0gc2Nyb2xsdG9wLCByZWZcclxuICAgICAgKi9cclxuICAgIGxldCBmbGlwID0gZGlyICE9IFwiZm9yd2FyZFwiID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgY29uc3QgW3Njcm9sbFRvcCwgdmlld3BvcnRfcmVmLCBkeW5hbWljX25vZGUsIHNjcm9sbEJvdHRvbV0gPSB1c2VTY3JvbGxBd2FyZSh7aGFzX2R5bmFtaWNfaGVpZ2h0LCBkeW5hbWljX2hlaWdodCwgZmxpcH0pOy8vIHByZXBzIHNjcm9sbCBoZWlnaHQgYW5kIHNlbmRzIGEgcmVmIHRvIHVzZSBpbiBzY3JvbGwgZXZlbnQgbGlzdGVuZXJcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHVzZVJlZigpO1xyXG5cclxuICAgIGlmKHR5cGVvZiBzYXZlX3Bvc2l0aW9uID09IFwiZnVuY3Rpb25cIil7XHJcbiAgICAgIHNhdmVfcG9zaXRpb24oc2Nyb2xsVG9wKTtcclxuICAgIH0vL2lmXHJcblxyXG4gICAgY29uc3QgaGlkZVNjcm9sbCA9IChoaWRlX3Njcm9sbCkgPyBcImhpZGUtc2Nyb2xsXCIgOiBcIlwiO1xyXG4gICAgY29uc3QgbGFzdF9yZXF1ZXN0X3NlY3Rpb24gPSB1c2VSZWYoMCk7XHJcblxyXG4gICAgLy8gaSBnZXQgdGhpcyAtIGhvdyB0byBzZXQgdGhlIGNvbnRlbnQgY29udGFpbmVyc1xyXG5cclxuXHJcbiAgICAvL2NoaWxkSGVpZ2h0ID0gY2hpbGRIZWlnaHQgKyBwYWRkaW5nOy8vIFdBUk46IHRoaXMgaXMgY2F1c2luZyB0aGUgamFuayEhISEhIVxyXG4gICAgaWYgKG9ial9leGlzdHModmlld3BvcnRfcmVmLFwiY3VycmVudFwiKSl7XHJcbiAgICAgIGRhdGFfcmVmLnZpZXdwb3J0ID0gdmlld3BvcnRfcmVmO1xyXG4gICAgfS8vIGlmXHJcblxyXG5cclxuXHJcbiAgICBsZXQgdXNlX2hlaWdodCA9IChoYXNfZHluYW1pY19oZWlnaHQpID8gZHluYW1pY19oZWlnaHRbZHluYW1pY19oZWlnaHQubGVuZ3RoIC0gMV0gOiAoaXRlbUNvdW50ICogY2hpbGRIZWlnaHQpO1xyXG4gICAgY29uc3QgdG90YWxIZWlnaHQgPSB1c2VfaGVpZ2h0ICsgcGFkZGluZzsvLyBjYW4gaSBnaXZlIGl0IHBhZGRpbmc/XHJcbiAgICBjb25zdCB2aWV3cG9ydF9oZWlnaHQgPSBNYXRoLm1pbihoZWlnaHQsIHRvdGFsSGVpZ2h0KTsvLyh0b3RhbEhlaWdodCA8IGhlaWdodCkgPyB0b3RhbEhlaWdodCA6IGhlaWdodDtcclxuXHJcblxyXG4gICAgLy8gTWF0aC5mbG9vciBrZWVwcyB0aGUgZGVjaW1hbCBwbGFjZXMgb3V0IG9mIHRoZSBjYWxjdWxhdGlvblxyXG4gICAgLy8gd2hhdCBkb2VzIHN0YXJ0Tm9kZSBkbz9cclxuICAgIC8vIGxldCBzdGFydE5vZGUgPSBNYXRoLmZsb29yKHNjcm9sbFRvcCAvIGNoaWxkSGVpZ2h0KSAtIHJlbmRlckFoZWFkOy8vIGhvdyB3aWxsIGkgZG8gdGhpcyBkeW5hbWljYWxseT9cclxuICAgIC8vIHRoaXMgd2lsbCBiZSBteSBkeW5hbWljIHNldHVwXHJcbiAgICBsZXQgc3RhcnROb2RlID0gKGhhc19keW5hbWljX2hlaWdodCkgPyBkeW5hbWljX25vZGUgLSByZW5kZXJBaGVhZCA6IE1hdGguZmxvb3Ioc2Nyb2xsVG9wIC8gY2hpbGRIZWlnaHQpIC0gcmVuZGVyQWhlYWQ7XHJcblxyXG4gICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKXtcclxuICAgICAgbGV0IHRvb3YgPSAoaGFzX2R5bmFtaWNfaGVpZ2h0KSA/IGR5bmFtaWNfbm9kZSA6IE1hdGguZmxvb3Ioc2Nyb2xsVG9wIC8gY2hpbGRIZWlnaHQpO1xyXG4gICAgICBsZXQgc25fY2FsYyA9IFtcclxuICAgICAgICBgW3N0YXJ0Tm9kZV0gY2FsYyAxIFxcbiBgLFxyXG4gICAgICAgIGB0b3Agb3V0LW9mLXZpZXcgaW5kZXhlcyAgJHsoaGFzX2R5bmFtaWNfaGVpZ2h0KSA/IFwiXCIgOiBgPSBNYXRoLmZsb29yKHNjcm9sbFRvcCAoJHtzY3JvbGxUb3B9KSAvIGNoaWxkSGVpZ2h0ICgke2NoaWxkSGVpZ2h0fSkpYH0gPSAke3Rvb3Z9XFxuYCxcclxuICAgICAgICBgXFxudG9wIG91dC1vZi12aWV3IGluZGV4ZXMgKCR7dG9vdn0pIC0gcmVuZGVyQWhlYWQgKCR7cmVuZGVyQWhlYWR9KSA9IHN0YXJ0Tm9kZSAoJHtzdGFydE5vZGV9KWBcclxuICAgICAgXS5qb2luKFwiXCIpO1xyXG4gICAgICBjb25zb2xlLndhcm4oc25fY2FsYyk7XHJcbiAgICB9Ly8gaWZcclxuXHJcbiAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2Upe1xyXG4gICAgICBsZXQgdG9vdiA9IE1hdGguZmxvb3Ioc2Nyb2xsVG9wIC8gY2hpbGRIZWlnaHQpO1xyXG4gICAgICBsZXQgdmlzX25keCA9IHN0YXJ0Tm9kZSArIHJlbmRlckFoZWFkICsgMTtcclxuICAgICAgbGV0IHNuX3N0YXRzID0gW1xyXG4gICAgICAgIGBbc3RhcnROb2RlXSBzdGF0cyBcXG4gYCxcclxuICAgICAgICBgc3RhcnROb2RlID0gJHtzdGFydE5vZGV9ICR7c3RhcnROb2RlIDwgMCA/IGBvciAke01hdGgubWF4KDAsc3RhcnROb2RlIC0gMSl9YCA6IFwiXCJ9YCxcclxuICAgICAgICBgXFxuJHt0b292fSB0b3RhbCB0b3Agb3V0LW9mLXZpZXcgaW5kZXhlcyBcXG5gLFxyXG4gICAgICAgIGAke01hdGgubWF4KDAsc3RhcnROb2RlKX0gaW5kZXhlcyBub3QgYmVpbmcgcmVuZGVyZWRcXG5gLFxyXG4gICAgICAgIHN0YXJ0Tm9kZSAtIDEgPCAwID8gXCJcIiA6IChzdGFydE5vZGUgLSAxID09IDApID8gYGluZGV4IDAgbm90IGJlaW5nIHJlbmRlcmVkXFxuYCA6IGBpbmRleCAwIC0gJHtNYXRoLm1heCgwLHN0YXJ0Tm9kZSAtIDEpfSBub3QgYmVpbmcgcmVuZGVyZWRcXG5gLFxyXG4gICAgICAgIHN0YXJ0Tm9kZSA8IDAgPyBcIlwiIDogYGluZGV4ICR7c3RhcnROb2RlfSAtICR7KHN0YXJ0Tm9kZSArIHJlbmRlckFoZWFkKSAtIDF9IGJlaW5nIHRvcCByZW5kZXJlZCBhaGVhZFxcbmAsXHJcbiAgICAgICAgYHZpc2libGUgaW5kZXggPSAkeyhzdGFydE5vZGUgKyByZW5kZXJBaGVhZCArIDEpIC0gMX1cXG5gLFxyXG4gICAgICAgIGBpbmRleGVzICR7dmlzX25keCAtIDF9IC0gJHsodmlzX25keCAtIDEpICsgM30gYXJlIHBvdGVudGlhbGx5IHZpc2libGVcXG5gLFxyXG4gICAgICAgIGBcXG4obm90ZTogbW9yZSBhY2N1cmF0ZSBwYWRkaW5nIGNyZWF0ZXMgYSBtb3JlIGFjY3VyYXRlIHN0YXQgbGluZSlcXG5gXHJcbiAgICAgIF0uam9pbihcIlwiKTtcclxuICAgICAgY29uc29sZS5kZWJ1Zyhzbl9zdGF0cyk7XHJcbiAgICB9Ly8gaWZcclxuXHJcbiAgICBsZXQgdG9wTm9kZSA9IHN0YXJ0Tm9kZTsvL01hdGguZmxvb3Ioc2Nyb2xsVG9wIC8gY2hpbGRIZWlnaHQpO1xyXG4gICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmRlYnVnKFwiW3RvcE5vZGVdIGNhbGMgXCIsdG9wTm9kZSk7XHJcbiAgICAvKipcclxuICAgICAqIEBtZW1iZXIgc3RhcnROb2RlXHJcbiAgICAgKiBAZGVzY1xyXG4gICAgICogdGhpcyBtYXRoIG1heCBrZWVwcyB0aGUgZmlyc3QgeCAocmVuZGVyQWhlYWQgfHwgMjApIHNldCBhcyBhIHplcm8gKGluc3RlYWQgb2YgbmVnYXRpdmUgbmJycykgc3RhcnROb2RlIGJlY2F1c2UgdGhlcmUgaXNuJ3QgbW9yZSB0byBwdXQgb3ZlcmhlYWRcclxuICAgICAqIHRoYW4gdGhlIDIwIGluaXRpYWwgaXRlbXMuIG9uY2UgdGhlIChyZW5kZXJBaGVhZCB8fCAyMCkgZ2V0cyBvdmVyaGVhZCB0aGUgY291bnQgc3RhcnRzIHRvIG1vdmUuXHJcbiAgICAgKiBpZiByZW5kZXJBaGVhZCBoYXNuJ3QgYmVlbiByZWFjaGVkIHRoaXMgbnVtYmVyIGJ5IHN1YnJhY3RpbmcgcmVuZGVyQWhlYWQgY291bGQgYmVjb21lIGEgbmVnYXRpdmUgbnVtYmVyXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0Tm9kZSA9IE1hdGgubWF4KDAsIHN0YXJ0Tm9kZSk7XHJcbiAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoXCJbc3RhcnROb2RlXSBjYWxjIDJcIixzdGFydE5vZGUpO1xyXG5cclxuICAgIC8vIGNhbGN1bGF0ZXMgaG93IG1hbnkgbm9kZXMgY2FuIGZpdCBpbnRvIHRoZSB2aWV3cG9ydCArIGRvdWJsZXMgcmVuZGVyQWhlYWRcclxuICAgIC8vIGxldCB2aXNpYmxlTm9kZUNvdW50ID0gTWF0aC5jZWlsKHZpZXdwb3J0X2hlaWdodCAvIGNoaWxkSGVpZ2h0KSArIDIgKiByZW5kZXJBaGVhZDsvKiAzMDAgLyAzMCA9IDEwICsgMioyMCA9IDUwICovXHJcbiAgICBsZXQgdmlzaWJsZU5vZGVDb3VudCA9IChoYXNfZHluYW1pY19oZWlnaHQpID8gKGZpbmRfdmlzaWJsZSh7dmlld3BvcnRfaGVpZ2h0LCBkeW5hbWljX25vZGUsIGR5bmFtaWNfaGVpZ2h0fSkpICsgMiAqIHJlbmRlckFoZWFkIDpcclxuICAgIE1hdGguY2VpbCh2aWV3cG9ydF9oZWlnaHQgLyBjaGlsZEhlaWdodCkgKyAyICogcmVuZGVyQWhlYWQ7XHJcblxyXG4gICAgLy8gY29uc29sZS5sb2coXCJbdmlzaWJsZSBub2RlIGNvdW50XSBjYWxjIDFcIix2aXNpYmxlTm9kZUNvdW50KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBtZW1iZXIgdmlzaWJsZU5vZGVDb3VudFxyXG4gICAgICogQGRlc2NcclxuICAgICAqIHRoaXMgd2lsbCByZXR1cm4gdGhlIGxvd2VzdCBudW1iZXIgcGFzc2VkIHRvIGl0LiB3aGljaCBlZmZlY3RseSBtZWFucyB0aGF0IGl0IHdpbGwgc3RvcCB3aGVuIHRoZSBuYnJcclxuICAgICAqIHJlYWNoZXMgYSBjZXJ0YWluIGxpbWl0IChieSB0aGUgY2FsY3VsYXRpb24gY291bnRkb3duIHRoYXQgaXMgaGFwcGVuaW5nKS4gPGJyPlxyXG4gICAgICogd2hhdCBoYXBwZW5zIHdoZW4gdGhlIGNhbGN1bGF0aW9uIGNvdW50ZG93biBnb2VzIHVuZGVyIHRoZSBzZXQgbmJyPyA8YnI+XHJcbiAgICAgKiBldmVudHVhbGx5IHRoZSB2aXNpYmxlIG5vZGUgY291bnQgd2lsbCBmYWxsIGJlbG93IHRoZSBzdGFpYyBudW1iZXIsIGNvdXBsZWQgd2l0aCB0aGUgc3RhcnQgbm9kZVxyXG4gICAgICogaXQgd2lsbCBmb3JjZSBubyBtb3JlIG5vZGVzIHRvIGJlIGNyZWF0ZWRcclxuICAgICAqXHJcbiAgICAgKiBpZiBpdGVtQ291bnQgaXMgbGVzcyB0aGFuIHRoZSBzdGFydE5vZGUgbWF5YmUgdGhlIGRhdGEgaGFzIHN0YXJ0ZWQgb3Zlci4gZ28gd2l0aCB0aGUgbnVtYmVycyB3ZSBoYXZlLiAoZG8gd2UgcmVzZXQgdGhlIHNjcm9sbFRvcD8pXHJcbiAgICAgKi9cclxuICAgIHZpc2libGVOb2RlQ291bnQgPSAoaXRlbUNvdW50IDwgc3RhcnROb2RlKSA/IGl0ZW1Db3VudCA6IE1hdGgubWluKGl0ZW1Db3VudCAtIHN0YXJ0Tm9kZSwgdmlzaWJsZU5vZGVDb3VudCk7XHJcbiAgICBpZihpdGVtQ291bnQgPCBzdGFydE5vZGUpe1xyXG4gICAgICAvLyBwcm90ZWN0cyBhZ2FpbnMgcmVzdGFydGluZyB3aXRob3V0IHRoZSBwcm9wZXIgcmVzdGFydGluZyBwcm9jZXNzZXNcclxuICAgICAgLy8gdGhpcyBoYXBwZW5zIHdoZW4gaXRlbUNvdW50IGlzIGEgbmVnYXRpdmUgI1xyXG4gICAgICBzdGFydE5vZGUgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKGBbaXRlbUNvdW50ICR7aXRlbUNvdW50fSAtIHN0YXJ0Tm9kZSAke3N0YXJ0Tm9kZX1dYCxpdGVtQ291bnQgLSBzdGFydE5vZGUpO1xyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKFwiW3Zpc2libGUgbm9kZSBjb3VudF0gY2FsYyAyXCIsdmlzaWJsZU5vZGVDb3VudCk7XHJcblxyXG4gICAgLy8gY29uc3Qgb2Zmc2V0WSA9IHN0YXJ0Tm9kZSAqIGNoaWxkSGVpZ2h0Oy8vIHN0YXJ0Tm9kZS90b3BOb2RlIC8vIHByZSBkeW5hbWljIG9mZnNldFxyXG4gICAgLy8gaW4gZHluYW1pY19oZWlnaHQgdGhlIG9mZnNldCB3b3VsZCBiZSB0aGUgcHJvZ3Jlc3NpdmUgaW5jcmVhc2UgaW4gaGVpZ2h0IGFscmVhZHkgaW4gdGhlIGR5bmFtaWNfaGVpZ2h0IGFycmF5XHJcbiAgICBjb25zdCBvZmZzZXRZID0gKGhhc19keW5hbWljX2hlaWdodCkgPyBkeW5hbWljX2hlaWdodFtzdGFydE5vZGVdIDogc3RhcnROb2RlICogY2hpbGRIZWlnaHQ7Ly8gc3RhcnROb2RlL3RvcE5vZGVcclxuXHJcblxyXG4gICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmRlYnVnKGBbb2Zmc2V0WV0gc3RhcnROb2RlICR7c3RhcnROb2RlfSAqIGNoaWxkSGVpZ2h0ICR7Y2hpbGRIZWlnaHR9ID0gb2Zmc2V0WWAsb2Zmc2V0WSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgLy8gTk9URTogaW4gbW9zdCBjYXNlcyB0aGUgbGlzdF9kaXNwbGF5IGluIFZpZXdzIGlzbid0IGFjdGl2ZSB1bmxlc3MgdGhlIGxpc3QgaGFzIGRhdGEgKG5vIGVtcHR5KSBcclxuICAgICAgLy8gc28gdGhpcyB3aWxsIGJlIHNhZmUgdG8gcnVuIG9uY2UgYXQgdGhlIHN0YXJ0IGJlY2F1c2UgdGhlcmUgd2lsbCBiZSBhIHZhbHVlXHJcbiAgICAgIGlmIChza2lwX3Bvc2l0aW9uKSByZXR1cm47XHJcblxyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoYFtWaXJ0dWFsU2Nyb2xsXSBwb3NpdGlvbiA9IGAsIHBvc2l0aW9uKTtcclxuICAgICAgdmlld3BvcnRfcmVmLmN1cnJlbnQuc2Nyb2xsVG8oMCxwb3NpdGlvbik7Ly8gdGhpcyB3b3JrcyAob3RoZXJ3aXNlIGkgd291bGQgdXNlIGFuIGluaXQgYm9vbGVhbiBpbiBpdHMgb3duIHVzZUVmZmVjdClcclxuICAgIH0sW10pXHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgLy8gc3RhdHMgbm8gbG9uZ2VyIG5lZWRlZCwgaW0gbm8gbG9uZ2VyIHVzaW5nIHRoaXMgdG8gdHJpZ2dlciByZXN0b2NraW5nXHJcbiAgICAgIGlmKCFzdGF0cykgcmV0dXJuO1xyXG4gICAgICAvLyBjb25zb2xlLndhcm4oXCJbdmlld3BvcnRdIGluIHZpZXdwb3J0XCIsdmlld3BvcnRfaGVpZ2h0IC8gY2hpbGRIZWlnaHQpO1xyXG4gICAgICAvLyBjb25zb2xlLndhcm4oXCJbaGlkZGVuIGNvdW50XVwiLDIgKiByZW5kZXJBaGVhZCk7XHJcbiAgICAgIGxldCB2aF9zdHIgPSAgW2BbdmlzaWJsZSBub2RlIGNvdW50XSBjYWxjIFxcbmAsXHJcbiAgICAgIGAgXFxuIHZpZXdwb3J0X2hlaWdodCAoJHt2aWV3cG9ydF9oZWlnaHR9KSAvIGAsXHJcbiAgICAgICAgYGNoaWxkSGVpZ2h0ICgke2NoaWxkSGVpZ2h0fSkpICsgMiAqIHJlbmRlckFoZWFkICgke3JlbmRlckFoZWFkfSkgPSBgLFxyXG4gICAgICAgIGAke01hdGguY2VpbCh2aWV3cG9ydF9oZWlnaHQgLyBjaGlsZEhlaWdodCkgKyAyICogcmVuZGVyQWhlYWR9IFxcbiBvciBcXG4gYCxcclxuICAgICAgICBgaXRlbUNvdW50ICgke2l0ZW1Db3VudH0pIC0gc3RhcnROb2RlL3RvcE5vZGUgKCR7c3RhcnROb2RlfSkgPSAke2l0ZW1Db3VudCAtIHN0YXJ0Tm9kZX0gKHBvc3NpYmxlIHJlbWFpbmluZyBub2RlcykgXFxuYCxcclxuICAgICAgICBgXFxuIGFjdHVhbCB2aXNpYmxlIG5vZGUgY291bnQgPSAke3Zpc2libGVOb2RlQ291bnR9ICh0aGUgbWluICMpXFxuIGAsXHJcbiAgICAgICAgYCgjIG5lZWRzIHRvIGJlIGJlbG93IGZpcnN0IHJlbmRlciAjKSBcXG5gLFxyXG4gICAgICAgIGBcXG4gYWZ0ZXIgc2Nyb2xsdG9wIHJlYWNoZXMgdGhlIGhlaWdodCBvZiAke3JlbmRlckFoZWFkfSAocmVuZGVyQWhlYWQpIGl0ZW1zLGAsXHJcbiAgICAgICAgYCBcXG4gdGhlIHN0YXJ0Tm9kZS90b3BOb2RlIGluZGV4ICgke3N0YXJ0Tm9kZX0pIHdpbGwgY2hhbmdlIGFuZCBpdGVtcyB3aWxsIHN0YXJ0IHRvIGJlIHJlbW92ZWQgXFxuYCxcclxuICAgICAgICBdLmpvaW4oXCJcIik7XHJcbiAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1Zyh2aF9zdHIpO1xyXG4gICAgICBsZXQgZlJlbmRlciA9IFtgW2ZpcnN0IHJlbmRlcl0gJHtpdGVtQ291bnQgLSByZW5kZXJBaGVhZH1gLFxyXG4gICAgICBgIHJlbmRlciBhaGVhZCBieSAke3JlbmRlckFoZWFkfSBgLFxyXG4gICAgICBgIFxcbiAob2JzZXJ2ZXIgdHJpZ2dlcnMgYXQgdGhpcyBpbmRleClgXS5qb2luKFwiXCIpO1xyXG4gICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihmUmVuZGVyKTtcclxuICAgICAgaWYoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLndhcm4oXCJbdlNjcm9sbF0gdmlld3BvcnQgcmVmID0gXCIsdmlld3BvcnRfcmVmLmN1cnJlbnQpO1xyXG4gICAgICAvLyBpIHdhbnQgdG8gc2V0IHRoaXMgdG8gYSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgLy8gZ2V0IHRoZSBzY3JvbGwgdG9wXHJcbiAgICB9LFtdKTsgLy8gdG8gc2VlIHN0YXRzLCBjaGFuZ2Ugc3RhdCB2YXIgdG8gdHJ1ZSBhbmQgcmVtb3ZlIHRoZSB1c2VFZmZlY3QgZW1wdHkgYXJyYXkgLFtdIGFuZCBjaGFuZ2UgZGlzcGxheV9jb25zb2xlIHRvIHRydWVcclxuXHJcbiAgICAvLyB1c2VFZmZlY3QoKHBhcmFtcykgPT4ge1xyXG4gICAgLy8gICBpZiAoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmRlYnVnKCdbVmlydHVhbFNjcm9sbF0gVUVGIHJlbmRlcl9uYnInLCByZW5kZXJfbmJyKTtcclxuICAgIC8vIH0pXHJcblxyXG4gICAgLy8gR09UQ0hBOiBFcnJvciAtIFZpcnR1YWxTY3JvbGwuanMgVW5jYXVnaHQgUmFuZ2VFcnJvcjogSW52YWxpZCBhcnJheSBsZW5ndGhcclxuICAgIC8vIGltIGdvaW5nIHRvIHRyeSB0byBmaXggdGhpcyBlcnJvci5cclxuXHJcbiAgICBpZih2aXNpYmxlTm9kZUNvdW50IDwgMSB8fCBpc05hTih2aXNpYmxlTm9kZUNvdW50KSl7XHJcbiAgICAgIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS53YXJuKCdbVmlydHVhbFNjcm9sbF0gV0FSTklORzogdmlzaWJsZU5vZGVDb3VudC5sZW5ndGgnLHZpc2libGVOb2RlQ291bnQpO1xyXG4gICAgICAvLyByZXR1cm4gbnVsbDtcclxuICAgICAgdmlzaWJsZU5vZGVDb3VudCA9IDA7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG1lbWJlciB2aXNpYmxlQ2hpbGRyZW5cclxuICAgICAqIEBkZXNjXHJcbiAgICAgKiB3aHkgdXNlIG1lbW8gaGVyZT8gLSBvaCB5ZWFoLCB0aGlzIHdpbGwgb25seSBjaGFuZ2Ugd2hlbiB0aGUgcHJvcGVydGllcyBpbiB0aGUgYXJyYXkgYmVsb3cgY2hhbmdlIDxicj5cclxuICAgICAqIGl0ZW0gY2hhbmdlcyB3aGVuIGl0cyBpbmRleCBjaGFuZ2VzLiBpdHMgaW5kZXggcHJvcGVydHkgY2hhbmdlcyBpZiBpdHMgaW5kZXggaXMgY2hhbmdlZCBpdHMgYWxyaWdodFxyXG4gICAgICogZm9yIGl0IHRvIGJlIGNoYW5nZWQgaGVyZSAtIGkgdGhpbmsgaXQgd2lsbCBiZSBkaXNnYXJkZWQgaSBkb24ndCB0aGluayBpdCBpcyByZXVzZWQgYW5kIHNlbnQgdG8gdG9wL2JvdHRvbVxyXG4gICAgICovXHJcbiAgICBjb25zdCB2aXNpYmxlQ2hpbGRyZW4gPSBSZWFjdC51c2VNZW1vKFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoYFtWaXJ0dWFsU2Nyb2xsXSB2aXNpYmxlTm9kZUNvdW50YCx2aXNpYmxlTm9kZUNvdW50KTtcclxuICAgICAgICAgIHJldHVybiBuZXcgQXJyYXkodmlzaWJsZU5vZGVDb3VudClcclxuICAgICAgICAgICAgLmZpbGwobnVsbClcclxuICAgICAgICAgICAgLm1hcCgoXywgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAvLyBkbyBzb21ldGhpbmdcclxuICAgICAgICAgICAgICAvLyB0aGUgc3RhcnROb2RlIGlzIHRoZSAxc3QgaW5kZXggdGhhdCBzaG91bGQgYmUgdmlzaWJseSByZW5kZXJlZCAtIHNjcm9sbFRvcCBuZHggLSByZW5kZXJhaGVhZFxyXG4gICAgICAgICAgICAgIC8vIHRoZSB0cnVfbmR4IGlzIHRoZSBhY3R1YWwgaW5kZXggdG8gcmVuZGVyIGNvdW50ZWQgZnJvbSB0aGUgXCJzdGFydE5vZGVcIiBpbmRleFxyXG4gICAgICAgICAgICAgIGxldCB0cnVfbmR4ID0gaW5kZXggKyBzdGFydE5vZGU7XHJcbiAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKFwiW21hcF0gaW5kZXhcIixpbmRleCk7XHJcbiAgICAgICAgICAgICAgLy8gaWYgKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZyhgW21hcF0gaW5kZXggKCR7aW5kZXh9KSBzdGFydE5vZGUgKCR7c3RhcnROb2RlfSkgIHRydV9pbmRleGAsdHJ1X25keCk7XHJcbiAgICAgICAgICAgICAgaWYgKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZyhgW21hcF0gdHJ1X2luZGV4YCwgdHJ1X25keCk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHdoaWxlIHNjcm9sbGluZyB0aGUgdHJ1X25keCBzdGF5cyB0aGUgc2FtZSB1bnRpbCBpdCBlYXRzIHVwIHRoZSByZW5kZXIgYWhlYWQgZGlzdGFuY2VcclxuXHJcbiAgICAgICAgICAgICAgLy8gaWYocmVzdG9jayAmJiB0cnVfbmR4ID4gaXRlbUNvdW50IC0gcmVuZGVyQWhlYWQgJiYgdHJ1X25keCA+IGxhc3RfcmVxdWVzdF9zZWN0aW9uLmN1cnJlbnQpe1xyXG4gICAgICAgICAgICAgIC8vICAgLy8gcnVuIHRoaXMgcmVxdWVzdCBvbmNlIHBlciBzZWN0aW9uXHJcbiAgICAgICAgICAgICAgLy8gICBsYXN0X3JlcXVlc3Rfc2VjdGlvbi5jdXJyZW50ID0gaXRlbUNvdW50O1xyXG4gICAgICAgICAgICAgIC8vICAgLy8gY29uc29sZS53YXJuKGBbcmVuZGVyZWQgYXRdIGl0ZW1Db3VudCAke2l0ZW1Db3VudH0gLSByZW5kZXJBaGVhZCAke3JlbmRlckFoZWFkfWAsIGl0ZW1Db3VudCAtIHJlbmRlckFoZWFkKTtcclxuICAgICAgICAgICAgICAvLyAgIC8vIGNvbnNvbGUud2FybihcInJ1bm5pbmcgbW9jayByZXF1ZXN0IGNhbGxvdXRcIik7XHJcbiAgICAgICAgICAgICAgLy8gICAvLyBjb25zb2xlLndhcm4oXCJbdmlzaWJsZUNoaWxkcmVuXSBpdGVtQ291bnRcIixpdGVtQ291bnQpO1xyXG4gICAgICAgICAgICAgIC8vICAgcmVzdG9jaygpO1xyXG4gICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICByZXR1cm4oXHJcbiAgICAgICAgICAgICAgICA8SXRlbSBrZXk9e3RydV9uZHh9IGluZGV4PXt0cnVfbmR4fSAvPlxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgW3N0YXJ0Tm9kZSwgdmlzaWJsZU5vZGVDb3VudCwgSXRlbV1cclxuXHJcbiAgICApO1xyXG4gICAgLy8ga2VlcCByZXNlYXJjaGluZyB0aGUgYmVoaW5kIHRoZSBzY2VuZXMgdG8gdGhlIG1hZ2ljIG9yIGRvbS1yZWN5Y2xpbmcgJ3N1cHBvc2VkbHknIGJlaW5nIHVzZWQgaGVyZVxyXG4gICAgLy8gKG15IGFzc3VtcHRpb24sIG1heWJlIGl0IGlzbid0KVxyXG5cclxuICAgIGxldCBwdWxseSA9IG51bGw7XHJcblxyXG4gICAgaWYodHlwZW9mIHJlZnJlc2ggIT0gXCJ1bmRlZmluZWRcIil7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAdmFyIHB1bGx5LWRhdGFcclxuICAgICAgICogQGRlc2MgcHVsbHkgZGF0YSBvYmplY3RcclxuICAgICAgICogQHByb3Age29iamVjdH0gY29udGFpbmVyIHVzZVJlZlxyXG4gICAgICAgKiBAcHJvcCB7Y2FsbGJhY2t9IHJlZnJlc2ggcmVmcmVzaCBjYWxsYmFja1xyXG4gICAgICAgKiBAcmVxdWlyZXMgUHVsbHlcclxuICAgICAgICogQHNlZSBbUmVhY3RMaXN0SXRlbXNde0BsaW5rIG1vZHVsZTpSZWFjdExpc3RJdGVtc35yZWZyZXNoX2JpbmRlcn1cclxuICAgICAgICogQHNlZSBbQXJjIGljb25XYWxsX2NhbGxiYWNrXXtAbGluayBtb2R1bGU6QXJjfmljb25XYWxsX2NhbGxiYWNrfVxyXG4gICAgICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAgICAgKi9cclxuICAgICAgbGV0IHB1bGx5X2RhdGEgPSB7Y29udGFpbmVyOiB2aWV3cG9ydF9yZWYsIHJlZnJlc2h9O1xyXG5cclxuICAgICAgcHVsbHkgPSA8UHVsbHkgZGF0YT17cHVsbHlfZGF0YX0vPlxyXG4gICAgfVxyXG5cclxuICAgIGxldCBsb2FkZXJfZGlzcGxheSA9IChcclxuICAgICAgPExvYWRlciBuYW1lPXtuYW1lfSBwcmVmaXg9e3ByZWZpeH0gaVVOPXtpVU59IHJlZj17b2JzZXJ2ZXJ9IHR5cGU9e1wiZG90c1wifVxyXG4gICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICBpZiAoZGlzcGxheV9jb25zb2xlIHx8IHRydWUpIGNvbnNvbGUud2FybihcIltWaXJ0dWFsU2Nyb2xsXSBMb2FkZXIgY2xpY2tlZCFcIik7XHJcbiAgICAgICAgICBvYnNlcnZlcihlLnRhcmdldCx0cnVlKTtcclxuICAgICAgfX1cclxuICAgICAgZGF0YS1vYnNlcnZlcj1cImxvYWRlclwiIHZhcmlhbnRzPVwidlNjcm9sbDJcIiAvPlxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBmb3JjZV9zY3JvbGwgPSAoYm90UG9zKSA9PiB7XHJcbiAgICAgIGxldCBuZXdfc2Nyb2xsX3RvcCA9IHZpZXdwb3J0X3JlZi5jdXJyZW50LnNjcm9sbEhlaWdodCAtIGJvdFBvcztcclxuICAgICAgaWYgKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZyhcIltWaXJ0dWFsU2Nyb2xsXSBuZXdfc2Nyb2xsX3RvcFwiLCBuZXdfc2Nyb2xsX3RvcCk7XHJcbiAgICAgIHZpZXdwb3J0X3JlZi5jdXJyZW50LnNjcm9sbFRvKDAsIG5ld19zY3JvbGxfdG9wKTtcclxuICAgIH0vLyBmb3JjZV9zY3JvbGxcclxuXHJcbiAgICBkYXRhX3JlZi5mb3JjZV9zY3JvbGwgPSBmb3JjZV9zY3JvbGw7XHJcbiAgICBkYXRhX3JlZi5nZXRTY3JvbGxCb3R0b20gPSBnZXRTY3JvbGxCb3R0b207XHJcblxyXG5cclxuICAgIGlmIChkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUud2FybihcIltWaXJ0dWFsU2Nyb2xsXSByZXJlbmRlcmluZy4uLlwiKTtcclxuXHJcbiAgICAvLyBpZiAoZGlzcGxheV9jb25zb2xlIHx8IGZhbHNlKSBjb25zb2xlLmRlYnVnKCdbVmlydHVhbFNjcm9sbF0gUk5EUiByZW5kZXJfbmJyJywgcmVuZGVyX25icik7XHJcblxyXG4gICAgLy8gaWYoKGRpc3BsYXlfY29uc29sZSB8fCB0cnVlKSAmJiBoYXNfZHluYW1pY19oZWlnaHQpIGNvbnNvbGUud2FybihgW1ZpcnR1YWxTY3JvbGxdIGR5bmFtaWNfaGVpZ2h0ID0gYCwgZHluYW1pY19oZWlnaHQpO1xyXG4gICAgLy8gaWYoKGRpc3BsYXlfY29uc29sZSB8fCB0cnVlKSAmJiBoYXNfZHluYW1pY19oZWlnaHQpIGNvbnNvbGUud2FybihgW1ZpcnR1YWxTY3JvbGxdIHRvdGFsSGVpZ2h0ID0gYCwgdG90YWxIZWlnaHQpO1xyXG4gICAgLy8gaG93IGRvZXMgaXQga25vdyB0byBtb3ZlIHRoZSBpdGVtIHRvIHRoZSBib3R0b20/XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICB7cHVsbHl9XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtjbGFzc19tYWtlcih7cHJlZml4LG5hbWUsbWFpbjpcInZpZXdwb3J0XCIsaVVOfSl9IFZpcnR1YWxTY3JvbGwgJHtoaWRlU2Nyb2xsfSBgfVxyXG4gICAgICAgIHN0eWxlPXt7IGhlaWdodCwgb3ZlcmZsb3c6IFwiYXV0b1wiIH19XHJcbiAgICAgICAgZGF0YS1jb21wPXtgVmlydHVhbFNjcm9sbGB9XHJcbiAgICAgICAgcmVmPXt2aWV3cG9ydF9yZWZ9PlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NfbWFrZXIoe3ByZWZpeCxuYW1lLG1haW46XCJ2aXNpYmxlX2FyZWFcIixpVU59KS8qdGhlIGZvcm1lciB2aWV3cG9ydCovfVxyXG4gICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgIHdpbGxDaGFuZ2U6IFwidHJhbnNmb3JtXCIsXHJcbiAgICAgICAgICAgIGhlaWdodDogdG90YWxIZWlnaHQsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXHJcbiAgICAgICAgICAgIG1pbkhlaWdodDogaGVpZ2h0XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc19tYWtlcih7cHJlZml4LG5hbWUsbWFpbjpcImlubmVyX2NvbnRlbnRcIixpVU59KX1cclxuICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICB3aWxsQ2hhbmdlOiBcInRyYW5zZm9ybVwiLFxyXG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoJHtvZmZzZXRZfXB4KWBcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgeyAoaGFzX21vcmUgJiYgc2hvd19sb2FkZXIgJiYgZGlyID09IFwicmV2ZXJzZVwiKSA/IGxvYWRlcl9kaXNwbGF5OiBudWxsIH1cclxuICAgICAgICAgICAge3Zpc2libGVDaGlsZHJlbn1cclxuICAgICAgICAgICAgeyAoaGFzX21vcmUgJiYgc2hvd19sb2FkZXIgJiYgZGlyID09IFwiZm9yd2FyZFwiKSA/IGxvYWRlcl9kaXNwbGF5OiBudWxsIH1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPC8+XHJcbiAgICApO1xyXG4gIH0pO1xyXG4gIC8vIH07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWaXJ0dWFsU2Nyb2xsO1xyXG5cclxuY29uc3QgZmluZF92aXNpYmxlID0gKHt2aWV3cG9ydF9oZWlnaHQsIGR5bmFtaWNfbm9kZSwgZHluYW1pY19oZWlnaHR9KSA9PiB7XHJcbiAgbGV0IGl0ZXJhdG9yID0gMDtcclxuICBsZXQgbm9kZV9oZWlnaHQgPSAwO1xyXG4gIGxldCBuZHggPSAxO1xyXG4gIGxldCBzdGF0aWNfdmFsdWUgPSBkeW5hbWljX2hlaWdodFtkeW5hbWljX25vZGVdOy8vIHRoZSBoZWlnaHQgYXQgdGhlIHBvc2l0aW9uIHdlIGFyZSBhdFxyXG5cclxuICAvLyB3aGF0IGlmIHdlcmUgYXQgdGhlIGVuZCBvZiB0aGUgZHluYW1pY19oZWlnaHQgYXJyYXk/XHJcbiAgd2hpbGUgKG5vZGVfaGVpZ2h0IDwgdmlld3BvcnRfaGVpZ2h0ICYmIGR5bmFtaWNfbm9kZSArIG5keCA8IGR5bmFtaWNfaGVpZ2h0Lmxlbmd0aCAmJiBpdGVyYXRvciA8PSA1MCkge1xyXG4gICAgLy8gdGhpcyB0YWtlcyB0aGUgdG9wIHZpc2libGUgbm9kZSBhbmQgc3RhcnRzIGFkZGluZyBpbmRleGVzIGFuZCBhZGRpbmcgdGhlIGhlaWdodCBvZiB0aGF0IGluZGV4IHVudGlsIHRoZSBcclxuICAgIC8vIHZpZXdwb3J0IGlzIGhlaWdodCBpcyByZWFjaGVkXHJcbiAgICBub2RlX2hlaWdodCA9IGR5bmFtaWNfaGVpZ2h0W2R5bmFtaWNfbm9kZSArIG5keF0gLSBzdGF0aWNfdmFsdWU7XHJcbiAgICBpZihkaXNwbGF5X2NvbnNvbGUgfHwgZmFsc2UpIGNvbnNvbGUuZGVidWcoYFtWaXJ0dWFsU2Nyb2xsXSBmaW5kX3Zpc2libGUgXFxuIHZpZXdwb3J0X2hlaWdodCA9ICR7dmlld3BvcnRfaGVpZ2h0fSBcXG5ub2RlX2hlaWdodCA9ICR7bm9kZV9oZWlnaHR9YCk7XHJcbiAgICBuZHgrKztcclxuICAgIGl0ZXJhdG9yKys7XHJcbiAgfS8vIHdoaWxlXHJcblxyXG4gIGlmKGl0ZXJhdG9yID4gNTApe2NvbnNvbGUuZXJyb3IoYFtWaXJ0dWFsU2Nyb2xsXSBmaW5kX3Zpc2libGUgaXRlcmF0b3Igc2F2ZXMgYW4gaW5maW5pdGUgbG9vcGApO31cclxuXHJcbiAgbGV0IHZpc2libGVfbm9kZXMgPSBuZHggLSAxO1xyXG4gIGlmKGRpc3BsYXlfY29uc29sZSB8fCBmYWxzZSkgY29uc29sZS5kZWJ1ZyhgW1ZpcnR1YWxTY3JvbGxdIGZpbmRfdmlzaWJsZSBzdGFydCA9ICR7ZHluYW1pY19ub2RlfSB2aXNpYmxlIG5vZGVzID0gJHt2aXNpYmxlX25vZGVzfWApO1xyXG4gIHJldHVybiB2aXNpYmxlX25vZGVzO1xyXG59Ly8gZmluZF92aXNpYmxlXHJcblxyXG5jb25zdCBnZXRTY3JvbGxCb3R0b20gPSAoZWwsIG9taXRfdmlld3BvcnQgPSBmYWxzZSkgPT4ge1xyXG4gIGxldCBzVCA9IGVsLnNjcm9sbFRvcDtcclxuICBsZXQgc0ggPSBlbC5zY3JvbGxIZWlnaHQ7XHJcbiAgbGV0IHZwaCA9IG9taXRfdmlld3BvcnQgPyAwIDogZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG5cclxuICBsZXQgc0IgPSBzSCAtIChzVCArIHZwaCk7XHJcblxyXG4gIHJldHVybiBzQi50b0ZpeGVkKCk7XHJcbn0vLyBnZXRTY3JvbGxCb3R0b21cclxuXHJcblxyXG4gIC8qXHJcbiAgLy8gW2FydGljbGUgYnVpbGQgeW91ciBvd24gdmlydHVhbCBzY3JvbGxlcl0oaHR0cHM6Ly9kZXYudG8vYWRhbWtsZWluL2J1aWxkLXlvdXItb3duLXZpcnR1YWwtc2Nyb2xsLXBhcnQtaS0xMWliKVxyXG4gIC8vIFtjb2RlIHNhbmRib3hdKGh0dHBzOi8vY29kZXNhbmRib3guaW8vcy8yMTRwMTkxMXluP2Zyb20tZW1iZWQ9JmZpbGU9L3NyYy9WaXJ0dWFsU2Nyb2xsLmpzKVxyXG4gIC8vIHdyYXAgdGhlIGl0ZW0gdGVtcGxhdGUgaW4gYSBtZW1vIGZuLCBpIHdhbnQgdG8gZG8gc29tZSB0aGluZ3MgYmVmb3JlIGkgYWRkIHRoZSBkYXRhIHRvIHRoZSBlbGVtZW50c1xyXG4gIGNvbnN0IEl0ZW0gPSBSZWFjdC5tZW1vKCh7IGluZGV4IH0pID0+IChcclxuICAgIDxkaXZcclxuICAgICAgc3R5bGU9e3tcclxuICAgICAgICBoZWlnaHQ6IDMwLFxyXG4gICAgICAgIGxpbmVIZWlnaHQ6IFwiMzBweFwiLFxyXG4gICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxyXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiBcInNwYWNlLWJldHdlZW5cIixcclxuICAgICAgICBwYWRkaW5nOiBcIjAgMTBweFwiXHJcbiAgICAgIH19XHJcbiAgICAgIGNsYXNzTmFtZT1cInJvd1wiXHJcbiAgICAgIGtleT17aW5kZXh9XHJcbiAgICA+XHJcbiAgICAgIDxpbWdcclxuICAgICAgICBhbHQ9e2luZGV4fVxyXG4gICAgICAgIHNyYz17YGh0dHA6Ly9sb3JlbXBpeGVsLmNvbS8zMC8zMC9hbmltYWxzLyR7KGluZGV4ICUgMTApICsgMX1gfVxyXG4gICAgICAvPlxyXG4gICAgICByb3cgaW5kZXgge2luZGV4fVxyXG4gICAgPC9kaXY+XHJcbiAgKSk7XHJcblxyXG4gIGNvbnN0IEFwcCA9ICgpID0+IHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiQXBwXCI+XHJcbiAgICAgICAgPGgxPlZpcnR1YWwgU2Nyb2xsPC9oMT5cclxuICAgICAgICA8VmlydHVhbFNjcm9sbFxyXG4gICAgICAgICAgaXRlbUNvdW50PXsxMDB9XHJcbiAgICAgICAgICBoZWlnaHQ9ezMwMH1cclxuICAgICAgICAgIGNoaWxkSGVpZ2h0PXszMH1cclxuICAgICAgICAgIEl0ZW09e0l0ZW19XHJcbiAgICAgICAgLz5cclxuICAgICAgICA8aHIgLz5cclxuICAgICAgICA8aDE+SG9va3MgYXJlIGF3ZXNvbWUhPC9oMT5cclxuICAgICAgICA8YVxyXG4gICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXHJcbiAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICAgICAgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS81MDB0ZWNoL2hvb2stY29vay1ib29rXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICBFeHBsb3JlIG1vcmUgZXhhbXBsZXNcclxuICAgICAgICA8L2E+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIFJlYWN0RE9NLnJlbmRlcihcclxuICA8QXBwIC8+LFxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb290JylcclxuICApO1xyXG5cclxuICAvL3NhbXBsZSBjb21wb25lbnQgc2V0dXBcclxuICA8VmlydHVhbFNjcm9sbFxyXG4gICAgaXRlbUNvdW50PXsxMDB9XHJcbiAgICBoZWlnaHQ9ezMwMH1cclxuICAgIGNoaWxkSGVpZ2h0PXszMH1cclxuICAgIEl0ZW09e0l0ZW19XHJcbiAgLz5cclxuKi9cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBaERBO0FBQ0E7QUFpREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUEyQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFVQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUZBO0FBV0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQWVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/VirtualScroll/VirtualScroll.js\n");

/***/ }),

/***/ "./js/components/Narrator/components/VirtualScroll/VirtualScroll.scss":
/*!****************************************************************************!*\
  !*** ./js/components/Narrator/components/VirtualScroll/VirtualScroll.scss ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVmlydHVhbFNjcm9sbC9WaXJ0dWFsU2Nyb2xsLnNjc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVmlydHVhbFNjcm9sbC9WaXJ0dWFsU2Nyb2xsLnNjc3M/ZDFmNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/VirtualScroll/VirtualScroll.scss\n");

/***/ }),

/***/ "./js/components/Narrator/components/VirtualScroll/observer.js":
/*!*********************************************************************!*\
  !*** ./js/components/Narrator/components/VirtualScroll/observer.js ***!
  \*********************************************************************/
/*! exports provided: observerSetupCallback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"observerSetupCallback\", function() { return observerSetupCallback; });\nvar _require = __webpack_require__(/*! ../../tools/exists */ \"./js/components/Narrator/tools/exists.js\"),\n    exists = _require.exists,\n    obj_exists = _require.obj_exists;\n\nvar observerSetupCallback = function observerSetupCallback(_ref) {\n  var node = _ref.node,\n      observer = _ref.observer,\n      has_more = _ref.has_more,\n      childHeight = _ref.childHeight,\n      renderAhead = _ref.renderAhead,\n      restock = _ref.restock,\n      rtMarg = _ref.rootMargin,\n      last_rootMargin = _ref.last_rootMargin,\n      nxt_res = _ref.next_restock,\n      lst_res = _ref.last_restock;\n\n  var _this = this;\n\n  var root_viewport,\n      next_restock = nxt_res,\n      last_restock = lst_res; // if its the same as the renderahead it will constantly render - it needs to be when the list is depleating and there are no more elemnts to add\n\n  var rootMargin = exists(rtMarg) ? rtMarg : Math.max(0, childHeight * (renderAhead - 2));\n  if (node) root_viewport = node.parentNode.parentNode.parentNode; // fix for issue of observer's root not being the exact same as the once currently available and visible onscreen\n\n  var same_root = obj_exists(observer, \"current.root\") && observer.current.root == root_viewport ? true : false;\n  var has_last_margin = exists(last_rootMargin.current) ? true : false; // this.setState({loading: true});// loading causes an extra render\n  // // console.warn(node);\n  // if(this.state.loading == true) return;// if loading do nothing\n  // if(this.observer.current) this.observer.current.disconnect();\n  // !obj_exists(observer,\"current.root\") fix for .root == null\n\n  if (!exists(observer.current) || !obj_exists(observer, \"current.root\") || !same_root\n  /*||  has_last_margin && rootMargin != last_rootMargin.current*/\n  ) {\n    // i only need one observer\n    // this.root_viewport.current = document.querySelector(`.arc_scroll_viewport_${this.state.iUN}`);\n    // if(this.observer.current) this.observer.current.disconnect();\n    last_rootMargin.current = rootMargin; // helps dynamic resizing\n\n    observer.current = new IntersectionObserver(function (entries) {\n      var node_id = entries[0].target.dataset.observer ? entries[0].target.dataset.observer : Number(entries[0].target.dataset.ndx); //otherwise make sure its not a string\n      // let next_restock = next_restock.current;\n      // let last_restock = last_restock.current;\n      // this.last_restock.current = node_id;\n\n      if (entries[0].isIntersecting && (!isNaN(node_id) && node_id == next_restock.current || isNaN(node_id) && node_id == \"loader\") && has_more) {\n        // console.warn(`[observer] entry is intersecting`,entries[0].target);\n        // // console.warn(\"visible\");\n        // this.fetch_info();\n        // fetch_me();\n        restock().then(function () {// console.warn(\"[observer] setting restock current\");\n        });\n      } else if (!isNaN(node_id) && node_id <= last_restock.current) {// this ends almost immediately after the last_restock is set because the observer is constantly checking.\n        // console.warn(`[observer] ending observation`,entries[0].target);\n        // observer.current.unobserve(entries[0].target);\n      } // console.warn(`[observer] intersectionRatio ${entries[0].intersectionRatio}`);\n\n    }, {\n      rootMargin: \"\".concat(rootMargin, \"px\"),\n      root: root_viewport\n    }); // this.observer_init.current = true;\n  }\n\n  if (node && has_more) {\n    observer.current.observe(node);\n    if (exists(node.dataset.ndx)) next_restock.current = Number(node.dataset.ndx);\n  } // let last_restock = this.last_restock.current || 0;\n  // if(node)\n\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2NvbXBvbmVudHMvVmlydHVhbFNjcm9sbC9vYnNlcnZlci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvY29tcG9uZW50cy9WaXJ0dWFsU2Nyb2xsL29ic2VydmVyLmpzPzU1ZDciXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge2V4aXN0cywgb2JqX2V4aXN0c30gPSByZXF1aXJlKCcuLi8uLi90b29scy9leGlzdHMnKTtcclxuXHJcbiAgZXhwb3J0IGNvbnN0IG9ic2VydmVyU2V0dXBDYWxsYmFjayA9IGZ1bmN0aW9uKFxyXG4gICAge1xyXG4gICAgICBub2RlLFxyXG4gICAgICBvYnNlcnZlcixcclxuICAgICAgaGFzX21vcmUsXHJcbiAgICAgIGNoaWxkSGVpZ2h0LFxyXG4gICAgICByZW5kZXJBaGVhZCxcclxuICAgICAgcmVzdG9jayxcclxuICAgICAgcm9vdE1hcmdpbjogcnRNYXJnLFxyXG4gICAgICBsYXN0X3Jvb3RNYXJnaW4sXHJcbiAgICAgIG5leHRfcmVzdG9jayA6IG54dF9yZXMsXHJcbiAgICAgIGxhc3RfcmVzdG9jayA6IGxzdF9yZXNcclxuICAgIH1cclxuICApe1xyXG5cclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBsZXQgcm9vdF92aWV3cG9ydCxcclxuICAgIG5leHRfcmVzdG9jayA9IG54dF9yZXMsXHJcbiAgICBsYXN0X3Jlc3RvY2sgPSBsc3RfcmVzO1xyXG4gICAgLy8gaWYgaXRzIHRoZSBzYW1lIGFzIHRoZSByZW5kZXJhaGVhZCBpdCB3aWxsIGNvbnN0YW50bHkgcmVuZGVyIC0gaXQgbmVlZHMgdG8gYmUgd2hlbiB0aGUgbGlzdCBpcyBkZXBsZWF0aW5nIGFuZCB0aGVyZSBhcmUgbm8gbW9yZSBlbGVtbnRzIHRvIGFkZFxyXG4gICAgbGV0IHJvb3RNYXJnaW4gPSAoZXhpc3RzKHJ0TWFyZykpID8gcnRNYXJnIDogTWF0aC5tYXgoMCwgY2hpbGRIZWlnaHQgKiAocmVuZGVyQWhlYWQgLSAyKSk7XHJcblxyXG4gICAgaWYobm9kZSkgcm9vdF92aWV3cG9ydCA9IG5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7XHJcblxyXG4gICAgLy8gZml4IGZvciBpc3N1ZSBvZiBvYnNlcnZlcidzIHJvb3Qgbm90IGJlaW5nIHRoZSBleGFjdCBzYW1lIGFzIHRoZSBvbmNlIGN1cnJlbnRseSBhdmFpbGFibGUgYW5kIHZpc2libGUgb25zY3JlZW5cclxuICAgIGxldCBzYW1lX3Jvb3QgPSBvYmpfZXhpc3RzKG9ic2VydmVyLFwiY3VycmVudC5yb290XCIpICYmIG9ic2VydmVyLmN1cnJlbnQucm9vdCA9PSByb290X3ZpZXdwb3J0ID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgIGxldCBoYXNfbGFzdF9tYXJnaW4gPSAoZXhpc3RzKGxhc3Rfcm9vdE1hcmdpbi5jdXJyZW50KSkgPyB0cnVlIDogZmFsc2U7XHJcblxyXG5cclxuICAgIC8vIHRoaXMuc2V0U3RhdGUoe2xvYWRpbmc6IHRydWV9KTsvLyBsb2FkaW5nIGNhdXNlcyBhbiBleHRyYSByZW5kZXJcclxuXHJcbiAgICAvLyAvLyBjb25zb2xlLndhcm4obm9kZSk7XHJcbiAgICAvLyBpZih0aGlzLnN0YXRlLmxvYWRpbmcgPT0gdHJ1ZSkgcmV0dXJuOy8vIGlmIGxvYWRpbmcgZG8gbm90aGluZ1xyXG5cclxuICAgIC8vIGlmKHRoaXMub2JzZXJ2ZXIuY3VycmVudCkgdGhpcy5vYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcclxuICAgIC8vICFvYmpfZXhpc3RzKG9ic2VydmVyLFwiY3VycmVudC5yb290XCIpIGZpeCBmb3IgLnJvb3QgPT0gbnVsbFxyXG4gICAgaWYoIWV4aXN0cyhvYnNlcnZlci5jdXJyZW50KSB8fCAhb2JqX2V4aXN0cyhvYnNlcnZlcixcImN1cnJlbnQucm9vdFwiKSB8fCAhc2FtZV9yb290Lyp8fCAgaGFzX2xhc3RfbWFyZ2luICYmIHJvb3RNYXJnaW4gIT0gbGFzdF9yb290TWFyZ2luLmN1cnJlbnQqLyApe1xyXG4gICAgICAvLyBpIG9ubHkgbmVlZCBvbmUgb2JzZXJ2ZXJcclxuICAgICAgLy8gdGhpcy5yb290X3ZpZXdwb3J0LmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYXJjX3Njcm9sbF92aWV3cG9ydF8ke3RoaXMuc3RhdGUuaVVOfWApO1xyXG4gICAgICAvLyBpZih0aGlzLm9ic2VydmVyLmN1cnJlbnQpIHRoaXMub2JzZXJ2ZXIuY3VycmVudC5kaXNjb25uZWN0KCk7XHJcblxyXG4gICAgICBsYXN0X3Jvb3RNYXJnaW4uY3VycmVudCA9IHJvb3RNYXJnaW47Ly8gaGVscHMgZHluYW1pYyByZXNpemluZ1xyXG5cclxuICAgICAgb2JzZXJ2ZXIuY3VycmVudCA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlciggZW50cmllcyA9PiB7XHJcblxyXG4gICAgICAgIGxldCBub2RlX2lkID0gKGVudHJpZXNbMF0udGFyZ2V0LmRhdGFzZXQub2JzZXJ2ZXIpID8gZW50cmllc1swXS50YXJnZXQuZGF0YXNldC5vYnNlcnZlciA6IE51bWJlcihlbnRyaWVzWzBdLnRhcmdldC5kYXRhc2V0Lm5keCk7Ly9vdGhlcndpc2UgbWFrZSBzdXJlIGl0cyBub3QgYSBzdHJpbmdcclxuICAgICAgICAvLyBsZXQgbmV4dF9yZXN0b2NrID0gbmV4dF9yZXN0b2NrLmN1cnJlbnQ7XHJcbiAgICAgICAgLy8gbGV0IGxhc3RfcmVzdG9jayA9IGxhc3RfcmVzdG9jay5jdXJyZW50O1xyXG4gICAgICAgIC8vIHRoaXMubGFzdF9yZXN0b2NrLmN1cnJlbnQgPSBub2RlX2lkO1xyXG5cclxuICAgICAgICBpZihlbnRyaWVzWzBdLmlzSW50ZXJzZWN0aW5nICYmICghaXNOYU4obm9kZV9pZCkgJiYgbm9kZV9pZCA9PSBuZXh0X3Jlc3RvY2suY3VycmVudCB8fCBpc05hTihub2RlX2lkKSAmJiBub2RlX2lkID09IFwibG9hZGVyXCIpICYmIGhhc19tb3JlKXtcclxuXHJcbiAgICAgICAgICAvLyBjb25zb2xlLndhcm4oYFtvYnNlcnZlcl0gZW50cnkgaXMgaW50ZXJzZWN0aW5nYCxlbnRyaWVzWzBdLnRhcmdldCk7XHJcbiAgICAgICAgICAvLyAvLyBjb25zb2xlLndhcm4oXCJ2aXNpYmxlXCIpO1xyXG4gICAgICAgICAgLy8gdGhpcy5mZXRjaF9pbmZvKCk7XHJcbiAgICAgICAgICAvLyBmZXRjaF9tZSgpO1xyXG4gICAgICAgICAgcmVzdG9jaygpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybihcIltvYnNlcnZlcl0gc2V0dGluZyByZXN0b2NrIGN1cnJlbnRcIik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZSBpZighaXNOYU4obm9kZV9pZCkgJiYgbm9kZV9pZCA8PSBsYXN0X3Jlc3RvY2suY3VycmVudCl7XHJcblxyXG4gICAgICAgICAgLy8gdGhpcyBlbmRzIGFsbW9zdCBpbW1lZGlhdGVseSBhZnRlciB0aGUgbGFzdF9yZXN0b2NrIGlzIHNldCBiZWNhdXNlIHRoZSBvYnNlcnZlciBpcyBjb25zdGFudGx5IGNoZWNraW5nLlxyXG4gICAgICAgICAgLy8gY29uc29sZS53YXJuKGBbb2JzZXJ2ZXJdIGVuZGluZyBvYnNlcnZhdGlvbmAsZW50cmllc1swXS50YXJnZXQpO1xyXG4gICAgICAgICAgLy8gb2JzZXJ2ZXIuY3VycmVudC51bm9ic2VydmUoZW50cmllc1swXS50YXJnZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS53YXJuKGBbb2JzZXJ2ZXJdIGludGVyc2VjdGlvblJhdGlvICR7ZW50cmllc1swXS5pbnRlcnNlY3Rpb25SYXRpb31gKTtcclxuXHJcbiAgICAgIH0se3Jvb3RNYXJnaW46IGAke3Jvb3RNYXJnaW59cHhgLCByb290OiByb290X3ZpZXdwb3J0fSk7XHJcbiAgICAgIC8vIHRoaXMub2JzZXJ2ZXJfaW5pdC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZihub2RlICYmIGhhc19tb3JlKXtcclxuICAgICAgIG9ic2VydmVyLmN1cnJlbnQub2JzZXJ2ZShub2RlKTtcclxuICAgICAgIGlmKGV4aXN0cyhub2RlLmRhdGFzZXQubmR4KSkgbmV4dF9yZXN0b2NrLmN1cnJlbnQgPSBOdW1iZXIobm9kZS5kYXRhc2V0Lm5keCk7XHJcbiAgICAgfVxyXG4gICAgLy8gbGV0IGxhc3RfcmVzdG9jayA9IHRoaXMubGFzdF9yZXN0b2NrLmN1cnJlbnQgfHwgMDtcclxuICAgIC8vIGlmKG5vZGUpXHJcbiAgfVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBYUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/components/VirtualScroll/observer.js\n");

/***/ }),

/***/ "./js/components/Narrator/index.js":
/*!*****************************************!*\
  !*** ./js/components/Narrator/index.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Narrator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Narrator */ \"./js/components/Narrator/Narrator.js\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_Narrator__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci9pbmRleC5qcz9kMTBhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOYXJyYXRvciBmcm9tICcuL05hcnJhdG9yJztcclxuZXhwb3J0IGRlZmF1bHQgTmFycmF0b3I7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/index.js\n");

/***/ }),

/***/ "./js/components/Narrator/tools/class_maker.js":
/*!*****************************************************!*\
  !*** ./js/components/Narrator/tools/class_maker.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// const {class_maker} = require('../../tools/class_maker');\nvar _require = __webpack_require__(/*! ./exists */ \"./js/components/Narrator/tools/exists.js\"),\n    exists = _require.exists;\n\nvar class_maker = function class_maker(_ref) {\n  var _ref$prefix = _ref.prefix,\n      prefix = _ref$prefix === void 0 ? \"\" : _ref$prefix,\n      _ref$name = _ref.name,\n      name = _ref$name === void 0 ? \"\" : _ref$name,\n      _ref$main = _ref.main,\n      main = _ref$main === void 0 ? \"\" : _ref$main,\n      _ref$iUN = _ref.iUN,\n      iUN = _ref$iUN === void 0 ? \"\" : _ref$iUN,\n      _ref$ndx = _ref.ndx,\n      ndx = _ref$ndx === void 0 ? \"\" : _ref$ndx,\n      _ref$no_name = _ref.no_name,\n      no_name = _ref$no_name === void 0 ? false : _ref$no_name,\n      _ref$no_main = _ref.no_main,\n      no_main = _ref$no_main === void 0 ? false : _ref$no_main;\n  // LATER: reconfirgure class_maker\n  var name2 = exists(name) ? name + \"_\" : \"\",\n      main2 = exists(main) ? main + \"_\" : \"\";\n  iUN2 = exists(iUN) ? iUN + \"_\" : \"\";\n  prefix = exists(prefix) ? prefix.replace(\"_\", \"\") : \"\"; //prefix shouldn't have an underscore for this\n\n  prefix2 = exists(prefix) ? prefix + \"_\" : \"\";\n  var prefixes = exists(prefix) ? \"\".concat(prefix2).concat(name2).concat(main2).concat(iUN, \" \").concat(prefix2).concat(name2).concat(main) : \"\",\n      names = exists(name) ? \"\".concat(name2).concat(main2).concat(iUN, \" \").concat(name2).concat(main, \" \").concat(name2).concat(iUN, \" \").concat(no_name ? \"\" : name) : \"\",\n      mains = exists(main) ? \"\".concat(main2).concat(iUN, \" \").concat(no_main ? \"\" : main) : \"\";\n  ndxes = typeof ndx != \"undefined\" && ndx !== \"\" ? [\"\".concat(prefix).concat(name2).concat(main2).concat(iUN2).concat(ndx), \"\".concat(prefix).concat(name2).concat(main2).concat(ndx), \"\".concat(name2).concat(main2).concat(ndx), \"\".concat(name2).concat(iUN2).concat(ndx), \"\".concat(main2).concat(iUN2).concat(ndx)].join(\" \") : \"\";\n  var return_txt = [\"\".concat(ndxes), \"\".concat(prefixes), \"\".concat(names), \"\".concat(mains), \"\".concat(iUN)].join(\" \");\n  return return_txt.trim();\n};\n\nmodule.exports = {\n  class_maker: class_maker\n}; // examples from modal.js\n// sample using no_main because there is a conflict with using modal_cont as a standalone class -\n// no_main will not add modal_cont as a class by itself\n// let wrapper_class = {className: `${class_maker({prefix, name, main: \"modal_cont\", iUN, no_main: true})} ${tag} ${w3Modal} ${wrapper_addClass} ${visible} core_modal`};\n// let content_class = {className: `${class_maker({prefix, name, main: \"content\", iUN})} glass_content ${tag} ${content_addClass}`};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL3Rvb2xzL2NsYXNzX21ha2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci90b29scy9jbGFzc19tYWtlci5qcz8wOTM0Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG4vLyBjb25zdCB7Y2xhc3NfbWFrZXJ9ID0gcmVxdWlyZSgnLi4vLi4vdG9vbHMvY2xhc3NfbWFrZXInKTtcclxuY29uc3Qge2V4aXN0c30gPSByZXF1aXJlKCcuL2V4aXN0cycpO1xyXG5cclxuY29uc3QgY2xhc3NfbWFrZXIgPSAoe3ByZWZpeCA9IFwiXCIsIG5hbWUgPSBcIlwiLCBtYWluID0gXCJcIiwgaVVOID0gXCJcIiAsIG5keCA9IFwiXCIsIG5vX25hbWUgPSBmYWxzZSwgbm9fbWFpbiA9IGZhbHNlfSkgPT4ge1xyXG5cclxuICAvLyBMQVRFUjogcmVjb25maXJndXJlIGNsYXNzX21ha2VyXHJcblxyXG4gIGxldCBuYW1lMiA9IGV4aXN0cyhuYW1lKSA/IG5hbWUgKyBcIl9cIiA6IFwiXCIsXHJcbiAgbWFpbjIgPSBleGlzdHMobWFpbikgPyBtYWluICsgXCJfXCIgOiBcIlwiO1xyXG4gIGlVTjIgPSBleGlzdHMoaVVOKSA/IGlVTiArIFwiX1wiIDogXCJcIjtcclxuXHJcbiAgcHJlZml4ID0gZXhpc3RzKHByZWZpeCkgPyBwcmVmaXgucmVwbGFjZShcIl9cIixcIlwiKSA6IFwiXCI7Ly9wcmVmaXggc2hvdWxkbid0IGhhdmUgYW4gdW5kZXJzY29yZSBmb3IgdGhpc1xyXG4gIHByZWZpeDIgPSBleGlzdHMocHJlZml4KSA/IHByZWZpeCArIFwiX1wiIDogXCJcIjtcclxuXHJcbiAgbGV0IHByZWZpeGVzID0gKGV4aXN0cyhwcmVmaXgpKSA/IGAke3ByZWZpeDJ9JHtuYW1lMn0ke21haW4yfSR7aVVOfSAke3ByZWZpeDJ9JHtuYW1lMn0ke21haW59YCA6IFwiXCIsXHJcbiAgbmFtZXMgPSBleGlzdHMobmFtZSkgPyBgJHtuYW1lMn0ke21haW4yfSR7aVVOfSAke25hbWUyfSR7bWFpbn0gJHtuYW1lMn0ke2lVTn0gJHsgbm9fbmFtZSA/IFwiXCIgOiBuYW1lfWAgOiBcIlwiLFxyXG4gIG1haW5zID0gZXhpc3RzKG1haW4pID8gYCR7bWFpbjJ9JHtpVU59ICR7bm9fbWFpbiA/IFwiXCIgOiBtYWlufWAgOiBcIlwiO1xyXG5cclxuICBuZHhlcyA9ICh0eXBlb2YgbmR4ICE9IFwidW5kZWZpbmVkXCIgJiYgbmR4ICE9PSBcIlwiKSA/IFtgJHtwcmVmaXh9JHtuYW1lMn0ke21haW4yfSR7aVVOMn0ke25keH1gLFxyXG4gIGAke3ByZWZpeH0ke25hbWUyfSR7bWFpbjJ9JHtuZHh9YCxcclxuICBgJHtuYW1lMn0ke21haW4yfSR7bmR4fWAsXHJcbiAgYCR7bmFtZTJ9JHtpVU4yfSR7bmR4fWAsXHJcbiAgYCR7bWFpbjJ9JHtpVU4yfSR7bmR4fWBdLmpvaW4oXCIgXCIpIDogXCJcIjtcclxuXHJcbiAgbGV0IHJldHVybl90eHQgPSBbYCR7bmR4ZXN9YCxcclxuICBgJHtwcmVmaXhlc31gLFxyXG4gIGAke25hbWVzfWAsXHJcbiAgYCR7bWFpbnN9YCxcclxuICBgJHtpVU59YF0uam9pbihcIiBcIik7XHJcblxyXG5cclxuICByZXR1cm4gcmV0dXJuX3R4dC50cmltKCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge2NsYXNzX21ha2VyfVxyXG5cclxuLy8gZXhhbXBsZXMgZnJvbSBtb2RhbC5qc1xyXG4vLyBzYW1wbGUgdXNpbmcgbm9fbWFpbiBiZWNhdXNlIHRoZXJlIGlzIGEgY29uZmxpY3Qgd2l0aCB1c2luZyBtb2RhbF9jb250IGFzIGEgc3RhbmRhbG9uZSBjbGFzcyAtXHJcbi8vIG5vX21haW4gd2lsbCBub3QgYWRkIG1vZGFsX2NvbnQgYXMgYSBjbGFzcyBieSBpdHNlbGZcclxuLy8gbGV0IHdyYXBwZXJfY2xhc3MgPSB7Y2xhc3NOYW1lOiBgJHtjbGFzc19tYWtlcih7cHJlZml4LCBuYW1lLCBtYWluOiBcIm1vZGFsX2NvbnRcIiwgaVVOLCBub19tYWluOiB0cnVlfSl9ICR7dGFnfSAke3czTW9kYWx9ICR7d3JhcHBlcl9hZGRDbGFzc30gJHt2aXNpYmxlfSBjb3JlX21vZGFsYH07XHJcblxyXG4vLyBsZXQgY29udGVudF9jbGFzcyA9IHtjbGFzc05hbWU6IGAke2NsYXNzX21ha2VyKHtwcmVmaXgsIG5hbWUsIG1haW46IFwiY29udGVudFwiLCBpVU59KX0gZ2xhc3NfY29udGVudCAke3RhZ30gJHtjb250ZW50X2FkZENsYXNzfWB9O1xyXG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFJQTtBQU1BO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/tools/class_maker.js\n");

/***/ }),

/***/ "./js/components/Narrator/tools/detect_project_type.js":
/*!*************************************************************!*\
  !*** ./js/components/Narrator/tools/detect_project_type.js ***!
  \*************************************************************/
/*! exports provided: detect_project_type */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"detect_project_type\", function() { return detect_project_type; });\n// const {detect_project_type} = require('../../tools/detect_project_type');\nvar detect_project_type = function detect_project_type(_ref) {\n  var _id = _ref._id,\n      owner_id = _ref.owner_id,\n      parent_project = _ref.parent_project;\n  return owner_id != parent_project ? \"project\" : _id != owner_id ? \"organization\" : \"user\";\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL3Rvb2xzL2RldGVjdF9wcm9qZWN0X3R5cGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL3Rvb2xzL2RldGVjdF9wcm9qZWN0X3R5cGUuanM/NTM4MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb25zdCB7ZGV0ZWN0X3Byb2plY3RfdHlwZX0gPSByZXF1aXJlKCcuLi8uLi90b29scy9kZXRlY3RfcHJvamVjdF90eXBlJyk7XHJcblxyXG5leHBvcnQgY29uc3QgZGV0ZWN0X3Byb2plY3RfdHlwZSA9ICh7X2lkLCBvd25lcl9pZCwgcGFyZW50X3Byb2plY3R9KSA9PiB7XHJcbiAgcmV0dXJuIChvd25lcl9pZCAhPSBwYXJlbnRfcHJvamVjdCkgPyBcInByb2plY3RcIiA6IF9pZCAhPSBvd25lcl9pZCA/IFwib3JnYW5pemF0aW9uXCIgOiBcInVzZXJcIjtcclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/tools/detect_project_type.js\n");

/***/ }),

/***/ "./js/components/Narrator/tools/exists.js":
/*!************************************************!*\
  !*** ./js/components/Narrator/tools/exists.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// const {exists} = require('./lib/tools/exists.js');\nvar exists = function exists(item, empty_strings_are_ok) {\n  // by default the item does not exist if empty string (\"\")\n  try {\n    var the_verdict = item != null && typeof item != \"undefined\" && item != false ? true : false;\n\n    if (empty_strings_are_ok) {\n      // it has a value, the value is just empty\n      return item == \"\" || item === 0 || item == false ? true : the_verdict;\n    } else {\n      return the_verdict;\n    }\n  } catch (err) {\n    console.log(\"[exists] error\", err);\n    return false;\n  }\n}; // exists\n\n\nvar obj_exists = function obj_exists(object, properties, empty_strings_are_ok) {\n  // checks object properties\n  if (!exists(object, empty_strings_are_ok)) return false;\n  var property_array = properties.includes(\".\") ? properties.split(\".\") : [properties];\n  var response;\n\n  try {\n    response = property_array.reduce(function (result, prop, ndx, ary) {\n      result = result[prop]; // console.log(`[obj_exists] result`, result);\n\n      return result;\n    }, object);\n  } catch (e) {\n    return false;\n  }\n\n  return exists(response, empty_strings_are_ok); // my other setData idea is to use root[property] = value\n}; // obj_exists\n\n\nmodule.exports = {\n  exists: exists,\n  obj_exists: obj_exists\n}; // NOTES:\n// i need to evaluate this \"\". should this evaluate as true or false by default - right now its true?\n// this can't evaluate zero in this case its false\n// \"\" ==  false // true so \"\" is actually caught in \"\" - notEmpty is probably doing absolutely nothing\n// let x_test1 = exists(\"\");//false\n// let x_test2 = exists(\"words\");//true\n// let x_test3 = exists(\"\",true);//true\n// let x_test4 = exists(\"words\",true);//true\n// false booleans return false (they don't exist)\n// test_obj = {who:{what:{where:{when:\"how\"}}}}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL3Rvb2xzL2V4aXN0cy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2NvbXBvbmVudHMvTmFycmF0b3IvdG9vbHMvZXhpc3RzLmpzP2JlZmYiXSwic291cmNlc0NvbnRlbnQiOlsiICAvLyBjb25zdCB7ZXhpc3RzfSA9IHJlcXVpcmUoJy4vbGliL3Rvb2xzL2V4aXN0cy5qcycpO1xyXG5jb25zdCBleGlzdHMgPSAoaXRlbSwgZW1wdHlfc3RyaW5nc19hcmVfb2spID0+IHtcclxuICAvLyBieSBkZWZhdWx0IHRoZSBpdGVtIGRvZXMgbm90IGV4aXN0IGlmIGVtcHR5IHN0cmluZyAoXCJcIilcclxuICB0cnkge1xyXG4gICAgbGV0IHRoZV92ZXJkaWN0ID0gKGl0ZW0gIT0gbnVsbCAmJiB0eXBlb2YgaXRlbSAhPSBcInVuZGVmaW5lZFwiICYmIGl0ZW0gIT0gZmFsc2UpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgIGlmKGVtcHR5X3N0cmluZ3NfYXJlX29rKXtcclxuICAgICAgLy8gaXQgaGFzIGEgdmFsdWUsIHRoZSB2YWx1ZSBpcyBqdXN0IGVtcHR5XHJcbiAgICAgIHJldHVybiAoaXRlbSA9PSBcIlwiIHx8IGl0ZW0gPT09IDAgfHwgaXRlbSA9PSBmYWxzZSkgPyB0cnVlIDogdGhlX3ZlcmRpY3Q7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aGVfdmVyZGljdDtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnIpIHtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgW2V4aXN0c10gZXJyb3JgLGVycik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59Ly8gZXhpc3RzXHJcblxyXG5jb25zdCBvYmpfZXhpc3RzID0gKG9iamVjdCwgcHJvcGVydGllcywgZW1wdHlfc3RyaW5nc19hcmVfb2spID0+IHtcclxuICAvLyBjaGVja3Mgb2JqZWN0IHByb3BlcnRpZXNcclxuICBpZiAoIWV4aXN0cyhvYmplY3QsIGVtcHR5X3N0cmluZ3NfYXJlX29rKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICBsZXQgcHJvcGVydHlfYXJyYXkgPSAocHJvcGVydGllcy5pbmNsdWRlcyhcIi5cIikpID8gcHJvcGVydGllcy5zcGxpdChcIi5cIikgOiBbcHJvcGVydGllc107XHJcblxyXG4gIGxldCByZXNwb25zZTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIHJlc3BvbnNlID0gcHJvcGVydHlfYXJyYXkucmVkdWNlKChyZXN1bHQsIHByb3AsIG5keCwgYXJ5KSA9PiB7XHJcbiAgICAgIHJlc3VsdCA9IHJlc3VsdFtwcm9wXTtcclxuXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBbb2JqX2V4aXN0c10gcmVzdWx0YCwgcmVzdWx0KTtcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9LG9iamVjdCk7XHJcblxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBleGlzdHMocmVzcG9uc2UsIGVtcHR5X3N0cmluZ3NfYXJlX29rKTtcclxuICAvLyBteSBvdGhlciBzZXREYXRhIGlkZWEgaXMgdG8gdXNlIHJvb3RbcHJvcGVydHldID0gdmFsdWVcclxufS8vIG9ial9leGlzdHNcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge2V4aXN0cywgb2JqX2V4aXN0c31cclxuXHJcbi8vIE5PVEVTOlxyXG4vLyBpIG5lZWQgdG8gZXZhbHVhdGUgdGhpcyBcIlwiLiBzaG91bGQgdGhpcyBldmFsdWF0ZSBhcyB0cnVlIG9yIGZhbHNlIGJ5IGRlZmF1bHQgLSByaWdodCBub3cgaXRzIHRydWU/XHJcbi8vIHRoaXMgY2FuJ3QgZXZhbHVhdGUgemVybyBpbiB0aGlzIGNhc2UgaXRzIGZhbHNlXHJcbi8vIFwiXCIgPT0gIGZhbHNlIC8vIHRydWUgc28gXCJcIiBpcyBhY3R1YWxseSBjYXVnaHQgaW4gXCJcIiAtIG5vdEVtcHR5IGlzIHByb2JhYmx5IGRvaW5nIGFic29sdXRlbHkgbm90aGluZ1xyXG5cclxuLy8gbGV0IHhfdGVzdDEgPSBleGlzdHMoXCJcIik7Ly9mYWxzZVxyXG4vLyBsZXQgeF90ZXN0MiA9IGV4aXN0cyhcIndvcmRzXCIpOy8vdHJ1ZVxyXG4vLyBsZXQgeF90ZXN0MyA9IGV4aXN0cyhcIlwiLHRydWUpOy8vdHJ1ZVxyXG4vLyBsZXQgeF90ZXN0NCA9IGV4aXN0cyhcIndvcmRzXCIsdHJ1ZSk7Ly90cnVlXHJcblxyXG4vLyBmYWxzZSBib29sZWFucyByZXR1cm4gZmFsc2UgKHRoZXkgZG9uJ3QgZXhpc3QpXHJcblxyXG4vLyB0ZXN0X29iaiA9IHt3aG86e3doYXQ6e3doZXJlOnt3aGVuOlwiaG93XCJ9fX19XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/tools/exists.js\n");

/***/ }),

/***/ "./js/components/Narrator/tools/get_default_image.js":
/*!***********************************************************!*\
  !*** ./js/components/Narrator/tools/get_default_image.js ***!
  \***********************************************************/
/*! exports provided: get_default_image */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"get_default_image\", function() { return get_default_image; });\nvar get_default_image = function get_default_image() {\n  return window['IMG_URL'] + \"flame.png\";\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL3Rvb2xzL2dldF9kZWZhdWx0X2ltYWdlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci90b29scy9nZXRfZGVmYXVsdF9pbWFnZS5qcz9iYzQ0Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuXHJcbiAgZXhwb3J0IGNvbnN0IGdldF9kZWZhdWx0X2ltYWdlID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHdpbmRvd1snSU1HX1VSTCddICsgXCJmbGFtZS5wbmdcIjtcclxuICB9XHJcbiJdLCJtYXBwaW5ncyI6IkFBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./js/components/Narrator/tools/get_default_image.js\n");

/***/ }),

/***/ "./js/components/Narrator/tools/has_extra_data.js":
/*!********************************************************!*\
  !*** ./js/components/Narrator/tools/has_extra_data.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var has_extra_data = function has_extra_data(_ref) {\n  var extra = _ref.extra,\n      layout = _ref.layout;\n  var verbose = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  // validates the extra data?\n  var has_extra = false;\n  var type; // first test\n\n  if (typeof extra == \"undefined\" || extra == \"\" || extra == \"{}\" || extra == {}) {\n    type = null;\n    has_extra = false;\n    return verbose ? {\n      has_extra: has_extra,\n      type: type\n    } : has_extra;\n  } //2nd test\n\n\n  if (typeof extra == \"string\" && extra.indexOf(\"{\") == -1) {\n    // return true;\n    type = \"array\"; // its an extra array - legacy extra\n\n    has_extra = true;\n    return verbose ? {\n      has_extra: has_extra,\n      type: type\n    } : has_extra;\n  } // its an extra array - legacy extra\n  // 3rd test\n\n\n  var test_extra = typeof extra != \"string\" ? extra : JSON.parse(extra);\n  var extra_keys = Object.keys(test_extra); //if it has the old format or it has the target layout - true\n  // return (extra_keys.includes(\"img_url\") || extra_keys.includes(state.layout)) ? true : false;\n\n  if (verbose) {\n    type = extra_keys.includes(\"img_url\") ? \"legacy\" : typeof layout == \"string\" && extra_keys.includes(layout) || Array.isArray(layout) && extra_keys.some(function (key) {\n      return layout.includes(key);\n    }) ? \"verbose\" : null;\n    has_extra = extra_keys.includes(\"img_url\") || typeof layout == \"string\" && extra_keys.includes(layout) || Array.isArray(layout) && extra_keys.some(function (key) {\n      return layout.includes(key);\n    }) ? true : false;\n    return {\n      has_extra: has_extra,\n      type: type\n    };\n  } else {\n    return extra_keys.length > 0 ? true : false;\n  }\n};\n\nmodule.exports = {\n  has_extra_data: has_extra_data\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL3Rvb2xzL2hhc19leHRyYV9kYXRhLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci90b29scy9oYXNfZXh0cmFfZGF0YS5qcz9iMGI5Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuXHJcbmNvbnN0IGhhc19leHRyYV9kYXRhID0gZnVuY3Rpb24oe2V4dHJhLCBsYXlvdXR9LHZlcmJvc2UgPSBmYWxzZSl7XHJcbiAgLy8gdmFsaWRhdGVzIHRoZSBleHRyYSBkYXRhP1xyXG5cclxuICBsZXQgaGFzX2V4dHJhID0gZmFsc2U7XHJcbiAgbGV0IHR5cGU7XHJcbiAgLy8gZmlyc3QgdGVzdFxyXG4gIGlmKHR5cGVvZiBleHRyYSA9PSBcInVuZGVmaW5lZFwiIHx8IGV4dHJhID09IFwiXCIgfHwgZXh0cmEgPT0gXCJ7fVwiIHx8IGV4dHJhID09IHt9KXtcclxuICAgIHR5cGUgPSBudWxsO1xyXG4gICAgaGFzX2V4dHJhID0gIGZhbHNlO1xyXG4gICAgcmV0dXJuICh2ZXJib3NlKSA/IHtoYXNfZXh0cmEsIHR5cGV9IDogaGFzX2V4dHJhO1xyXG4gIH1cclxuXHJcbiAgLy8ybmQgdGVzdFxyXG4gIGlmKHR5cGVvZiBleHRyYSA9PSBcInN0cmluZ1wiICYmIGV4dHJhLmluZGV4T2YoXCJ7XCIpID09IC0xKXtcclxuICAgIC8vIHJldHVybiB0cnVlO1xyXG4gICAgdHlwZSA9IFwiYXJyYXlcIjsvLyBpdHMgYW4gZXh0cmEgYXJyYXkgLSBsZWdhY3kgZXh0cmFcclxuICAgIGhhc19leHRyYSA9ICB0cnVlO1xyXG4gICAgcmV0dXJuICh2ZXJib3NlKSA/IHtoYXNfZXh0cmEsIHR5cGV9IDogaGFzX2V4dHJhO1xyXG4gIH0vLyBpdHMgYW4gZXh0cmEgYXJyYXkgLSBsZWdhY3kgZXh0cmFcclxuXHJcbiAgLy8gM3JkIHRlc3RcclxuICBsZXQgdGVzdF9leHRyYSA9ICh0eXBlb2YgZXh0cmEgIT0gXCJzdHJpbmdcIikgPyBleHRyYSA6IEpTT04ucGFyc2UoZXh0cmEpO1xyXG5cclxuICBsZXQgZXh0cmFfa2V5cyA9IE9iamVjdC5rZXlzKHRlc3RfZXh0cmEpO1xyXG5cclxuICAvL2lmIGl0IGhhcyB0aGUgb2xkIGZvcm1hdCBvciBpdCBoYXMgdGhlIHRhcmdldCBsYXlvdXQgLSB0cnVlXHJcbiAgLy8gcmV0dXJuIChleHRyYV9rZXlzLmluY2x1ZGVzKFwiaW1nX3VybFwiKSB8fCBleHRyYV9rZXlzLmluY2x1ZGVzKHN0YXRlLmxheW91dCkpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gIGlmKHZlcmJvc2Upe1xyXG4gICAgdHlwZSA9IChleHRyYV9rZXlzLmluY2x1ZGVzKFwiaW1nX3VybFwiKSkgPyBcImxlZ2FjeVwiIDpcclxuICAgICggdHlwZW9mIGxheW91dCA9PSBcInN0cmluZ1wiICYmIGV4dHJhX2tleXMuaW5jbHVkZXMobGF5b3V0KSB8fFxyXG4gICAgQXJyYXkuaXNBcnJheShsYXlvdXQpICYmIGV4dHJhX2tleXMuc29tZSgoa2V5KSA9PiB7XHJcbiAgICAgIHJldHVybiBsYXlvdXQuaW5jbHVkZXMoa2V5KTtcclxuICAgIH0pICkgPyBcInZlcmJvc2VcIiA6IG51bGw7XHJcblxyXG5cclxuICAgIGhhc19leHRyYSA9ICggZXh0cmFfa2V5cy5pbmNsdWRlcyhcImltZ191cmxcIikgfHxcclxuICAgIHR5cGVvZiBsYXlvdXQgPT0gXCJzdHJpbmdcIiAmJiBleHRyYV9rZXlzLmluY2x1ZGVzKGxheW91dCkgfHxcclxuICAgIEFycmF5LmlzQXJyYXkobGF5b3V0KSAmJiBleHRyYV9rZXlzLnNvbWUoKGtleSkgPT4ge1xyXG4gICAgICByZXR1cm4gbGF5b3V0LmluY2x1ZGVzKGtleSk7XHJcbiAgICB9KSApID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgIHJldHVybiB7aGFzX2V4dHJhLCB0eXBlfTtcclxuXHJcbiAgfWVsc2V7XHJcbiAgICByZXR1cm4gZXh0cmFfa2V5cy5sZW5ndGggPiAwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge2hhc19leHRyYV9kYXRhfTtcclxuIl0sIm1hcHBpbmdzIjoiQUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./js/components/Narrator/tools/has_extra_data.js\n");

/***/ }),

/***/ "./js/components/Narrator/tools/html_decode.js":
/*!*****************************************************!*\
  !*** ./js/components/Narrator/tools/html_decode.js ***!
  \*****************************************************/
/*! exports provided: htmlDecode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"htmlDecode\", function() { return htmlDecode; });\nvar htmlDecode = function htmlDecode(input) {\n  var doc = new DOMParser().parseFromString(input, \"text/html\");\n  return doc.documentElement.textContent;\n}; //end htmlDecode//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL3Rvb2xzL2h0bWxfZGVjb2RlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci90b29scy9odG1sX2RlY29kZS5qcz82YzJjIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cdGV4cG9ydCBjb25zdCBodG1sRGVjb2RlID0gZnVuY3Rpb24oaW5wdXQpXHJcblx0e1xyXG5cdFx0dmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaW5wdXQsIFwidGV4dC9odG1sXCIpO1xyXG5cdFx0cmV0dXJuIGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQ7XHJcblxyXG5cdH0vL2VuZCBodG1sRGVjb2RlXHJcbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/tools/html_decode.js\n");

/***/ }),

/***/ "./js/components/Narrator/tools/wrapr.js":
/*!***********************************************!*\
  !*** ./js/components/Narrator/tools/wrapr.js ***!
  \***********************************************/
/*! exports provided: wrapr */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"wrapr\", function() { return wrapr; });\n// const {wrapr} = require('../../tools/wrapr');\nvar _require = __webpack_require__(/*! ./exists */ \"./js/components/Narrator/tools/exists.js\"),\n    exists = _require.exists;\n/**\r\n * @fileOverview Create a wrapper that has been appended to a root DOM element and can be referecend using ReactDOM.render.\r\n * its useful to allow multiple components to be added to the same DOM element without overwriting other elements\r\n * @category Tools\r\n * @module wrapr\r\n * @param  {String} [name=\"\"]                      unique name to reference the container\r\n * @param  {String} [id=name                      ||            \"\"]    same as the name unless no name is given\r\n * @param  {String} home                          this wrapr's root or home container\r\n * @param  {String} [custom=\"\"]                   custom class to be added to className\r\n * @param  {Number} [iUN=Math.round(Math.random() *             10000)               }]  a individual unique number\r\n * @return {Object}                      wrapper container to be used with ReactDOM.render\r\n * @example\r\n * let share_modal_cont = wrapr({name:\"clip_modal_cont\",iUN, home: \".modal_home\", custom:\"w3-part block\"});\r\n * let modal_temp_cont = wrapr({name:\"modal_temp_cont\", home: \".modal_home\", custom:\"w3-part block\"});\r\n * // => DOM wrapper object\r\n */\n\n\nvar wrapr = function wrapr(_ref) {\n  var _ref$name = _ref.name,\n      name = _ref$name === void 0 ? \"\" : _ref$name,\n      _ref$id = _ref.id,\n      id = _ref$id === void 0 ? name || \"\" : _ref$id,\n      _ref$home = _ref.home,\n      home = _ref$home === void 0 ? false : _ref$home,\n      _ref$custom = _ref.custom,\n      custom = _ref$custom === void 0 ? \"\" : _ref$custom,\n      _ref$iUN = _ref.iUN,\n      iUN = _ref$iUN === void 0 ? Math.round(Math.random() * 10000) : _ref$iUN,\n      _ref$replace = _ref.replace,\n      replace = _ref$replace === void 0 ? false : _ref$replace;\n\n  /** @var {string} iUN2 a stringified version of an iUN complete with underscore for pretty separation */\n  var iUN2 = \"_\".concat(iUN);\n  /**\r\n   * @var modal_home\r\n   * @type {Object}\r\n   * @desc modal_home selects the .modal_home DOM element\r\n   * accepts a string that is already preformated with an indicator (.classIndicator) (#idIndicator)\r\n   * @example\r\n   * let home = `.modal_home`;// #modal_cont\r\n   * let modal_home = document.querySelector(`${home}`);\r\n   */\n\n  var modal_home;\n\n  if (typeof home != \"boolean\") {\n    modal_home = document.querySelector(\"\".concat(home)); // input should include . or #\n  }\n\n  var wrapr_cont = document.createElement('div');\n  if (id != \"\") wrapr_cont.id = id;\n  wrapr_cont.className = \"\".concat(id).concat(exists(id) ? iUN2 : \"\", \" \").concat(id, \" \").concat(name).concat(exists(id) ? iUN2 : \"\", \" \").concat(name, \" \").concat(custom); //block i can control visibility here\n\n  if (typeof home != \"boolean\" && typeof replace != \"boolean\") {\n    var replaceable = modal_home.querySelector(\"\".concat(replace));\n    modal_home.replaceChild(wrapr_cont, replaceable);\n  } else if (typeof replace != \"boolean\") {\n    // untested - when its ready it should be able to replace anything in the DOM\n    // home is not required\n    var _replaceable = document.querySelector(\"\".concat(replace));\n\n    document.replaceChild(wrapr_cont, _replaceable);\n  } else if (typeof home != \"boolean\") {\n    // add wrapper to home - home is required\n    modal_home.appendChild(wrapr_cont);\n  } else {\n    throw new Error(\"home is required\");\n  } // return the object\n\n\n  return wrapr_cont;\n}; // wrapr//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9jb21wb25lbnRzL05hcnJhdG9yL3Rvb2xzL3dyYXByLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50cy9OYXJyYXRvci90b29scy93cmFwci5qcz9jNTY2Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG4gIC8vIGNvbnN0IHt3cmFwcn0gPSByZXF1aXJlKCcuLi8uLi90b29scy93cmFwcicpO1xyXG4gIGNvbnN0IHtleGlzdHN9ID0gcmVxdWlyZSgnLi9leGlzdHMnKTtcclxuXHJcbiAgLyoqXHJcbiAgICogQGZpbGVPdmVydmlldyBDcmVhdGUgYSB3cmFwcGVyIHRoYXQgaGFzIGJlZW4gYXBwZW5kZWQgdG8gYSByb290IERPTSBlbGVtZW50IGFuZCBjYW4gYmUgcmVmZXJlY2VuZCB1c2luZyBSZWFjdERPTS5yZW5kZXIuXHJcbiAgICogaXRzIHVzZWZ1bCB0byBhbGxvdyBtdWx0aXBsZSBjb21wb25lbnRzIHRvIGJlIGFkZGVkIHRvIHRoZSBzYW1lIERPTSBlbGVtZW50IHdpdGhvdXQgb3ZlcndyaXRpbmcgb3RoZXIgZWxlbWVudHNcclxuICAgKiBAY2F0ZWdvcnkgVG9vbHNcclxuICAgKiBAbW9kdWxlIHdyYXByXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSBbbmFtZT1cIlwiXSAgICAgICAgICAgICAgICAgICAgICB1bmlxdWUgbmFtZSB0byByZWZlcmVuY2UgdGhlIGNvbnRhaW5lclxyXG4gICAqIEBwYXJhbSAge1N0cmluZ30gW2lkPW5hbWUgICAgICAgICAgICAgICAgICAgICAgfHwgICAgICAgICAgICBcIlwiXSAgICBzYW1lIGFzIHRoZSBuYW1lIHVubGVzcyBubyBuYW1lIGlzIGdpdmVuXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSBob21lICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIHdyYXByJ3Mgcm9vdCBvciBob21lIGNvbnRhaW5lclxyXG4gICAqIEBwYXJhbSAge1N0cmluZ30gW2N1c3RvbT1cIlwiXSAgICAgICAgICAgICAgICAgICBjdXN0b20gY2xhc3MgdG8gYmUgYWRkZWQgdG8gY2xhc3NOYW1lXHJcbiAgICogQHBhcmFtICB7TnVtYmVyfSBbaVVOPU1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICAgICAgICAgICAgIDEwMDAwKSAgICAgICAgICAgICAgIH1dICBhIGluZGl2aWR1YWwgdW5pcXVlIG51bWJlclxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgd3JhcHBlciBjb250YWluZXIgdG8gYmUgdXNlZCB3aXRoIFJlYWN0RE9NLnJlbmRlclxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogbGV0IHNoYXJlX21vZGFsX2NvbnQgPSB3cmFwcih7bmFtZTpcImNsaXBfbW9kYWxfY29udFwiLGlVTiwgaG9tZTogXCIubW9kYWxfaG9tZVwiLCBjdXN0b206XCJ3My1wYXJ0IGJsb2NrXCJ9KTtcclxuICAgKiBsZXQgbW9kYWxfdGVtcF9jb250ID0gd3JhcHIoe25hbWU6XCJtb2RhbF90ZW1wX2NvbnRcIiwgaG9tZTogXCIubW9kYWxfaG9tZVwiLCBjdXN0b206XCJ3My1wYXJ0IGJsb2NrXCJ9KTtcclxuICAgKiAvLyA9PiBET00gd3JhcHBlciBvYmplY3RcclxuICAgKi9cclxuXHJcblxyXG4gIGV4cG9ydCBjb25zdCB3cmFwciA9ICh7XHJcbiAgICBuYW1lID0gXCJcIixcclxuICAgIGlkPW5hbWUgfHwgXCJcIixcclxuICAgIGhvbWUgPSBmYWxzZSxcclxuICAgIGN1c3RvbSA9IFwiXCIsXHJcbiAgICBpVU4gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMCksXHJcbiAgICByZXBsYWNlID0gZmFsc2VcclxuICB9KSA9PiB7XHJcblxyXG4gIC8qKiBAdmFyIHtzdHJpbmd9IGlVTjIgYSBzdHJpbmdpZmllZCB2ZXJzaW9uIG9mIGFuIGlVTiBjb21wbGV0ZSB3aXRoIHVuZGVyc2NvcmUgZm9yIHByZXR0eSBzZXBhcmF0aW9uICovXHJcbiAgICBsZXQgaVVOMiA9IGBfJHtpVU59YDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB2YXIgbW9kYWxfaG9tZVxyXG4gICAgICogQHR5cGUge09iamVjdH1cclxuICAgICAqIEBkZXNjIG1vZGFsX2hvbWUgc2VsZWN0cyB0aGUgLm1vZGFsX2hvbWUgRE9NIGVsZW1lbnRcclxuICAgICAqIGFjY2VwdHMgYSBzdHJpbmcgdGhhdCBpcyBhbHJlYWR5IHByZWZvcm1hdGVkIHdpdGggYW4gaW5kaWNhdG9yICguY2xhc3NJbmRpY2F0b3IpICgjaWRJbmRpY2F0b3IpXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogbGV0IGhvbWUgPSBgLm1vZGFsX2hvbWVgOy8vICNtb2RhbF9jb250XHJcbiAgICAgKiBsZXQgbW9kYWxfaG9tZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7aG9tZX1gKTtcclxuICAgICAqL1xyXG4gICAgbGV0IG1vZGFsX2hvbWVcclxuICAgIGlmKHR5cGVvZiBob21lICE9IFwiYm9vbGVhblwiKXtcclxuICAgICAgbW9kYWxfaG9tZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7aG9tZX1gKTsvLyBpbnB1dCBzaG91bGQgaW5jbHVkZSAuIG9yICNcclxuICAgIH1cclxuXHJcbiAgICBsZXQgd3JhcHJfY29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgaWYoaWQgIT0gXCJcIikgd3JhcHJfY29udC5pZCA9IGlkO1xyXG4gICAgd3JhcHJfY29udC5jbGFzc05hbWUgPSBgJHtpZH0keyBleGlzdHMoaWQpID8gaVVOMiA6IFwiXCJ9ICR7aWR9ICR7bmFtZX0keyBleGlzdHMoaWQpID8gaVVOMiA6IFwiXCJ9ICR7bmFtZX0gJHtjdXN0b219YDsvL2Jsb2NrIGkgY2FuIGNvbnRyb2wgdmlzaWJpbGl0eSBoZXJlXHJcblxyXG4gICAgaWYgKHR5cGVvZiBob21lICE9IFwiYm9vbGVhblwiICYmIHR5cGVvZiByZXBsYWNlICE9IFwiYm9vbGVhblwiKSB7XHJcblxyXG4gICAgICBsZXQgcmVwbGFjZWFibGUgPSBtb2RhbF9ob21lLnF1ZXJ5U2VsZWN0b3IoYCR7cmVwbGFjZX1gKTtcclxuICAgICAgbW9kYWxfaG9tZS5yZXBsYWNlQ2hpbGQod3JhcHJfY29udCxyZXBsYWNlYWJsZSk7XHJcblxyXG4gICAgfWVsc2UgaWYgKCB0eXBlb2YgcmVwbGFjZSAhPSBcImJvb2xlYW5cIikge1xyXG4gICAgICAvLyB1bnRlc3RlZCAtIHdoZW4gaXRzIHJlYWR5IGl0IHNob3VsZCBiZSBhYmxlIHRvIHJlcGxhY2UgYW55dGhpbmcgaW4gdGhlIERPTVxyXG4gICAgICAvLyBob21lIGlzIG5vdCByZXF1aXJlZFxyXG4gICAgICBsZXQgcmVwbGFjZWFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3JlcGxhY2V9YCk7XHJcbiAgICAgIGRvY3VtZW50LnJlcGxhY2VDaGlsZCh3cmFwcl9jb250LHJlcGxhY2VhYmxlKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKCB0eXBlb2YgaG9tZSAhPSBcImJvb2xlYW5cIil7XHJcblxyXG4gICAgICAvLyBhZGQgd3JhcHBlciB0byBob21lIC0gaG9tZSBpcyByZXF1aXJlZFxyXG4gICAgICBtb2RhbF9ob21lLmFwcGVuZENoaWxkKHdyYXByX2NvbnQpO1xyXG5cclxuICAgIH1lbHNle1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJob21lIGlzIHJlcXVpcmVkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybiB0aGUgb2JqZWN0XHJcbiAgICByZXR1cm4gd3JhcHJfY29udDtcclxuXHJcbiAgfS8vIHdyYXByXHJcbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/components/Narrator/tools/wrapr.js\n");

/***/ }),

/***/ "./js/index.js":
/*!*********************!*\
  !*** ./js/index.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_Narrator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/Narrator */ \"./js/components/Narrator/index.js\");\n\n\n // require('./style.scss');\n\nvar root = document.querySelector('.root');\n\nvar render = function render(Component) {\n  react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h2\", null, \"Im rendering now!!\")), root);\n};\n\nrender(_components_Narrator__WEBPACK_IMPORTED_MODULE_2__[\"default\"]); // if (module.hot) {\n//   module.hot.accept('./App', () => { render(App); });\n// }//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qcy9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL2luZGV4LmpzP2VlMWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XHJcbmltcG9ydCBOYXJyYXRvciBmcm9tICcuL2NvbXBvbmVudHMvTmFycmF0b3InO1xyXG5cclxuLy8gcmVxdWlyZSgnLi9zdHlsZS5zY3NzJyk7XHJcblxyXG5jb25zdCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJvb3QnKTtcclxuXHJcbmNvbnN0IHJlbmRlciA9IChDb21wb25lbnQpID0+IHtcclxuICBSZWFjdERPTS5yZW5kZXIoXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8Q29tcG9uZW50IC8+XHJcbiAgICAgIDxoMj5JbSByZW5kZXJpbmcgbm93ISE8L2gyPlxyXG4gICAgPC9kaXY+LFxyXG4gICAgcm9vdFxyXG4gICk7XHJcbn07XHJcblxyXG5yZW5kZXIoTmFycmF0b3IpO1xyXG5cclxuLy8gaWYgKG1vZHVsZS5ob3QpIHtcclxuLy8gICBtb2R1bGUuaG90LmFjY2VwdCgnLi9BcHAnLCAoKSA9PiB7IHJlbmRlcihBcHApOyB9KTtcclxuLy8gfVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFHQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./js/index.js\n");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = React;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhY3QuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdFwiP2M0ODEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///react\n");

/***/ }),

/***/ "react-dom":
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = ReactDOM;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhY3QtZG9tLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUmVhY3RET01cIj80YjJkIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gUmVhY3RET007Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///react-dom\n");

/***/ }),

/***/ "tinycolor":
/*!****************************!*\
  !*** external "tinycolor" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = tinycolor;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGlueWNvbG9yLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwidGlueWNvbG9yXCI/NDNjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHRpbnljb2xvcjsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///tinycolor\n");

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsUUFBUSxvQkFBb0I7UUFDNUI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSxpQkFBaUIsNEJBQTRCO1FBQzdDO1FBQ0E7UUFDQSxrQkFBa0IsMkJBQTJCO1FBQzdDO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTs7UUFFQTtRQUNBO1FBQ0EseUNBQXlDLGdFQUFnRTtRQUN6Rzs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7OztRQUdBOztRQUVBO1FBQ0EsaUNBQWlDOztRQUVqQztRQUNBO1FBQ0E7UUFDQSxLQUFLO1FBQ0w7UUFDQTtRQUNBO1FBQ0EsTUFBTTtRQUNOOztRQUVBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0Esd0JBQXdCLGtDQUFrQztRQUMxRCxNQUFNO1FBQ047UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwwQ0FBMEMsZ0NBQWdDO1FBQzFFO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0Esd0RBQXdELGtCQUFrQjtRQUMxRTtRQUNBLGlEQUFpRCxjQUFjO1FBQy9EOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSx5Q0FBeUMsaUNBQWlDO1FBQzFFLGdIQUFnSCxtQkFBbUIsRUFBRTtRQUNySTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDJCQUEyQiwwQkFBMEIsRUFBRTtRQUN2RCxpQ0FBaUMsZUFBZTtRQUNoRDtRQUNBO1FBQ0E7O1FBRUE7UUFDQSxzREFBc0QsK0RBQStEOztRQUVySDtRQUNBOztRQUVBO1FBQ0EsMENBQTBDLG9CQUFvQixXQUFXOztRQUV6RTtRQUNBO1FBQ0E7UUFDQTtRQUNBLGdCQUFnQix1QkFBdUI7UUFDdkM7OztRQUdBO1FBQ0E7UUFDQTtRQUNBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0XCJtYWluXCI6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gc2NyaXB0IHBhdGggZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIGpzb25wU2NyaXB0U3JjKGNodW5rSWQpIHtcbiBcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyAoe1widGVtcGxhdGVzL2RyYWZ0L2Zvcm1UZW1wbGF0ZXNcIjpcInRlbXBsYXRlcy9kcmFmdC9mb3JtVGVtcGxhdGVzXCJ9W2NodW5rSWRdfHxjaHVua0lkKSArIFwiLmNodW5rLmpzXCJcbiBcdH1cblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG4gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3NcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZSA9IGZ1bmN0aW9uIHJlcXVpcmVFbnN1cmUoY2h1bmtJZCkge1xuIFx0XHR2YXIgcHJvbWlzZXMgPSBbXTtcblxuXG4gXHRcdC8vIEpTT05QIGNodW5rIGxvYWRpbmcgZm9yIGphdmFzY3JpcHRcblxuIFx0XHR2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuIFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cbiBcdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG4gXHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuIFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTtcbiBcdFx0XHRcdH0pO1xuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuIFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuIFx0XHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuIFx0XHRcdFx0dmFyIG9uU2NyaXB0Q29tcGxldGU7XG5cbiBcdFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiBcdFx0XHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuIFx0XHRcdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcbiBcdFx0XHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0c2NyaXB0LnNyYyA9IGpzb25wU2NyaXB0U3JjKGNodW5rSWQpO1xuXG4gXHRcdFx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG4gXHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoKTtcbiBcdFx0XHRcdG9uU2NyaXB0Q29tcGxldGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiBcdFx0XHRcdFx0Ly8gYXZvaWQgbWVtIGxlYWtzIGluIElFLlxuIFx0XHRcdFx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuIFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG4gXHRcdFx0XHRcdHZhciBjaHVuayA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdFx0XHRcdFx0aWYoY2h1bmsgIT09IDApIHtcbiBcdFx0XHRcdFx0XHRpZihjaHVuaykge1xuIFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcbiBcdFx0XHRcdFx0XHRcdHZhciByZWFsU3JjID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5zcmM7XG4gXHRcdFx0XHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XG4gXHRcdFx0XHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG4gXHRcdFx0XHRcdFx0XHRjaHVua1sxXShlcnJvcik7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fTtcbiBcdFx0XHRcdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuIFx0XHRcdFx0XHRvblNjcmlwdENvbXBsZXRlKHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KTtcbiBcdFx0XHRcdH0sIDEyMDAwMCk7XG4gXHRcdFx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlO1xuIFx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuIFx0fTtcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcInJvY2tldC9qcy9kaXN0L1wiO1xuXG4gXHQvLyBvbiBlcnJvciBmdW5jdGlvbiBmb3IgYXN5bmMgbG9hZGluZ1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vZSA9IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmVycm9yKGVycik7IHRocm93IGVycjsgfTtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goW1wiLi9qcy9pbmRleC5qc1wiLFwidmVuZG9yXCJdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==